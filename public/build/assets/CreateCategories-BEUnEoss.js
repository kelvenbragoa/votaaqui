import{s as A}from"./index-CnszjjtJ.js";import{s as O}from"./index-LzfBnFcQ.js";import{s as Q}from"./index-ChNyJrCk.js";import{s as G}from"./index-DzcF86oG.js";import{s as H}from"./index-o3qi-ec1.js";import{u as J,r as t,w as K,o as X,c as _,a,b as l,e as h,g as s,l as F,n as P,t as T,j as Y,i as Z,F as ee,k as ae,f as c,d as te}from"./app-DrVY5UIB.js";import{u as se}from"./vee-validate-DiISrGOR.js";import{d as oe}from"./moment-CQ1ixRO1.js";import{c as le,a as j}from"./index.esm-DpER4CkV.js";import"./index-BnfWDIPH.js";import"./index-OUojj5W6.js";import"./index-CZNYUL1o.js";import"./index--EEhPIfl.js";import"./index-BO4gTK7C.js";import"./index-BYCe9Ecl.js";import"./_commonjsHelpers-Cpj98o6Y.js";const re={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},ie={class:"w-full"},ne={class:"flex flex-col gap-4 text-center"},de={key:1,class:"flex flex-col md:flex-row gap-12"},me={class:"w-full"},ce={class:"card flex flex-col gap-4"},ue={class:"w-full"},pe={class:"flex flex-col gap-2"},fe={id:"name-help",class:"p-error"},ve={class:"flex flex-col gap-2"},ge={id:"department_id-help",class:"p-error"},qe={__name:"CreateCategories",setup(xe){const u=ae(),i=J();t(null);const p=t(!0),f=t(!1);let k=t(null);const C=t(""),v=t(null),q=t(1);t(15),t(0);const g=t(!1),S=t(null),n=t(!1),E=le({department_id:j().required().trim().label("Department"),name:j().required().trim().label("Name")}),{defineField:D,handleSubmit:U,resetForm:be,errors:d,setErrors:z}=se({validationSchema:E}),[x]=D("department_id"),[b]=D("name"),V=t();function w(){u&&u.back()}const B=()=>{g.value=!1},y=U(o=>{V.value!=null&&(o.image=V.value),n.value=!0,axios.post("/api/categories",o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{u.back(),i.add({severity:"success",summary:"Successo",detail:"Categoria criado com sucesso",life:3e3})}).catch(e=>{n.value=!1,i.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&z(e.response.data.errors)}).finally(()=>{n.value=!1})}),$=async(o=1)=>{axios.get("/api/categories/create",{params:{query:C.value}}).then(e=>{v.value=e.data.departments,S.value=e.data.departments,p.value=!1}).catch(e=>{p.value=!1,i.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),w()})},L=()=>{f.value=!0,axios.delete(`/api/categories/${k.value}`).then(()=>{v.value.data=v.value.data.filter(o=>o.id!==k.value),B(),i.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(o=>{i.add({severity:"error",summary:"Erro",detail:`${o}`,life:3e3}),f.value=!1}).finally(()=>{f.value=!1})},R=oe(()=>{$(q.value)},300);return K(C,R),X(()=>{$()}),(o,e)=>{const N=H,m=G,I=Q,M=O,W=A;return c(),_(ee,null,[p.value?(c(),_("div",re,[a("div",ie,[a("div",ne,[l(N,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[4]||(e[4]=a("p",null,"Por Favor Aguarde...",-1))])])])):(c(),_("div",de,[a("div",me,[a("div",ce,[a("div",ue,[l(m,{label:"Voltar",class:"mr-2 mb-2",onClick:w},{default:h(()=>e[5]||(e[5]=[a("i",{class:"pi pi-angle-left"},null,-1),te(" Voltar")])),_:1})]),e[8]||(e[8]=a("div",{class:"font-semibold text-xl"},"Categoria",-1)),e[9]||(e[9]=a("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),a("form",{onSubmit:e[2]||(e[2]=(...r)=>s(y)&&s(y)(...r))},[a("div",pe,[e[6]||(e[6]=a("label",{for:"name1"},"Nome",-1)),l(I,{modelValue:s(b),"onUpdate:modelValue":e[0]||(e[0]=r=>F(b)?b.value=r:null),id:"name",placeholder:"Nome da categoria",class:P({"p-invalid":s(d).name}),type:"text"},null,8,["modelValue","class"]),a("small",fe,T(s(d).name),1)]),a("div",ve,[e[7]||(e[7]=a("label",{for:"name1"},"Departamento Responsável",-1)),l(M,{modelValue:s(x),"onUpdate:modelValue":e[1]||(e[1]=r=>F(x)?x.value=r:null),options:S.value,optionLabel:"name",optionValue:"id",placeholder:"Selecionar",class:P({"p-invalid":s(d).department_id})},null,8,["modelValue","options","class"]),a("small",ge,T(s(d).department_id),1)]),l(m,{label:"Submeter",class:"mr-2 mb-2",onClick:s(y),disabled:n.value},null,8,["onClick","disabled"]),n.value?(c(),Y(N,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):Z("",!0)],32)])])])),l(W,{header:"Confirmação",visible:g.value,"onUpdate:visible":e[3]||(e[3]=r=>g.value=r),style:{width:"350px"},modal:!0},{footer:h(()=>[l(m,{label:"Não",icon:"pi pi-times",onClick:B,class:"p-button-text"}),l(m,{label:"Sim",icon:"pi pi-check",onClick:L,class:"p-button-text",autofocus:""})]),default:h(()=>[e[10]||(e[10]=a("div",{class:"flex align-items-center justify-content-center"},[a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),a("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{qe as default};
