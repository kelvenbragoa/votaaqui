import{s as G}from"./index-CnszjjtJ.js";import{s as H}from"./index-LzfBnFcQ.js";import{s as J}from"./index-ChNyJrCk.js";import{s as K}from"./index-DzcF86oG.js";import{s as X}from"./index-o3qi-ec1.js";import{u as Y,r as o,w as Z,c as $,a,b as t,e as N,g as l,l as m,n as p,t as u,j as ee,i as ae,F as le,k as se,f as g,d as oe}from"./app-DrVY5UIB.js";import{u as te}from"./vee-validate-DiISrGOR.js";import{d as ie}from"./moment-CQ1ixRO1.js";import{c as re,a as f}from"./index.esm-DpER4CkV.js";import"./index-BnfWDIPH.js";import"./index-OUojj5W6.js";import"./index-CZNYUL1o.js";import"./index--EEhPIfl.js";import"./index-BO4gTK7C.js";import"./index-BYCe9Ecl.js";import"./_commonjsHelpers-Cpj98o6Y.js";const ne={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},ce={class:"w-full"},de={class:"flex flex-col gap-4 text-center"},me={key:1,class:"flex flex-col md:flex-row gap-12"},pe={class:"w-full"},ue={class:"card flex flex-col gap-4"},fe={class:"w-full"},ve={class:"flex flex-col gap-2"},xe={id:"name-help",class:"p-error"},ge={class:"flex flex-col gap-2"},_e={id:"code-help",class:"p-error"},be={class:"flex flex-col gap-2"},ye={id:"location-help",class:"p-error"},ke={class:"flex flex-col gap-2"},Ce={id:"maximum_capacity-help",class:"p-error"},Ve={class:"flex flex-col gap-2"},Se={id:"is_principal_stock-help",class:"p-error"},We={__name:"CreateCenterStocks",setup(he){const _=se(),n=Y();o(null);const b=o(!1),y=o(!1);let q=o(null);const P=o(""),k=o(null),T=o(1);o(15),o(0);const C=o(!1),j=o(null),c=o(!1),E=re({name:f().required().trim().label("Name"),code:f().required().trim().label("Codigo"),location:f().required().trim().label("Localizacao"),maximum_capacity:f().required().trim().label("Capacidade"),is_principal_stock:f().required().trim().label("StockPrincipal")}),{defineField:d,handleSubmit:M,resetForm:we,errors:i,setErrors:I}=te({validationSchema:E}),[V]=d("name"),[S]=d("code"),[h]=d("location"),[w]=d("maximum_capacity"),[D]=d("is_principal_stock"),U=o();function z(){_&&_.back()}const F=()=>{C.value=!1},B=M(r=>{U.value!=null&&(r.image=U.value),c.value=!0,axios.post("/api/centerstocks",r,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{_.back(),n.add({severity:"success",summary:"Successo",detail:"Categoria criado com sucesso",life:3e3})}).catch(e=>{c.value=!1,n.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&I(e.response.data.errors)}).finally(()=>{c.value=!1})}),R=async(r=1)=>{axios.get("/api/centerstocks/create",{params:{query:P.value}}).then(e=>{k.value=e.data.departments,j.value=e.data.departments,b.value=!1}).catch(e=>{b.value=!1,n.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),z()})},W=()=>{y.value=!0,axios.delete(`/api/centerstocks/${q.value}`).then(()=>{k.value.data=k.value.data.filter(r=>r.id!==q.value),F(),n.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(r=>{n.add({severity:"error",summary:"Erro",detail:`${r}`,life:3e3}),y.value=!1}).finally(()=>{y.value=!1})},A=ie(()=>{R(T.value)},300);return Z(P,A),(r,e)=>{const L=X,v=K,x=J,O=H,Q=G;return g(),$(le,null,[b.value?(g(),$("div",ne,[a("div",ce,[a("div",de,[t(L,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[7]||(e[7]=a("p",null,"Por Favor Aguarde...",-1))])])])):(g(),$("div",me,[a("div",pe,[a("div",ue,[a("div",fe,[t(v,{label:"Voltar",class:"mr-2 mb-2",onClick:z},{default:N(()=>e[8]||(e[8]=[a("i",{class:"pi pi-angle-left"},null,-1),oe(" Voltar")])),_:1})]),e[14]||(e[14]=a("div",{class:"font-semibold text-xl"},"Centro de Stock",-1)),e[15]||(e[15]=a("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),a("form",{onSubmit:e[5]||(e[5]=(...s)=>l(B)&&l(B)(...s))},[a("div",ve,[e[9]||(e[9]=a("label",{for:"name"},"Nome",-1)),t(x,{modelValue:l(V),"onUpdate:modelValue":e[0]||(e[0]=s=>m(V)?V.value=s:null),id:"name",placeholder:"Nome",class:p({"p-invalid":l(i).name}),type:"text"},null,8,["modelValue","class"]),a("small",xe,u(l(i).name),1)]),a("div",ge,[e[10]||(e[10]=a("label",{for:"code"},"Código",-1)),t(x,{modelValue:l(S),"onUpdate:modelValue":e[1]||(e[1]=s=>m(S)?S.value=s:null),id:"code",placeholder:"Codigo",class:p({"p-invalid":l(i).code}),type:"text"},null,8,["modelValue","class"]),a("small",_e,u(l(i).code),1)]),a("div",be,[e[11]||(e[11]=a("label",{for:"location"},"Localização",-1)),t(x,{modelValue:l(h),"onUpdate:modelValue":e[2]||(e[2]=s=>m(h)?h.value=s:null),id:"location",placeholder:"Localização",class:p({"p-invalid":l(i).location}),type:"text"},null,8,["modelValue","class"]),a("small",ye,u(l(i).location),1)]),a("div",ke,[e[12]||(e[12]=a("label",{for:"maximum_capacity"},"Capacidade Máxima",-1)),t(x,{modelValue:l(w),"onUpdate:modelValue":e[3]||(e[3]=s=>m(w)?w.value=s:null),id:"maximum_capacity",placeholder:"Capacidade Máxima",class:p({"p-invalid":l(i).maximum_capacity}),type:"text"},null,8,["modelValue","class"]),a("small",Ce,u(l(i).maximum_capacity),1)]),a("div",Ve,[e[13]||(e[13]=a("label",{for:"is_principal_stock"},"Stock Principal",-1)),t(O,{modelValue:l(D),"onUpdate:modelValue":e[4]||(e[4]=s=>m(D)?D.value=s:null),id:"is_principal_stock",options:[{label:"Sim",value:1},{label:"Não",value:0}],optionLabel:"label",optionValue:"value",placeholder:"Selecionar",class:p({"p-invalid":l(i).is_principal_stock})},null,8,["modelValue","class"]),a("small",Se,u(l(i).is_principal_stock),1)]),t(v,{label:"Submeter",class:"mr-2 mb-2",onClick:l(B),disabled:c.value},null,8,["onClick","disabled"]),c.value?(g(),ee(L,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):ae("",!0)],32)])])])),t(Q,{header:"Confirmação",visible:C.value,"onUpdate:visible":e[6]||(e[6]=s=>C.value=s),style:{width:"350px"},modal:!0},{footer:N(()=>[t(v,{label:"Não",icon:"pi pi-times",onClick:F,class:"p-button-text"}),t(v,{label:"Sim",icon:"pi pi-check",onClick:W,class:"p-button-text",autofocus:""})]),default:N(()=>[e[16]||(e[16]=a("div",{class:"flex align-items-center justify-content-center"},[a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),a("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{We as default};
