import{s as O}from"./index-BiBBGeHC.js";import{s as Q}from"./index-gxu_UWez.js";import{s as G}from"./index-DbDZMwuB.js";import{s as H}from"./index-C1NcMyXW.js";import{x as J,r as a,z as K,o as X,c as D,b as s,d as o,w as E,A as l,B as p,s as f,t as v,C as Y,m as Z,F as ee,q as se,l as b,h as le}from"./app-DC1UR6pl.js";import{u as ae}from"./vee-validate-CXWvnhUn.js";import"./moment-C5S46NFB.js";import{c as te,a as x}from"./index.esm-CQT6nZnd.js";import{d as oe}from"./debounce-BMmXVQ06.js";import"./index-Cos-MHlu.js";import"./index-CgS_6hon.js";import"./index-BTmt5xlq.js";const ie={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},re={class:"w-full"},ne={class:"flex flex-col gap-4 text-center"},de={key:1,class:"flex flex-col md:flex-row gap-12"},me={class:"w-full"},ue={class:"card flex flex-col gap-4"},ce={class:"w-full"},pe={class:"flex flex-col gap-2"},fe={id:"name-help",class:"p-error"},ve={class:"flex flex-col gap-2"},be={id:"mobile-help",class:"p-error"},xe={class:"flex flex-col gap-2"},ge={id:"email-help",class:"p-error"},ye={class:"flex flex-col gap-2"},he={id:"address-help",class:"p-error"},Ue={__name:"CreateCustomers",setup(Ce){const g=se(),n=J();a(null);const y=a(!1),h=a(!1);let $=a(null);const N=a(""),C=a(null),P=a(1);a(15),a(0);const k=a(!1),z=a(null),d=a(!1),j=te({email:x().required().trim().label("Email"),name:x().required().trim().label("Name"),mobile:x().required().trim().label("mobile"),address:x().required().trim().label("address")}),{defineField:m,handleSubmit:A,resetForm:ke,errors:i,setErrors:I}=ae({validationSchema:j}),[V]=m("email"),[_]=m("name"),[S]=m("mobile"),[w]=m("address"),q=a();function T(){g&&g.back()}const F=()=>{k.value=!1},B=A(r=>{q.value!=null&&(r.image=q.value),d.value=!0,axios.post("/api/customers",r,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{g.back(),n.add({severity:"success",summary:"Successo",detail:"Categoria criado com sucesso",life:3e3})}).catch(e=>{d.value=!1,n.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&I(e.response.data.errors)}).finally(()=>{d.value=!1})}),L=async(r=1)=>{axios.get("/api/customers/create",{params:{query:N.value}}).then(e=>{C.value=e.data.customer,z.value=e.data.departments,y.value=!1}).catch(e=>{y.value=!1,n.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),T()})},M=()=>{h.value=!0,axios.delete(`/api/customers/${$.value}`).then(()=>{C.value.data=C.value.data.filter(r=>r.id!==$.value),F(),n.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(r=>{n.add({severity:"error",summary:"Erro",detail:`${r}`,life:3e3}),h.value=!1}).finally(()=>{h.value=!1})},R=oe(()=>{L(P.value)},300);return K(N,R),X(()=>{}),(r,e)=>{const U=H,u=G,c=Q,W=O;return b(),D(ee,null,[y.value?(b(),D("div",ie,[s("div",re,[s("div",ne,[o(U,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[6]||(e[6]=s("p",null,"Por Favor Aguarde...",-1))])])])):(b(),D("div",de,[s("div",me,[s("div",ue,[s("div",ce,[o(u,{label:"Voltar",class:"mr-2 mb-2",onClick:T},{default:E(()=>e[7]||(e[7]=[s("i",{class:"pi pi-angle-left"},null,-1),le(" Voltar")])),_:1})]),e[12]||(e[12]=s("div",{class:"font-semibold text-xl"},"Clientes",-1)),e[13]||(e[13]=s("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),s("form",{onSubmit:e[4]||(e[4]=(...t)=>l(B)&&l(B)(...t))},[s("div",pe,[e[8]||(e[8]=s("label",{for:"name"},"Nome",-1)),o(c,{modelValue:l(_),"onUpdate:modelValue":e[0]||(e[0]=t=>p(_)?_.value=t:null),id:"name",placeholder:"Nome",class:f({"p-invalid":l(i).name}),type:"text"},null,8,["modelValue","class"]),s("small",fe,v(l(i).name),1)]),s("div",ve,[e[9]||(e[9]=s("label",{for:"mobile"},"Telefone",-1)),o(c,{modelValue:l(S),"onUpdate:modelValue":e[1]||(e[1]=t=>p(S)?S.value=t:null),id:"mobile",placeholder:"Telefone",class:f({"p-invalid":l(i).mobile}),type:"text"},null,8,["modelValue","class"]),s("small",be,v(l(i).mobile),1)]),s("div",xe,[e[10]||(e[10]=s("label",{for:"email"},"Email",-1)),o(c,{modelValue:l(V),"onUpdate:modelValue":e[2]||(e[2]=t=>p(V)?V.value=t:null),id:"email",placeholder:"Email",class:f({"p-invalid":l(i).email}),type:"email"},null,8,["modelValue","class"]),s("small",ge,v(l(i).email),1)]),s("div",ye,[e[11]||(e[11]=s("label",{for:"address"},"Endereço",-1)),o(c,{modelValue:l(w),"onUpdate:modelValue":e[3]||(e[3]=t=>p(w)?w.value=t:null),id:"address",placeholder:"Endereço",class:f({"p-invalid":l(i).address}),type:"text"},null,8,["modelValue","class"]),s("small",he,v(l(i).address),1)]),o(u,{label:"Submeter",class:"mr-2 mb-2",onClick:l(B),disabled:d.value},null,8,["onClick","disabled"]),d.value?(b(),Y(U,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):Z("",!0)],32)])])])),o(W,{header:"Confirmação",visible:k.value,"onUpdate:visible":e[5]||(e[5]=t=>k.value=t),style:{width:"350px"},modal:!0},{footer:E(()=>[o(u,{label:"Não",icon:"pi pi-times",onClick:F,class:"p-button-text"}),o(u,{label:"Sim",icon:"pi pi-check",onClick:M,class:"p-button-text",autofocus:""})]),default:E(()=>[e[14]||(e[14]=s("div",{class:"flex align-items-center justify-content-center"},[s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),s("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{Ue as default};
