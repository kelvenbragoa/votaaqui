import{s as S}from"./index-DYeDIXbZ.js";import{s as N}from"./index-VXIkeAsb.js";import{s as I}from"./index-VuUe1goh.js";import{s as B}from"./index-CBAqRgZ1.js";import{s as D}from"./index-QcDmmBo-.js";import{s as A}from"./index-CuPgYuK1.js";import{s as L}from"./index-BUdsdqYF.js";import{s as M}from"./index-CnKwZFsY.js";import{_ as q,x as z,r as _,o as J,c as i,b as s,d as a,e as O,h as c,s as r,t as u,m as n,j as h,l as d,q as W}from"./app-DS2baS_n.js";import"./index-C6Z0hblE.js";import"./index-Db20dqtZ.js";import"./index-CB4w3mkd.js";import"./index-B9mXU8BC.js";import"./index-C4xTnPqq.js";import"./index-BdUc-6tC.js";import"./index-O1HFkTos.js";import"./index-CqjTOAB9.js";import"./index-DLDOSecU.js";import"./index-DQJeiTDr.js";import"./index-CkDGj_Jl.js";import"./index-DIGOts75.js";import"./index-CJe96r15.js";const R={class:"grid"},G={class:"col-12"},H={class:"card"},K={class:"flex justify-content-between align-items-center mb-4"},Q={class:"grid"},X={class:"col-12 md:col-6"},Y={class:"field"},Z={key:0,class:"p-error"},ee={class:"col-12 md:col-6"},se={class:"field"},le={key:0,class:"p-error"},oe={class:"col-12"},te={class:"field"},ae={key:0,class:"p-error"},ie={class:"col-12"},de={class:"field"},ne={key:0,class:"p-error"},re={class:"col-12 md:col-6"},ue={class:"field"},pe={key:0,class:"p-error"},me={class:"col-12 md:col-6"},ce={class:"field"},ve={key:0,class:"p-error"},_e={class:"col-12"},be={class:"field-checkbox mb-3"},fe={key:0,class:"col-12"},ge={class:"grid"},ye={class:"col-12 md:col-6"},Ve={class:"field"},we={key:0,class:"p-error"},he={class:"col-12 md:col-6"},xe={class:"field"},ke={key:0,class:"p-error"},je={class:"col-12 md:col-6"},Ee={class:"field"},Ue={key:0,class:"p-error"},Ce={class:"col-12 md:col-6"},Te={class:"field"},$e={key:0,class:"p-error"},Fe={class:"col-12"},Pe={class:"field"},Se={class:"col-12"},Ne={class:"field"},Ie={key:0,class:"p-error"},Be={class:"col-12"},De={class:"flex gap-2 justify-content-end"},Ae={__name:"CreateEpisodes",setup(Le){const x=W(),g=z(),b=_(!1),y=_([]),l=_({}),o=_({episode_number:null,title:"",description:"",episode_type:"elimination",air_date:null,status:"scheduled",voting_open:!1,voting_start:null,voting_end:null,jury_weight:50,public_weight:50,participant_ids:[],notes:""}),k=[{label:"Eliminação",value:"elimination"},{label:"Final",value:"finale"},{label:"Especial",value:"special"},{label:"Audição",value:"audition"}],j=[{label:"Agendado",value:"scheduled"},{label:"Ao Vivo",value:"live"},{label:"Finalizado",value:"finished"}],E=async()=>{try{const p=await h.get("/api/web/episodes/participants/available");p.data.success&&(y.value=p.data.data)}catch(p){console.error("Erro ao carregar participantes:",p)}},U=()=>{o.value.jury_weight!==null&&(o.value.public_weight=100-o.value.jury_weight)},C=()=>{o.value.public_weight!==null&&(o.value.jury_weight=100-o.value.public_weight)},T=async()=>{var p,e,v;b.value=!0,l.value={};try{const m=await h.post("/api/web/episodes",o.value);m.data.success&&(g.add({severity:"success",summary:"Sucesso",detail:m.data.message,life:3e3}),x.push("/admin/episodes"))}catch(m){((p=m.response)==null?void 0:p.status)===422&&(l.value=m.response.data.errors||{}),g.add({severity:"error",summary:"Erro",detail:((v=(e=m.response)==null?void 0:e.data)==null?void 0:v.message)||"Erro ao criar episódio",life:3e3})}finally{b.value=!1}};return J(()=>{E()}),(p,e)=>{const v=M,m=L,V=A,$=D,w=B,f=I,F=N,P=S;return d(),i("div",R,[s("div",G,[s("div",H,[s("div",K,[e[15]||(e[15]=s("h5",{class:"m-0"},"Novo Episódio",-1)),a(v,{label:"Voltar",icon:"pi pi-arrow-left",class:"p-button-outlined",onClick:e[0]||(e[0]=t=>p.$router.push("/admin/episodes"))})]),s("form",{onSubmit:O(T,["prevent"])},[s("div",Q,[e[30]||(e[30]=s("div",{class:"col-12"},[s("h6",{class:"text-primary mb-3"},"Informações Básicas")],-1)),s("div",X,[s("div",Y,[e[16]||(e[16]=s("label",{for:"episode_number",class:"block text-900 font-medium mb-2"},[c(" Número do Episódio "),s("span",{class:"text-red-500"},"*")],-1)),a(m,{id:"episode_number",modelValue:o.value.episode_number,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.episode_number=t),min:1,max:999,showButtons:"",class:r([{"p-invalid":l.value.episode_number},"w-full"])},null,8,["modelValue","class"]),l.value.episode_number?(d(),i("small",Z,u(l.value.episode_number),1)):n("",!0)])]),s("div",ee,[s("div",se,[e[17]||(e[17]=s("label",{for:"episode_type",class:"block text-900 font-medium mb-2"},[c(" Tipo de Episódio "),s("span",{class:"text-red-500"},"*")],-1)),a(V,{id:"episode_type",modelValue:o.value.episode_type,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.episode_type=t),options:k,optionLabel:"label",optionValue:"value",placeholder:"Selecione o tipo",class:r([{"p-invalid":l.value.episode_type},"w-full"])},null,8,["modelValue","class"]),l.value.episode_type?(d(),i("small",le,u(l.value.episode_type),1)):n("",!0)])]),s("div",oe,[s("div",te,[e[18]||(e[18]=s("label",{for:"title",class:"block text-900 font-medium mb-2"},[c(" Título "),s("span",{class:"text-red-500"},"*")],-1)),a($,{id:"title",modelValue:o.value.title,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.title=t),class:r([{"p-invalid":l.value.title},"w-full"]),placeholder:"Ex: Primeira Eliminação"},null,8,["modelValue","class"]),l.value.title?(d(),i("small",ae,u(l.value.title),1)):n("",!0)])]),s("div",ie,[s("div",de,[e[19]||(e[19]=s("label",{for:"description",class:"block text-900 font-medium mb-2"},"Descrição",-1)),a(w,{id:"description",modelValue:o.value.description,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.description=t),rows:"4",class:r([{"p-invalid":l.value.description},"w-full"]),placeholder:"Descrição do episódio..."},null,8,["modelValue","class"]),l.value.description?(d(),i("small",ne,u(l.value.description),1)):n("",!0)])]),e[31]||(e[31]=s("div",{class:"col-12"},[s("h6",{class:"text-primary mb-3"},"Datas e Status")],-1)),s("div",re,[s("div",ue,[e[20]||(e[20]=s("label",{for:"air_date",class:"block text-900 font-medium mb-2"},[c(" Data de Transmissão "),s("span",{class:"text-red-500"},"*")],-1)),a(f,{id:"air_date",modelValue:o.value.air_date,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.air_date=t),showTime:"",hourFormat:"24",class:r([{"p-invalid":l.value.air_date},"w-full"]),placeholder:"dd/mm/aaaa hh:mm",dateFormat:"dd/mm/yy"},null,8,["modelValue","class"]),l.value.air_date?(d(),i("small",pe,u(l.value.air_date),1)):n("",!0)])]),s("div",me,[s("div",ce,[e[21]||(e[21]=s("label",{for:"status",class:"block text-900 font-medium mb-2"},[c(" Status "),s("span",{class:"text-red-500"},"*")],-1)),a(V,{id:"status",modelValue:o.value.status,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.status=t),options:j,optionLabel:"label",optionValue:"value",placeholder:"Selecione o status",class:r([{"p-invalid":l.value.status},"w-full"])},null,8,["modelValue","class"]),l.value.status?(d(),i("small",ve,u(l.value.status),1)):n("",!0)])]),e[32]||(e[32]=s("div",{class:"col-12"},[s("h6",{class:"text-primary mb-3"},"Configurações de Votação")],-1)),s("div",_e,[s("div",be,[a(F,{id:"voting_open",modelValue:o.value.voting_open,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.voting_open=t),binary:!0},null,8,["modelValue"]),e[22]||(e[22]=s("label",{for:"voting_open",class:"ml-2"},"Votação Aberta",-1))])]),o.value.voting_open?(d(),i("div",fe,[s("div",ge,[s("div",ye,[s("div",Ve,[e[23]||(e[23]=s("label",{for:"voting_start",class:"block text-900 font-medium mb-2"},[c(" Início da Votação "),s("span",{class:"text-red-500"},"*")],-1)),a(f,{id:"voting_start",modelValue:o.value.voting_start,"onUpdate:modelValue":e[8]||(e[8]=t=>o.value.voting_start=t),showTime:"",hourFormat:"24",class:r([{"p-invalid":l.value.voting_start},"w-full"]),placeholder:"dd/mm/aaaa hh:mm",dateFormat:"dd/mm/yy"},null,8,["modelValue","class"]),l.value.voting_start?(d(),i("small",we,u(l.value.voting_start),1)):n("",!0)])]),s("div",he,[s("div",xe,[e[24]||(e[24]=s("label",{for:"voting_end",class:"block text-900 font-medium mb-2"},[c(" Fim da Votação "),s("span",{class:"text-red-500"},"*")],-1)),a(f,{id:"voting_end",modelValue:o.value.voting_end,"onUpdate:modelValue":e[9]||(e[9]=t=>o.value.voting_end=t),showTime:"",hourFormat:"24",class:r([{"p-invalid":l.value.voting_end},"w-full"]),placeholder:"dd/mm/aaaa hh:mm",dateFormat:"dd/mm/yy"},null,8,["modelValue","class"]),l.value.voting_end?(d(),i("small",ke,u(l.value.voting_end),1)):n("",!0)])])])])):n("",!0),s("div",je,[s("div",Ee,[e[25]||(e[25]=s("label",{for:"jury_weight",class:"block text-900 font-medium mb-2"},[c(" Peso do Júri (%) "),s("span",{class:"text-red-500"},"*")],-1)),a(m,{id:"jury_weight",modelValue:o.value.jury_weight,"onUpdate:modelValue":e[10]||(e[10]=t=>o.value.jury_weight=t),min:0,max:100,suffix:"%",class:r([{"p-invalid":l.value.jury_weight},"w-full"]),onInput:U},null,8,["modelValue","class"]),l.value.jury_weight?(d(),i("small",Ue,u(l.value.jury_weight),1)):n("",!0)])]),s("div",Ce,[s("div",Te,[e[26]||(e[26]=s("label",{for:"public_weight",class:"block text-900 font-medium mb-2"},[c(" Peso Público (%) "),s("span",{class:"text-red-500"},"*")],-1)),a(m,{id:"public_weight",modelValue:o.value.public_weight,"onUpdate:modelValue":e[11]||(e[11]=t=>o.value.public_weight=t),min:0,max:100,suffix:"%",class:r([{"p-invalid":l.value.public_weight},"w-full"]),onInput:C},null,8,["modelValue","class"]),l.value.public_weight?(d(),i("small",$e,u(l.value.public_weight),1)):n("",!0)])]),e[33]||(e[33]=s("div",{class:"col-12"},[s("h6",{class:"text-primary mb-3"},"Participantes")],-1)),s("div",Fe,[s("div",Pe,[e[27]||(e[27]=s("label",{class:"block text-900 font-medium mb-2"},"Selecionar Participantes",-1)),a(P,{modelValue:o.value.participant_ids,"onUpdate:modelValue":e[12]||(e[12]=t=>o.value.participant_ids=t),options:y.value,optionLabel:"name",optionValue:"id",placeholder:"Selecione os participantes",filter:!0,class:"w-full",display:"chip"},null,8,["modelValue","options"]),e[28]||(e[28]=s("small",{class:"text-muted"}," Participantes que irão participar deste episódio ",-1))])]),s("div",Se,[s("div",Ne,[e[29]||(e[29]=s("label",{for:"notes",class:"block text-900 font-medium mb-2"},"Notas",-1)),a(w,{id:"notes",modelValue:o.value.notes,"onUpdate:modelValue":e[13]||(e[13]=t=>o.value.notes=t),rows:"3",class:r([{"p-invalid":l.value.notes},"w-full"]),placeholder:"Observações adicionais..."},null,8,["modelValue","class"]),l.value.notes?(d(),i("small",Ie,u(l.value.notes),1)):n("",!0)])]),s("div",Be,[s("div",De,[a(v,{label:"Cancelar",icon:"pi pi-times",class:"p-button-outlined",onClick:e[14]||(e[14]=t=>p.$router.push("/admin/episodes")),type:"button"}),a(v,{label:"Criar Episódio",icon:"pi pi-check",type:"submit",loading:b.value},null,8,["loading"])])])])],32)])])])}}},ns=q(Ae,[["__scopeId","data-v-e1a19a7a"]]);export{ns as default};
