import{T as B}from"./index-BRrHtYk_.js";import{s as D}from"./index-CBAqRgZ1.js";import{s as I}from"./index-VXIkeAsb.js";import{s as E}from"./index-CuPgYuK1.js";import{s as O}from"./index-BUdsdqYF.js";import{s as $}from"./index-QcDmmBo-.js";import{s as j}from"./index-Cx7jidjO.js";import{s as A}from"./index-CnKwZFsY.js";import{_ as G,x as R,r as b,aT as z,o as L,c as i,b as o,d as s,e as J,m as d,s as u,t as m,i as W,l as n,q as Z}from"./app-DS2baS_n.js";import"./index-C6Z0hblE.js";import"./index-CqjTOAB9.js";import"./index-CB4w3mkd.js";import"./index-Db20dqtZ.js";import"./index-B9mXU8BC.js";import"./index-C4xTnPqq.js";import"./index-BdUc-6tC.js";import"./index-CJe96r15.js";import"./index-ZzhbnyzE.js";import"./index-2b2sJge_.js";import"./index-CE65Lm5q.js";const q={class:"flex flex-col md:flex-row gap-12"},H={class:"w-full"},K={class:"card flex flex-col gap-4"},Q={class:"flex items-center justify-between mb-4"},X={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Y={class:"col-span-full"},ee={class:"flex flex-col lg:flex-row gap-4 items-start"},oe={key:0,class:"relative"},le=["src"],ae={class:"flex-1"},te={key:0,class:"p-error"},se={key:0,class:"p-error"},ie={class:"flex gap-2"},ne={key:0,class:"p-error"},re={key:1,class:"text-gray-500"},de={key:0,class:"p-error"},ue={key:0,class:"p-error"},me={key:0,class:"p-error"},pe={key:0,class:"p-error"},ce={key:0,class:"p-error"},ve={class:"flex items-center"},fe={class:"col-span-full"},be={key:0,class:"p-error"},ge={key:0,class:"p-error"},ke={key:0,class:"p-error"},xe={key:0,class:"p-error"},ye={class:"flex justify-end gap-3 mt-8"},Ve={__name:"CreateParticipants",setup(_e){const x=Z(),g=R(),k=b(!1),y=b(null),f=b(null),a=z({name:"",stage_name:"",voting_code:"",age:null,gender:"",city:"",province:"",biography:"",occupation:"",instagram:"",facebook:"",tiktok:"",photo:null,active:!0}),l=b({}),C=[{label:"Masculino",value:"M"},{label:"Feminino",value:"F"},{label:"Outro",value:"Other"}],h=["Cabo Delgado","Gaza","Inhambane","Manica","Maputo Cidade","Maputo Província","Nampula","Niassa","Sofala","Tete","Zambézia"],P=c=>{const e=c.files[0];if(e){a.photo=e,y.value=e;const r=new FileReader;r.onload=v=>{f.value=v.target.result},r.readAsDataURL(e)}},S=()=>{a.photo=null,y.value=null,f.value=null},V=()=>{const c="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let r=0;r<4;r++)e+=c.charAt(Math.floor(Math.random()*c.length));a.voting_code=e},U=()=>{k.value=!0,l.value={};const c=new FormData;Object.keys(a).forEach(e=>{a[e]!==null&&a[e]!==""&&e!=="photo"&&c.append(e,a[e])}),a.photo&&c.append("photo",a.photo),axios.post("/api/web/participants",c,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{g.add({severity:"success",summary:"Sucesso",detail:"Participante criado com sucesso",life:3e3}),x.push("/admin/participants")}).catch(e=>{var r,v,p;((r=e.response)==null?void 0:r.status)===422?(l.value=e.response.data.errors,g.add({severity:"error",summary:"Erro de Validação",detail:"Por favor, corrija os campos destacados",life:5e3})):g.add({severity:"error",summary:"Erro",detail:((p=(v=e.response)==null?void 0:v.data)==null?void 0:p.message)||"Erro ao criar participante",life:5e3})}).finally(()=>{k.value=!1})},_=()=>{x.push("/admin/participants")};return L(()=>{V()}),(c,e)=>{const r=A,v=j,p=$,F=O,w=E,M=I,N=D,T=B;return n(),i("div",q,[o("div",H,[o("div",K,[o("div",Q,[e[13]||(e[13]=o("div",{class:"font-semibold text-xl"},"Novo Participante",-1)),s(r,{icon:"pi pi-arrow-left",label:"Voltar",severity:"secondary",outlined:"",onClick:_})]),o("form",{onSubmit:J(U,["prevent"])},[o("div",X,[e[30]||(e[30]=o("div",{class:"col-span-full"},[o("h3",{class:"text-lg font-medium mb-4"},"Informações Básicas")],-1)),o("div",Y,[e[15]||(e[15]=o("label",{class:"block text-sm font-medium mb-2"},"Foto do Participante",-1)),o("div",ee,[f.value?(n(),i("div",oe,[o("img",{src:f.value,alt:"Preview",class:"w-32 h-32 object-cover rounded-lg border"},null,8,le),s(r,{icon:"pi pi-times",class:"absolute -top-2 -right-2 p-button-rounded p-button-danger p-button-sm",onClick:S})])):d("",!0),o("div",ae,[s(v,{mode:"basic",accept:"image/*",maxFileSize:2e6,auto:!1,chooseLabel:"Selecionar Foto",onSelect:P,class:"w-full"}),e[14]||(e[14]=o("small",{class:"text-gray-500"},"Máximo 2MB. Formatos: JPG, PNG",-1))])])]),o("div",null,[e[16]||(e[16]=o("label",{for:"name",class:"block text-sm font-medium mb-2"},"Nome Completo *",-1)),s(p,{id:"name",modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.name=t),class:u([{"p-invalid":l.value.name},"w-full"]),placeholder:"Digite o nome completo"},null,8,["modelValue","class"]),l.value.name?(n(),i("small",te,m(l.value.name[0]),1)):d("",!0)]),o("div",null,[e[17]||(e[17]=o("label",{for:"stage_name",class:"block text-sm font-medium mb-2"},"Nome Artístico",-1)),s(p,{id:"stage_name",modelValue:a.stage_name,"onUpdate:modelValue":e[1]||(e[1]=t=>a.stage_name=t),class:u([{"p-invalid":l.value.stage_name},"w-full"]),placeholder:"Nome artístico ou apelido"},null,8,["modelValue","class"]),l.value.stage_name?(n(),i("small",se,m(l.value.stage_name[0]),1)):d("",!0)]),o("div",null,[e[18]||(e[18]=o("label",{for:"voting_code",class:"block text-sm font-medium mb-2"},"Código de Votação *",-1)),o("div",ie,[s(p,{id:"voting_code",modelValue:a.voting_code,"onUpdate:modelValue":e[2]||(e[2]=t=>a.voting_code=t),class:u([{"p-invalid":l.value.voting_code},"flex-1"]),placeholder:"Código único",maxlength:"4"},null,8,["modelValue","class"]),W(s(r,{icon:"pi pi-refresh",onClick:V,type:"button",outlined:""},null,512),[[T,"Gerar novo código",void 0,{top:!0}]])]),l.value.voting_code?(n(),i("small",ne,m(l.value.voting_code[0]),1)):(n(),i("small",re,"Código usado para votação SMS/WhatsApp"))]),o("div",null,[e[19]||(e[19]=o("label",{for:"age",class:"block text-sm font-medium mb-2"},"Idade",-1)),s(F,{id:"age",modelValue:a.age,"onUpdate:modelValue":e[3]||(e[3]=t=>a.age=t),class:u([{"p-invalid":l.value.age},"w-full"]),placeholder:"Idade",min:16,max:100},null,8,["modelValue","class"]),l.value.age?(n(),i("small",de,m(l.value.age[0]),1)):d("",!0)]),o("div",null,[e[20]||(e[20]=o("label",{for:"gender",class:"block text-sm font-medium mb-2"},"Sexo",-1)),s(w,{id:"gender",modelValue:a.gender,"onUpdate:modelValue":e[4]||(e[4]=t=>a.gender=t),options:C,optionLabel:"label",optionValue:"value",placeholder:"Selecione o sexo",class:u([{"p-invalid":l.value.gender},"w-full"])},null,8,["modelValue","class"]),l.value.gender?(n(),i("small",ue,m(l.value.gender[0]),1)):d("",!0)]),o("div",null,[e[21]||(e[21]=o("label",{for:"city",class:"block text-sm font-medium mb-2"},"Cidade",-1)),s(p,{id:"city",modelValue:a.city,"onUpdate:modelValue":e[5]||(e[5]=t=>a.city=t),class:u([{"p-invalid":l.value.city},"w-full"]),placeholder:"Cidade de origem"},null,8,["modelValue","class"]),l.value.city?(n(),i("small",me,m(l.value.city[0]),1)):d("",!0)]),o("div",null,[e[22]||(e[22]=o("label",{for:"province",class:"block text-sm font-medium mb-2"},"Província",-1)),s(w,{id:"province",modelValue:a.province,"onUpdate:modelValue":e[6]||(e[6]=t=>a.province=t),options:h,placeholder:"Selecione a província",class:u([{"p-invalid":l.value.province},"w-full"])},null,8,["modelValue","class"]),l.value.province?(n(),i("small",pe,m(l.value.province[0]),1)):d("",!0)]),o("div",null,[e[23]||(e[23]=o("label",{for:"occupation",class:"block text-sm font-medium mb-2"},"Ocupação",-1)),s(p,{id:"occupation",modelValue:a.occupation,"onUpdate:modelValue":e[7]||(e[7]=t=>a.occupation=t),class:u([{"p-invalid":l.value.occupation},"w-full"]),placeholder:"Profissão ou ocupação"},null,8,["modelValue","class"]),l.value.occupation?(n(),i("small",ce,m(l.value.occupation[0]),1)):d("",!0)]),o("div",null,[e[25]||(e[25]=o("label",{class:"block text-sm font-medium mb-2"},"Status",-1)),o("div",ve,[s(M,{id:"active",modelValue:a.active,"onUpdate:modelValue":e[8]||(e[8]=t=>a.active=t),binary:!0},null,8,["modelValue"]),e[24]||(e[24]=o("label",{for:"active",class:"ml-2"},"Participante ativo",-1))])]),o("div",fe,[e[26]||(e[26]=o("label",{for:"biography",class:"block text-sm font-medium mb-2"},"Biografia",-1)),s(N,{id:"biography",modelValue:a.biography,"onUpdate:modelValue":e[9]||(e[9]=t=>a.biography=t),class:u([{"p-invalid":l.value.biography},"w-full"]),placeholder:"Conte sobre o participante...",rows:"4"},null,8,["modelValue","class"]),l.value.biography?(n(),i("small",be,m(l.value.biography[0]),1)):d("",!0)]),e[31]||(e[31]=o("div",{class:"col-span-full"},[o("h3",{class:"text-lg font-medium mb-4"},"Redes Sociais")],-1)),o("div",null,[e[27]||(e[27]=o("label",{for:"instagram",class:"block text-sm font-medium mb-2"},"Instagram",-1)),s(p,{id:"instagram",modelValue:a.instagram,"onUpdate:modelValue":e[10]||(e[10]=t=>a.instagram=t),class:u([{"p-invalid":l.value.instagram},"w-full"]),placeholder:"@usuario"},null,8,["modelValue","class"]),l.value.instagram?(n(),i("small",ge,m(l.value.instagram[0]),1)):d("",!0)]),o("div",null,[e[28]||(e[28]=o("label",{for:"facebook",class:"block text-sm font-medium mb-2"},"Facebook",-1)),s(p,{id:"facebook",modelValue:a.facebook,"onUpdate:modelValue":e[11]||(e[11]=t=>a.facebook=t),class:u([{"p-invalid":l.value.facebook},"w-full"]),placeholder:"Nome de usuário"},null,8,["modelValue","class"]),l.value.facebook?(n(),i("small",ke,m(l.value.facebook[0]),1)):d("",!0)]),o("div",null,[e[29]||(e[29]=o("label",{for:"tiktok",class:"block text-sm font-medium mb-2"},"TikTok",-1)),s(p,{id:"tiktok",modelValue:a.tiktok,"onUpdate:modelValue":e[12]||(e[12]=t=>a.tiktok=t),class:u([{"p-invalid":l.value.tiktok},"w-full"]),placeholder:"@usuario"},null,8,["modelValue","class"]),l.value.tiktok?(n(),i("small",xe,m(l.value.tiktok[0]),1)):d("",!0)])]),o("div",ye,[s(r,{label:"Cancelar",severity:"secondary",outlined:"",onClick:_,type:"button"}),s(r,{label:"Salvar Participante",type:"submit",loading:k.value,icon:"pi pi-save"},null,8,["loading"])])],32)])])])}}},ze=G(Ve,[["__scopeId","data-v-e05d5b0d"]]);export{ze as default};
