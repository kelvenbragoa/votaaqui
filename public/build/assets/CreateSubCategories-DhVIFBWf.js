import{s as W}from"./index-CHtFv5iK.js";import{s as O}from"./index-CxgXACXu.js";import{s as Q}from"./index-BALpCQHV.js";import{s as G}from"./index-D3dibykF.js";import{s as H}from"./index-J2AfLYEW.js";import{x as J,r as s,z as K,o as X,c as _,b as a,d as l,w as C,A as t,B as F,s as q,t as P,C as Y,m as Z,F as ee,q as ae,l as u,h as se}from"./app-DIymDWP7.js";import{u as te}from"./vee-validate-bFEGO-Lt.js";import"./moment-C5S46NFB.js";import{c as oe,a as T}from"./index.esm-CQT6nZnd.js";import{d as le}from"./debounce-BMmXVQ06.js";import"./index-BmOqLsRc.js";import"./index-fVX7yaxY.js";import"./index-Dg9DzAxn.js";import"./index-cnl34PeR.js";import"./index-DAjVCkKq.js";import"./index-JAn7prKR.js";const ie={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},re={class:"w-full"},ne={class:"flex flex-col gap-4 text-center"},ce={key:1,class:"flex flex-col md:flex-row gap-12"},de={class:"w-full"},ue={class:"card flex flex-col gap-4"},me={class:"w-full"},pe={class:"flex flex-col gap-2"},fe={id:"name-help",class:"p-error"},ge={class:"flex flex-col gap-2"},ve={id:"category_id-help",class:"p-error"},ze={__name:"CreateSubCategories",setup(be){const m=ae(),r=J();s(null);const p=s(!0),f=s(!1);let h=s(null);const S=s(""),g=s(null),z=s(1);s(15),s(0);const v=s(!1),k=s(null),n=s(!1),E=oe({category_id:T().required().trim().label("Categoria"),name:T().required().trim().label("Name")}),{defineField:V,handleSubmit:U,resetForm:xe,errors:c,setErrors:j}=te({validationSchema:E}),[b]=V("category_id"),[x]=V("name"),w=s();function B(){m&&m.back()}const D=()=>{v.value=!1},y=U(o=>{w.value!=null&&(o.image=w.value),n.value=!0,axios.post("/api/subcategories",o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{m.back(),r.add({severity:"success",summary:"Successo",detail:"SubCategoria criado com sucesso",life:3e3})}).catch(e=>{n.value=!1,r.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&j(e.response.data.errors)}).finally(()=>{n.value=!1})}),$=async(o=1)=>{axios.get("/api/subcategories/create",{params:{query:S.value}}).then(e=>{g.value=e.data.categories,k.value=e.data.categories,p.value=!1}).catch(e=>{p.value=!1,r.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),B()})},L=()=>{f.value=!0,axios.delete(`/api/subcategories/${h.value}`).then(()=>{g.value.data=g.value.data.filter(o=>o.id!==h.value),D(),r.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(o=>{r.add({severity:"error",summary:"Erro",detail:`${o}`,life:3e3}),f.value=!1}).finally(()=>{f.value=!1})},A=le(()=>{$(z.value)},300);return K(S,A),X(()=>{$()}),(o,e)=>{const N=H,d=G,I=Q,M=O,R=W;return u(),_(ee,null,[p.value?(u(),_("div",ie,[a("div",re,[a("div",ne,[l(N,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[4]||(e[4]=a("p",null,"Por Favor Aguarde...",-1))])])])):(u(),_("div",ce,[a("div",de,[a("div",ue,[a("div",me,[l(d,{label:"Voltar",class:"mr-2 mb-2",onClick:B},{default:C(()=>e[5]||(e[5]=[a("i",{class:"pi pi-angle-left"},null,-1),se(" Voltar")])),_:1})]),e[8]||(e[8]=a("div",{class:"font-semibold text-xl"},"SubCategoria",-1)),e[9]||(e[9]=a("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),a("form",{onSubmit:e[2]||(e[2]=(...i)=>t(y)&&t(y)(...i))},[a("div",pe,[e[6]||(e[6]=a("label",{for:"name1"},"Nome",-1)),l(I,{modelValue:t(x),"onUpdate:modelValue":e[0]||(e[0]=i=>F(x)?x.value=i:null),id:"name",placeholder:"Nome da SubCategoria",class:q({"p-invalid":t(c).name}),type:"text"},null,8,["modelValue","class"]),a("small",fe,P(t(c).name),1)]),a("div",ge,[e[7]||(e[7]=a("label",{for:"name1"},"Categoria",-1)),l(M,{modelValue:t(b),"onUpdate:modelValue":e[1]||(e[1]=i=>F(b)?b.value=i:null),options:k.value,optionLabel:"name",optionValue:"id",placeholder:"Selecionar",class:q({"p-invalid":t(c).category_id})},null,8,["modelValue","options","class"]),a("small",ve,P(t(c).category_id),1)]),l(d,{label:"Submeter",class:"mr-2 mb-2",onClick:t(y),disabled:n.value},null,8,["onClick","disabled"]),n.value?(u(),Y(N,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):Z("",!0)],32)])])])),l(R,{header:"Confirmação",visible:v.value,"onUpdate:visible":e[3]||(e[3]=i=>v.value=i),style:{width:"350px"},modal:!0},{footer:C(()=>[l(d,{label:"Não",icon:"pi pi-times",onClick:D,class:"p-button-text"}),l(d,{label:"Sim",icon:"pi pi-check",onClick:L,class:"p-button-text",autofocus:""})]),default:C(()=>[e[10]||(e[10]=a("div",{class:"flex align-items-center justify-content-center"},[a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),a("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{ze as default};
