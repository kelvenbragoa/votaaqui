import{s as J}from"./index-C20BTk_p.js";import{s as K}from"./index-Dk1EIfqD.js";import{s as X}from"./index-Dejt_gIu.js";import{s as Y}from"./index-kyG4T3ah.js";import{x as Z,r as i,y as ee,c as E,b as l,d as o,w as T,z as s,A as u,s as m,t as p,B as le,m as se,F as ae,q as te,l as x,h as oe}from"./app-D6_Fxaix.js";import{u as ie}from"./vee-validate-dJW6YGtF.js";import{d as re}from"./moment-CQ1ixRO1.js";import{c as ne,a as c}from"./index.esm-CQT6nZnd.js";import"./index-BtSV8YwQ.js";import"./index-DkCkZuNI.js";import"./index-BXcmxBR2.js";const de={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},ue={class:"w-full"},me={class:"flex flex-col gap-4 text-center"},pe={key:1,class:"flex flex-col md:flex-row gap-12"},ce={class:"w-full"},fe={class:"card flex flex-col gap-4"},ve={class:"w-full"},be={class:"flex flex-col gap-2"},xe={id:"name-help",class:"p-error"},ye={class:"flex flex-col gap-2"},ge={id:"address-help",class:"p-error"},Ve={class:"flex flex-col gap-2"},he={id:"city-help",class:"p-error"},we={class:"flex flex-col gap-2"},Ce={id:"country-help",class:"p-error"},ke={class:"flex flex-col gap-2"},_e={id:"email-help",class:"p-error"},Se={class:"flex flex-col gap-2"},Ue={id:"mobile-help",class:"p-error"},qe={class:"flex flex-col gap-2"},Be={id:"nuit-help",class:"p-error"},De={class:"flex flex-col gap-2"},Ne={id:"website-help",class:"p-error"},Oe={__name:"CreateSuppliers",setup(Ee){const y=te(),f=Z();i(null);const g=i(!1),V=i(!1);let $=i(null);const F=i(""),h=i(null),j=i(1);i(15),i(0);const w=i(!1),A=i(null),v=i(!1),L=ne({name:c().required().trim().label("Name"),address:c().required().trim().label("address"),city:c().required().trim().label("city"),country:c().required().trim().label("country"),email:c().required().trim().label("email"),mobile:c().required().trim().label("mobile"),nuit:c().required().trim().label("nuit"),website:c().required().trim().label("website")}),{defineField:r,handleSubmit:R,resetForm:Te,errors:t,setErrors:M}=ie({validationSchema:L}),[C]=r("address"),[k]=r("name"),[_]=r("city"),[S]=r("country"),[U]=r("mobile"),[q]=r("email"),[B]=r("nuit"),[D]=r("website"),P=i();function z(){y&&y.back()}const I=()=>{w.value=!1},N=R(n=>{P.value!=null&&(n.image=P.value),v.value=!0,axios.post("/api/suppliers",n,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{y.back(),f.add({severity:"success",summary:"Successo",detail:"Categoria criado com sucesso",life:3e3})}).catch(e=>{v.value=!1,f.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&M(e.response.data.errors)}).finally(()=>{v.value=!1})}),O=async(n=1)=>{axios.get("/api/suppliers/create",{params:{query:F.value}}).then(e=>{h.value=e.data.departments,A.value=e.data.departments,g.value=!1}).catch(e=>{g.value=!1,f.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),z()})},Q=()=>{V.value=!0,axios.delete(`/api/suppliers/${$.value}`).then(()=>{h.value.data=h.value.data.filter(n=>n.id!==$.value),I(),f.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(n=>{f.add({severity:"error",summary:"Erro",detail:`${n}`,life:3e3}),V.value=!1}).finally(()=>{V.value=!1})},G=re(()=>{O(j.value)},300);return ee(F,G),(n,e)=>{const W=Y,b=X,d=K,H=J;return x(),E(ae,null,[g.value?(x(),E("div",de,[l("div",ue,[l("div",me,[o(W,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[10]||(e[10]=l("p",null,"Por Favor Aguarde...",-1))])])])):(x(),E("div",pe,[l("div",ce,[l("div",fe,[l("div",ve,[o(b,{label:"Voltar",class:"mr-2 mb-2",onClick:z},{default:T(()=>e[11]||(e[11]=[l("i",{class:"pi pi-angle-left"},null,-1),oe(" Voltar")])),_:1})]),e[20]||(e[20]=l("div",{class:"font-semibold text-xl"},"Categoria",-1)),e[21]||(e[21]=l("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),l("form",{onSubmit:e[8]||(e[8]=(...a)=>s(N)&&s(N)(...a))},[l("div",be,[e[12]||(e[12]=l("label",{for:"name1"},"Nome",-1)),o(d,{modelValue:s(k),"onUpdate:modelValue":e[0]||(e[0]=a=>u(k)?k.value=a:null),id:"name",placeholder:"Nome",class:m({"p-invalid":s(t).name}),type:"text"},null,8,["modelValue","class"]),l("small",xe,p(s(t).name),1)]),l("div",ye,[e[13]||(e[13]=l("label",{for:"address"},"Endereço",-1)),o(d,{modelValue:s(C),"onUpdate:modelValue":e[1]||(e[1]=a=>u(C)?C.value=a:null),id:"address",placeholder:"Endereço",class:m({"p-invalid":s(t).address}),type:"text"},null,8,["modelValue","class"]),l("small",ge,p(s(t).address),1)]),l("div",Ve,[e[14]||(e[14]=l("label",{for:"city"},"Cidade",-1)),o(d,{modelValue:s(_),"onUpdate:modelValue":e[2]||(e[2]=a=>u(_)?_.value=a:null),id:"city",placeholder:"Cidade",class:m({"p-invalid":s(t).city}),type:"text"},null,8,["modelValue","class"]),l("small",he,p(s(t).city),1)]),l("div",we,[e[15]||(e[15]=l("label",{for:"country"},"País",-1)),o(d,{modelValue:s(S),"onUpdate:modelValue":e[3]||(e[3]=a=>u(S)?S.value=a:null),id:"country",placeholder:"Endereço",class:m({"p-invalid":s(t).country}),type:"text"},null,8,["modelValue","class"]),l("small",Ce,p(s(t).country),1)]),l("div",ke,[e[16]||(e[16]=l("label",{for:"email"},"Email",-1)),o(d,{modelValue:s(q),"onUpdate:modelValue":e[4]||(e[4]=a=>u(q)?q.value=a:null),id:"email",placeholder:"Email",class:m({"p-invalid":s(t).email}),type:"text"},null,8,["modelValue","class"]),l("small",_e,p(s(t).email),1)]),l("div",Se,[e[17]||(e[17]=l("label",{for:"mobile"},"Telefone",-1)),o(d,{modelValue:s(U),"onUpdate:modelValue":e[5]||(e[5]=a=>u(U)?U.value=a:null),id:"mobile",placeholder:"Telefone",class:m({"p-invalid":s(t).mobile}),type:"text"},null,8,["modelValue","class"]),l("small",Ue,p(s(t).mobile),1)]),l("div",qe,[e[18]||(e[18]=l("label",{for:"nuit"},"NUIT",-1)),o(d,{modelValue:s(B),"onUpdate:modelValue":e[6]||(e[6]=a=>u(B)?B.value=a:null),id:"nuit",placeholder:"NUIT",class:m({"p-invalid":s(t).nuit}),type:"text"},null,8,["modelValue","class"]),l("small",Be,p(s(t).nuit),1)]),l("div",De,[e[19]||(e[19]=l("label",{for:"website"},"Website",-1)),o(d,{modelValue:s(D),"onUpdate:modelValue":e[7]||(e[7]=a=>u(D)?D.value=a:null),id:"website",placeholder:"Website",class:m({"p-invalid":s(t).website}),type:"text"},null,8,["modelValue","class"]),l("small",Ne,p(s(t).website),1)]),o(b,{label:"Submeter",class:"mr-2 mb-2",onClick:s(N),disabled:v.value},null,8,["onClick","disabled"]),v.value?(x(),le(W,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):se("",!0)],32)])])])),o(H,{header:"Confirmação",visible:w.value,"onUpdate:visible":e[9]||(e[9]=a=>w.value=a),style:{width:"350px"},modal:!0},{footer:T(()=>[o(b,{label:"Não",icon:"pi pi-times",onClick:I,class:"p-button-text"}),o(b,{label:"Sim",icon:"pi pi-check",onClick:Q,class:"p-button-text",autofocus:""})]),default:T(()=>[e[22]||(e[22]=l("div",{class:"flex align-items-center justify-content-center"},[l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),l("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{Oe as default};
