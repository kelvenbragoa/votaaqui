import{s as Q}from"./index-D4q2omWw.js";import{s as G}from"./index-CB4w3mkd.js";import{s as H}from"./index-QcDmmBo-.js";import{s as J}from"./index-CnKwZFsY.js";import{s as K}from"./index-BrYXoc-D.js";import{x as X,r as l,y as Y,o as Z,c as D,b as s,d as t,w as $,z as a,A as c,s as p,t as f,B as ee,m as se,F as ae,q as le,l as v,h as oe}from"./app-DS2baS_n.js";import{u as te}from"./vee-validate-CHeK3SD0.js";import"./moment-C5S46NFB.js";import{c as re,a as g}from"./index.esm-CQT6nZnd.js";import{d as ie}from"./debounce-BMmXVQ06.js";import"./index-C6Z0hblE.js";import"./index-DUNuG4hG.js";import"./index-Db20dqtZ.js";import"./index-B9mXU8BC.js";import"./index-C4xTnPqq.js";import"./index-BdUc-6tC.js";const ne={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},de={class:"w-full"},me={class:"flex flex-col gap-4 text-center"},ue={key:1,class:"flex flex-col md:flex-row gap-12"},ce={class:"w-full"},pe={class:"card flex flex-col gap-4"},fe={class:"w-full"},ve={class:"flex flex-col gap-2"},ge={id:"name-help",class:"p-error"},xe={class:"flex flex-col gap-2"},be={id:"email-help",class:"p-error"},ye={class:"flex flex-col gap-2"},_e={id:"password-help",class:"p-error"},we={class:"flex flex-col gap-2"},he={id:"role_id-help",class:"p-error"},Ie={__name:"CreateUsers",setup(Ve){const x=le(),n=X();l(null);const b=l(!0),y=l(!1);let P=l(null);const N=l(""),_=l(null),j=l(1);l(15),l(0);const w=l(!1),q=l(null),d=l(!1),L=re({role_id:g().required().trim().label("Categoria"),name:g().required().trim().label("Name"),email:g().required().trim().label("Email"),password:g().required().trim().label("Password")}),{defineField:m,handleSubmit:A,resetForm:ke,errors:r,setErrors:I}=te({validationSchema:L}),[h]=m("role_id"),[V]=m("name"),[k]=m("email"),[C]=m("password"),E=l();function U(){x&&x.back()}const F=()=>{w.value=!1},S=A(i=>{E.value!=null&&(i.image=E.value),d.value=!0,axios.post("/api/users",i,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{x.back(),n.add({severity:"success",summary:"Successo",detail:"SubCategoria criado com sucesso",life:3e3})}).catch(e=>{d.value=!1,n.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&I(e.response.data.errors)}).finally(()=>{d.value=!1})}),T=async(i=1)=>{axios.get("/api/users/create",{params:{query:N.value}}).then(e=>{_.value=e.data.roles,q.value=e.data.roles,b.value=!1}).catch(e=>{b.value=!1,n.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),U()})},M=()=>{y.value=!0,axios.delete(`/api/users/${P.value}`).then(()=>{_.value.data=_.value.data.filter(i=>i.id!==P.value),F(),n.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(i=>{n.add({severity:"error",summary:"Erro",detail:`${i}`,life:3e3}),y.value=!1}).finally(()=>{y.value=!1})},R=ie(()=>{T(j.value)},300);return Y(N,R),Z(()=>{T()}),(i,e)=>{const z=K,u=J,B=H,W=G,O=Q;return v(),D(ae,null,[b.value?(v(),D("div",ne,[s("div",de,[s("div",me,[t(z,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[6]||(e[6]=s("p",null,"Por Favor Aguarde...",-1))])])])):(v(),D("div",ue,[s("div",ce,[s("div",pe,[s("div",fe,[t(u,{label:"Voltar",class:"mr-2 mb-2",onClick:U},{default:$(()=>e[7]||(e[7]=[s("i",{class:"pi pi-angle-left"},null,-1),oe(" Voltar")])),_:1})]),e[12]||(e[12]=s("div",{class:"font-semibold text-xl"},"SubCategoria",-1)),e[13]||(e[13]=s("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),s("form",{onSubmit:e[4]||(e[4]=(...o)=>a(S)&&a(S)(...o))},[s("div",ve,[e[8]||(e[8]=s("label",{for:"name1"},"Nome",-1)),t(B,{modelValue:a(V),"onUpdate:modelValue":e[0]||(e[0]=o=>c(V)?V.value=o:null),id:"name",placeholder:"Nome",class:p({"p-invalid":a(r).name}),type:"text"},null,8,["modelValue","class"]),s("small",ge,f(a(r).name),1)]),s("div",xe,[e[9]||(e[9]=s("label",{for:"email"},"Email",-1)),t(B,{modelValue:a(k),"onUpdate:modelValue":e[1]||(e[1]=o=>c(k)?k.value=o:null),id:"email",placeholder:"Email",class:p({"p-invalid":a(r).email}),type:"email"},null,8,["modelValue","class"]),s("small",be,f(a(r).email),1)]),s("div",ye,[e[10]||(e[10]=s("label",{for:"password"},"Password",-1)),t(B,{modelValue:a(C),"onUpdate:modelValue":e[2]||(e[2]=o=>c(C)?C.value=o:null),id:"password",placeholder:"Password",class:p({"p-invalid":a(r).password}),type:"password"},null,8,["modelValue","class"]),s("small",_e,f(a(r).name),1)]),s("div",we,[e[11]||(e[11]=s("label",{for:"name1"},"Previlégio",-1)),t(W,{modelValue:a(h),"onUpdate:modelValue":e[3]||(e[3]=o=>c(h)?h.value=o:null),options:q.value,optionLabel:"name",optionValue:"id",placeholder:"Selecionar",class:p({"p-invalid":a(r).role_id})},null,8,["modelValue","options","class"]),s("small",he,f(a(r).role_id),1)]),t(u,{label:"Submeter",class:"mr-2 mb-2",onClick:a(S),disabled:d.value},null,8,["onClick","disabled"]),d.value?(v(),ee(z,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):se("",!0)],32)])])])),t(O,{header:"Confirmação",visible:w.value,"onUpdate:visible":e[5]||(e[5]=o=>w.value=o),style:{width:"350px"},modal:!0},{footer:$(()=>[t(u,{label:"Não",icon:"pi pi-times",onClick:F,class:"p-button-text"}),t(u,{label:"Sim",icon:"pi pi-check",onClick:M,class:"p-button-text",autofocus:""})]),default:$(()=>[e[14]||(e[14]=s("div",{class:"flex align-items-center justify-content-center"},[s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),s("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{Ie as default};
