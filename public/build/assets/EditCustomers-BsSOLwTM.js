import{s as O}from"./index-DVuZGizS.js";import{s as Q}from"./index-Ke6tIPse.js";import{s as G}from"./index-DYKeWisR.js";import{s as H}from"./index-Cx7ccGKc.js";import{s as J,r as a,x as K,o as X,c as D,b as l,d as t,w as $,y as s,z as y,A as h,t as _,B as Y,m as Z,F as ee,q as le,l as k,h as se}from"./app-nGuvejiM.js";import{u as ae}from"./vee-validate-DJNPswvv.js";import{d as oe}from"./moment-CQ1ixRO1.js";import{c as te,a as V}from"./index.esm-DpER4CkV.js";import"./index-BfWSqF5J.js";import"./index-B8La0_l2.js";import"./index-DhamIECe.js";import"./_commonjsHelpers-Cpj98o6Y.js";const ie={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},re={class:"w-full"},ne={class:"flex flex-col gap-4 text-center"},de={key:1,class:"flex flex-col md:flex-row gap-12"},me={class:"w-full"},ue={class:"card flex flex-col gap-4"},ce={class:"w-full"},pe={class:"flex flex-col gap-2"},fe={id:"name-help",class:"p-error"},ve={class:"flex flex-col gap-2"},be={id:"mobile-help",class:"p-error"},xe={class:"flex flex-col gap-2"},ge={id:"email-help",class:"p-error"},ye={class:"flex flex-col gap-2"},he={id:"address-help",class:"p-error"},Ue={__name:"EditCustomers",setup(_e){const d=le(),m=J();a(null);const C=a(!0),S=a(!1);let E=a(null);const N=a(""),n=a(null),z=a(1);a(15),a(0);const w=a(!1);a(null);const u=a(!1),R=te({email:V().required().trim().label("Email"),name:V().required().trim().label("Name"),mobile:V().required().trim().label("mobile"),address:V().required().trim().label("address")}),{defineField:c,handleSubmit:j,resetForm:ke,errors:i,setErrors:A}=ae({validationSchema:R}),[p]=c("email"),[f]=c("name"),[v]=c("mobile"),[b]=c("address"),[I]=c("_method"),q=a();function T(){d&&d.back()}const F=()=>{w.value=!1},B=j(r=>{q.value!=null&&(r.image=q.value),u.value=!0,axios.post(`/api/customers/${d.currentRoute.value.params.id}`,r,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{d.back(),m.add({severity:"success",summary:"Successo",detail:"Categoria criado com sucesso",life:3e3})}).catch(e=>{u.value=!1,m.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&A(e.response.data.errors)}).finally(()=>{u.value=!1})}),U=async(r=1)=>{axios.get(`/api/customers/${d.currentRoute.value.params.id}/edit`,{params:{query:N.value}}).then(e=>{n.value=e.data.customer,f.value=n.value.name,v.value=n.value.mobile,p.value=n.value.email,b.value=n.value.address,I.value="put",C.value=!1}).catch(e=>{C.value=!1,m.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),T()})},L=()=>{S.value=!0,axios.delete(`/api/customers/${E.value}`).then(()=>{n.value.data=n.value.data.filter(r=>r.id!==E.value),F(),m.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(r=>{m.add({severity:"error",summary:"Erro",detail:`${r}`,life:3e3}),S.value=!1}).finally(()=>{S.value=!1})},M=oe(()=>{U(z.value)},300);return K(N,M),X(()=>{U()}),(r,e)=>{const P=H,x=G,g=Q,W=O;return k(),D(ee,null,[C.value?(k(),D("div",ie,[l("div",re,[l("div",ne,[t(P,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[6]||(e[6]=l("p",null,"Por Favor Aguarde...",-1))])])])):(k(),D("div",de,[l("div",me,[l("div",ue,[l("div",ce,[t(x,{label:"Voltar",class:"mr-2 mb-2",onClick:T},{default:$(()=>e[7]||(e[7]=[l("i",{class:"pi pi-angle-left"},null,-1),se(" Voltar")])),_:1})]),e[12]||(e[12]=l("div",{class:"font-semibold text-xl"},"Cliente",-1)),e[13]||(e[13]=l("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),l("form",{onSubmit:e[4]||(e[4]=(...o)=>s(B)&&s(B)(...o))},[l("div",pe,[e[8]||(e[8]=l("label",{for:"name"},"Nome",-1)),t(g,{modelValue:s(f),"onUpdate:modelValue":e[0]||(e[0]=o=>y(f)?f.value=o:null),id:"name",placeholder:"Nome",class:h({"p-invalid":s(i).name}),type:"text"},null,8,["modelValue","class"]),l("small",fe,_(s(i).name),1)]),l("div",ve,[e[9]||(e[9]=l("label",{for:"mobile"},"Telefone",-1)),t(g,{modelValue:s(v),"onUpdate:modelValue":e[1]||(e[1]=o=>y(v)?v.value=o:null),id:"mobile",placeholder:"Telefone",class:h({"p-invalid":s(i).mobile}),type:"text"},null,8,["modelValue","class"]),l("small",be,_(s(i).mobile),1)]),l("div",xe,[e[10]||(e[10]=l("label",{for:"email"},"Email",-1)),t(g,{modelValue:s(p),"onUpdate:modelValue":e[2]||(e[2]=o=>y(p)?p.value=o:null),id:"email",placeholder:"Email",class:h({"p-invalid":s(i).email}),type:"email"},null,8,["modelValue","class"]),l("small",ge,_(s(i).email),1)]),l("div",ye,[e[11]||(e[11]=l("label",{for:"address"},"Endereço",-1)),t(g,{modelValue:s(b),"onUpdate:modelValue":e[3]||(e[3]=o=>y(b)?b.value=o:null),id:"address",placeholder:"Endereço",class:h({"p-invalid":s(i).address}),type:"text"},null,8,["modelValue","class"]),l("small",he,_(s(i).address),1)]),t(x,{label:"Submeter",class:"mr-2 mb-2",onClick:s(B),disabled:u.value},null,8,["onClick","disabled"]),u.value?(k(),Y(P,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):Z("",!0)],32)])])])),t(W,{header:"Confirmação",visible:w.value,"onUpdate:visible":e[5]||(e[5]=o=>w.value=o),style:{width:"350px"},modal:!0},{footer:$(()=>[t(x,{label:"Não",icon:"pi pi-times",onClick:F,class:"p-button-text"}),t(x,{label:"Sim",icon:"pi pi-check",onClick:L,class:"p-button-text",autofocus:""})]),default:$(()=>[e[14]||(e[14]=l("div",{class:"flex align-items-center justify-content-center"},[l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),l("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{Ue as default};
