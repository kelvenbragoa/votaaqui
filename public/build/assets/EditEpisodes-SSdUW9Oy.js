import{s as B}from"./index-GLopVJHN.js";import{s as q}from"./index-CyretVdz.js";import{s as I}from"./index-C5307mA7.js";import{s as z}from"./index-MAY3iOVb.js";import{s as L}from"./index-CQUyaqz_.js";import{s as M}from"./index-DZH9jj3E.js";import{s as O}from"./index-COncegFj.js";import{s as R}from"./index-CPKo_qpC.js";import{s as J}from"./index-CwTYHPBj.js";import{_ as G,x as H,r as f,y as K,o as Q,c as i,b as s,d as n,e as W,h as p,s as m,t as c,m as r,j as x,l as d,q as X,u as Y}from"./app-BK5PDX-r.js";import"./index-D9eAeQJc.js";import"./index-QyN7qbex.js";import"./index-CMWl7dqn.js";import"./index-Cxymk2_f.js";import"./index-Cro9yEBy.js";import"./index-CFwcNhfm.js";import"./index-BMXDJhuM.js";import"./index-BcTlFX1t.js";import"./index-D5BYV45H.js";import"./index-Dnn4EMN7.js";import"./index-C9nbY_HC.js";import"./index-IjIiq9gX.js";import"./index-DWMB6ar4.js";const Z={class:"grid"},ee={class:"col-12"},se={class:"card"},le={class:"flex justify-content-between align-items-center mb-4"},te={key:0,class:"text-center p-4"},oe={class:"grid"},ae={class:"col-12 md:col-6"},ie={class:"field"},de={key:0,class:"p-error"},ne={class:"col-12 md:col-6"},re={class:"field"},ue={key:0,class:"p-error"},pe={key:1,class:"text-muted"},me={class:"col-12"},ce={class:"field"},ve={key:0,class:"p-error"},_e={class:"col-12"},be={class:"field"},fe={key:0,class:"p-error"},ge={class:"col-12 md:col-6"},ye={class:"field"},Ve={key:0,class:"p-error"},we={class:"col-12 md:col-6"},xe={class:"field"},he={key:0,class:"p-error"},ke={class:"col-12"},Ee={class:"field-checkbox mb-3"},je={key:0,class:"col-12"},$e={class:"grid"},Ue={class:"col-12 md:col-6"},Se={class:"field"},Pe={key:0,class:"p-error"},Te={key:1,class:"text-muted"},De={class:"col-12 md:col-6"},Fe={class:"field"},Ne={key:0,class:"p-error"},Ce={class:"col-12 md:col-6"},Ae={class:"field"},Be={key:0,class:"p-error"},qe={class:"col-12 md:col-6"},Ie={class:"field"},ze={key:0,class:"p-error"},Le={key:1,class:"text-muted"},Me={class:"col-12"},Oe={class:"field"},Re={class:"col-12"},Je={class:"field"},Ge={key:0,class:"p-error"},He={class:"col-12"},Ke={class:"flex gap-2 justify-content-end"},Qe={__name:"EditEpisodes",setup(We){const h=X(),k=Y(),g=H(),y=f(!1),E=f(!0),j=f([]),l=f({}),a=f(null),t=f({episode_number:null,title:"",description:"",episode_type:"elimination",air_date:null,status:"scheduled",voting_open:!1,voting_start:null,voting_end:null,jury_weight:50,public_weight:50,participant_ids:[],notes:""}),S=[{label:"Eliminação",value:"elimination"},{label:"Final",value:"finale"},{label:"Especial",value:"special"},{label:"Audição",value:"audition"}],P=[{label:"Agendado",value:"scheduled"},{label:"Ao Vivo",value:"live"},{label:"Finalizado",value:"finished"}],v=K(()=>a.value&&(a.value.public_votes_count>0||a.value.judge_votes_count>0)),T=async()=>{var u;try{const e=await x.get(`/api/web/episodes/${k.params.id}`);e.data.success&&(a.value=e.data.data,t.value={episode_number:a.value.episode_number,title:a.value.title,description:a.value.description||"",episode_type:a.value.episode_type,air_date:new Date(a.value.air_date),status:a.value.status,voting_open:a.value.voting_open,voting_start:a.value.voting_start?new Date(a.value.voting_start):null,voting_end:a.value.voting_end?new Date(a.value.voting_end):null,jury_weight:a.value.jury_weight,public_weight:a.value.public_weight,participant_ids:((u=a.value.participants)==null?void 0:u.map(_=>_.id))||[],notes:a.value.notes||""})}catch{g.add({severity:"error",summary:"Erro",detail:"Erro ao carregar episódio",life:3e3}),h.push("/admin/episodes")}finally{E.value=!1}},D=async()=>{try{const u=await x.get("/api/web/episodes/participants/available");u.data.success&&(j.value=u.data.data)}catch(u){console.error("Erro ao carregar participantes:",u)}},F=async()=>{var u,e,_;y.value=!0,l.value={};try{const b=await x.put(`/api/web/episodes/${k.params.id}`,t.value);b.data.success&&(g.add({severity:"success",summary:"Sucesso",detail:b.data.message,life:3e3}),h.push("/admin/episodes"))}catch(b){((u=b.response)==null?void 0:u.status)===422&&(l.value=b.response.data.errors||{}),g.add({severity:"error",summary:"Erro",detail:((_=(e=b.response)==null?void 0:e.data)==null?void 0:_.message)||"Erro ao atualizar episódio",life:3e3})}finally{y.value=!1}};return Q(async()=>{await Promise.all([T(),D()])}),(u,e)=>{const _=J,b=R,V=O,$=M,N=L,U=z,w=I,C=q,A=B;return d(),i("div",Z,[s("div",ee,[s("div",se,[s("div",le,[e[15]||(e[15]=s("h5",{class:"m-0"},"Editar Episódio",-1)),n(_,{label:"Voltar",icon:"pi pi-arrow-left",class:"p-button-outlined",onClick:e[0]||(e[0]=o=>u.$router.push("/admin/episodes"))})]),E.value?(d(),i("div",te,[n(b),e[16]||(e[16]=s("p",null,"Carregando dados do episódio...",-1))])):(d(),i("form",{key:1,onSubmit:W(F,["prevent"])},[s("div",oe,[e[34]||(e[34]=s("div",{class:"col-12"},[s("h6",{class:"text-primary mb-3"},"Informações Básicas")],-1)),s("div",ae,[s("div",ie,[e[17]||(e[17]=s("label",{for:"episode_number",class:"block text-900 font-medium mb-2"},[p(" Número do Episódio "),s("span",{class:"text-red-500"},"*")],-1)),n(V,{id:"episode_number",modelValue:t.value.episode_number,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.episode_number=o),min:1,max:999,showButtons:"",class:m([{"p-invalid":l.value.episode_number},"w-full"])},null,8,["modelValue","class"]),l.value.episode_number?(d(),i("small",de,c(l.value.episode_number),1)):r("",!0)])]),s("div",ne,[s("div",re,[e[19]||(e[19]=s("label",{for:"episode_type",class:"block text-900 font-medium mb-2"},[p(" Tipo de Episódio "),s("span",{class:"text-red-500"},"*")],-1)),n($,{id:"episode_type",modelValue:t.value.episode_type,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.episode_type=o),options:S,optionLabel:"label",optionValue:"value",placeholder:"Selecione o tipo",class:m([{"p-invalid":l.value.episode_type},"w-full"]),disabled:v.value},null,8,["modelValue","class","disabled"]),l.value.episode_type?(d(),i("small",ue,c(l.value.episode_type),1)):r("",!0),v.value?(d(),i("small",pe,e[18]||(e[18]=[s("i",{class:"pi pi-info-circle"},null,-1),p(" Não é possível alterar o tipo de episódio que já possui votos ")]))):r("",!0)])]),s("div",me,[s("div",ce,[e[20]||(e[20]=s("label",{for:"title",class:"block text-900 font-medium mb-2"},[p(" Título "),s("span",{class:"text-red-500"},"*")],-1)),n(N,{id:"title",modelValue:t.value.title,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.title=o),class:m([{"p-invalid":l.value.title},"w-full"]),placeholder:"Ex: Primeira Eliminação"},null,8,["modelValue","class"]),l.value.title?(d(),i("small",ve,c(l.value.title),1)):r("",!0)])]),s("div",_e,[s("div",be,[e[21]||(e[21]=s("label",{for:"description",class:"block text-900 font-medium mb-2"},"Descrição",-1)),n(U,{id:"description",modelValue:t.value.description,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.description=o),rows:"4",class:m([{"p-invalid":l.value.description},"w-full"]),placeholder:"Descrição do episódio..."},null,8,["modelValue","class"]),l.value.description?(d(),i("small",fe,c(l.value.description),1)):r("",!0)])]),e[35]||(e[35]=s("div",{class:"col-12"},[s("h6",{class:"text-primary mb-3"},"Datas e Status")],-1)),s("div",ge,[s("div",ye,[e[22]||(e[22]=s("label",{for:"air_date",class:"block text-900 font-medium mb-2"},[p(" Data de Transmissão "),s("span",{class:"text-red-500"},"*")],-1)),n(w,{id:"air_date",modelValue:t.value.air_date,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.air_date=o),showTime:"",hourFormat:"24",class:m([{"p-invalid":l.value.air_date},"w-full"]),placeholder:"dd/mm/aaaa hh:mm",dateFormat:"dd/mm/yy"},null,8,["modelValue","class"]),l.value.air_date?(d(),i("small",Ve,c(l.value.air_date),1)):r("",!0)])]),s("div",we,[s("div",xe,[e[23]||(e[23]=s("label",{for:"status",class:"block text-900 font-medium mb-2"},[p(" Status "),s("span",{class:"text-red-500"},"*")],-1)),n($,{id:"status",modelValue:t.value.status,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.status=o),options:P,optionLabel:"label",optionValue:"value",placeholder:"Selecione o status",class:m([{"p-invalid":l.value.status},"w-full"])},null,8,["modelValue","class"]),l.value.status?(d(),i("small",he,c(l.value.status),1)):r("",!0)])]),e[36]||(e[36]=s("div",{class:"col-12"},[s("h6",{class:"text-primary mb-3"},"Configurações de Votação")],-1)),s("div",ke,[s("div",Ee,[n(C,{id:"voting_open",modelValue:t.value.voting_open,"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.voting_open=o),binary:!0},null,8,["modelValue"]),e[24]||(e[24]=s("label",{for:"voting_open",class:"ml-2"},"Votação Aberta",-1))])]),t.value.voting_open?(d(),i("div",je,[s("div",$e,[s("div",Ue,[s("div",Se,[e[26]||(e[26]=s("label",{for:"voting_start",class:"block text-900 font-medium mb-2"},[p(" Início da Votação "),s("span",{class:"text-red-500"},"*")],-1)),n(w,{id:"voting_start",modelValue:t.value.voting_start,"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.voting_start=o),showTime:"",hourFormat:"24",class:m([{"p-invalid":l.value.voting_start},"w-full"]),placeholder:"dd/mm/aaaa hh:mm",dateFormat:"dd/mm/yy",disabled:v.value},null,8,["modelValue","class","disabled"]),l.value.voting_start?(d(),i("small",Pe,c(l.value.voting_start),1)):r("",!0),v.value?(d(),i("small",Te,e[25]||(e[25]=[s("i",{class:"pi pi-info-circle"},null,-1),p(" Não é possível alterar datas de votação que já possui votos ")]))):r("",!0)])]),s("div",De,[s("div",Fe,[e[27]||(e[27]=s("label",{for:"voting_end",class:"block text-900 font-medium mb-2"},[p(" Fim da Votação "),s("span",{class:"text-red-500"},"*")],-1)),n(w,{id:"voting_end",modelValue:t.value.voting_end,"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.voting_end=o),showTime:"",hourFormat:"24",class:m([{"p-invalid":l.value.voting_end},"w-full"]),placeholder:"dd/mm/aaaa hh:mm",dateFormat:"dd/mm/yy",disabled:v.value},null,8,["modelValue","class","disabled"]),l.value.voting_end?(d(),i("small",Ne,c(l.value.voting_end),1)):r("",!0)])])])])):r("",!0),s("div",Ce,[s("div",Ae,[e[28]||(e[28]=s("label",{for:"jury_weight",class:"block text-900 font-medium mb-2"},[p(" Peso do Júri (%) "),s("span",{class:"text-red-500"},"*")],-1)),n(V,{id:"jury_weight",modelValue:t.value.jury_weight,"onUpdate:modelValue":e[10]||(e[10]=o=>t.value.jury_weight=o),min:0,max:100,suffix:"%",class:m([{"p-invalid":l.value.jury_weight},"w-full"]),disabled:v.value},null,8,["modelValue","class","disabled"]),l.value.jury_weight?(d(),i("small",Be,c(l.value.jury_weight),1)):r("",!0)])]),s("div",qe,[s("div",Ie,[e[30]||(e[30]=s("label",{for:"public_weight",class:"block text-900 font-medium mb-2"},[p(" Peso Público (%) "),s("span",{class:"text-red-500"},"*")],-1)),n(V,{id:"public_weight",modelValue:t.value.public_weight,"onUpdate:modelValue":e[11]||(e[11]=o=>t.value.public_weight=o),min:0,max:100,suffix:"%",class:m([{"p-invalid":l.value.public_weight},"w-full"]),disabled:v.value},null,8,["modelValue","class","disabled"]),l.value.public_weight?(d(),i("small",ze,c(l.value.public_weight),1)):r("",!0),v.value?(d(),i("small",Le,e[29]||(e[29]=[s("i",{class:"pi pi-info-circle"},null,-1),p(" Não é possível alterar pesos de votação que já possui votos ")]))):r("",!0)])]),e[37]||(e[37]=s("div",{class:"col-12"},[s("h6",{class:"text-primary mb-3"},"Participantes")],-1)),s("div",Me,[s("div",Oe,[e[31]||(e[31]=s("label",{class:"block text-900 font-medium mb-2"},"Selecionar Participantes",-1)),n(A,{modelValue:t.value.participant_ids,"onUpdate:modelValue":e[12]||(e[12]=o=>t.value.participant_ids=o),options:j.value,optionLabel:"name",optionValue:"id",placeholder:"Selecione os participantes",filter:!0,class:"w-full",display:"chip"},null,8,["modelValue","options"]),e[32]||(e[32]=s("small",{class:"text-muted"}," Participantes que irão participar deste episódio ",-1))])]),s("div",Re,[s("div",Je,[e[33]||(e[33]=s("label",{for:"notes",class:"block text-900 font-medium mb-2"},"Notas",-1)),n(U,{id:"notes",modelValue:t.value.notes,"onUpdate:modelValue":e[13]||(e[13]=o=>t.value.notes=o),rows:"3",class:m([{"p-invalid":l.value.notes},"w-full"]),placeholder:"Observações adicionais..."},null,8,["modelValue","class"]),l.value.notes?(d(),i("small",Ge,c(l.value.notes),1)):r("",!0)])]),s("div",He,[s("div",Ke,[n(_,{label:"Cancelar",icon:"pi pi-times",class:"p-button-outlined",onClick:e[14]||(e[14]=o=>u.$router.push("/admin/episodes")),type:"button"}),n(_,{label:"Salvar Alterações",icon:"pi pi-check",type:"submit",loading:y.value},null,8,["loading"])])])])],32))])])])}}},Vs=G(Qe,[["__scopeId","data-v-9c87bdf8"]]);export{Vs as default};
