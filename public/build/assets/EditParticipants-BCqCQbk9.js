import{T as j}from"./index-pyA-5neZ.js";import{s as z}from"./index-CYnbFpku.js";import{s as A}from"./index-Av_1auWd.js";import{s as O}from"./index-BjzFxfG7.js";import{s as R}from"./index-X2KG-qqn.js";import{s as G}from"./index-BALpCQHV.js";import{s as L}from"./index-BKCI_Hxu.js";import{s as W}from"./index-D3dibykF.js";import{s as J}from"./index-J2AfLYEW.js";import{_ as Z,x as q,r as g,aT as H,o as K,c as i,b as o,d as s,e as Q,m as u,s as m,t as p,i as X,l as n,q as Y,u as ee}from"./app-DIymDWP7.js";import"./index-BmOqLsRc.js";import"./index-_VrzUoxO.js";import"./index-CxgXACXu.js";import"./index-Dg9DzAxn.js";import"./index-cnl34PeR.js";import"./index-DAjVCkKq.js";import"./index-JAn7prKR.js";import"./index-I1XBC8jC.js";import"./index-WBaCH7zm.js";import"./index-5NlH-buo.js";import"./index-NLyvc_C9.js";const oe={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},le={class:"w-full"},ae={class:"flex flex-col gap-4 text-center"},te={key:1,class:"flex flex-col md:flex-row gap-12"},se={class:"w-full"},ie={class:"card flex flex-col gap-4"},ne={class:"flex items-center justify-between mb-4"},re={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},de={class:"col-span-full"},ue={class:"flex flex-col lg:flex-row gap-4 items-start"},me={key:0,class:"relative"},pe=["src"],ce={class:"flex-1"},ve={key:0,class:"p-error"},fe={key:0,class:"p-error"},ge={class:"flex gap-2"},be={key:0,class:"p-error"},ke={key:1,class:"text-gray-500"},xe={key:0,class:"p-error"},ye={key:0,class:"p-error"},Ve={key:0,class:"p-error"},_e={key:0,class:"p-error"},he={key:0,class:"p-error"},we={class:"flex items-center"},Ce={class:"col-span-full"},Pe={key:0,class:"p-error"},Se={key:0,class:"p-error"},Ue={key:0,class:"p-error"},Fe={key:0,class:"p-error"},Me={class:"flex justify-end gap-3 mt-8"},Ee={__name:"EditParticipants",setup(Ne){const x=Y(),_=ee(),b=q(),y=g(!1),h=g(!0),w=g(null),f=g(null),a=H({name:"",stage_name:"",voting_code:"",age:null,gender:"",city:"",province:"",biography:"",occupation:"",instagram:"",facebook:"",tiktok:"",photo:null,active:!0}),V=g(null),l=g({}),S=[{label:"Masculino",value:"M"},{label:"Feminino",value:"F"},{label:"Outro",value:"Other"}],U=["Cabo Delgado","Gaza","Inhambane","Manica","Maputo Cidade","Maputo Província","Nampula","Niassa","Sofala","Tete","Zambézia"],F=async()=>{try{const e=(await axios.get(`/api/web/participants/${_.params.id}`)).data.data;V.value={...e},Object.keys(a).forEach(d=>{d!=="photo"&&e[d]!==void 0&&(a[d]=e[d])}),e.photo_url&&(f.value=e.photo_url),h.value=!1}catch{b.add({severity:"error",summary:"Erro",detail:"Erro ao carregar participante",life:3e3}),x.push("/admin/participants")}},M=r=>{const e=r.files[0];if(e){a.photo=e,w.value=e;const d=new FileReader;d.onload=c=>{f.value=c.target.result},d.readAsDataURL(e)}},E=()=>{var r;a.photo=null,w.value=null,(r=V.value)!=null&&r.photo_url?f.value=V.value.photo_url:f.value=null},N=()=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let d=0;d<4;d++)e+=r.charAt(Math.floor(Math.random()*r.length));a.voting_code=e},T=()=>{y.value=!0,l.value={};const r=new FormData;r.append("_method","PUT"),Object.keys(a).forEach(e=>{a[e]!==null&&a[e]!==""&&e!=="photo"&&r.append(e,a[e])}),a.photo&&r.append("photo",a.photo),axios.post(`/api/web/participants/${_.params.id}`,r,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{b.add({severity:"success",summary:"Sucesso",detail:"Participante atualizado com sucesso",life:3e3}),x.push("/admin/participants")}).catch(e=>{var d,c,k;((d=e.response)==null?void 0:d.status)===422?(l.value=e.response.data.errors,b.add({severity:"error",summary:"Erro de Validação",detail:"Por favor, corrija os campos destacados",life:5e3})):b.add({severity:"error",summary:"Erro",detail:((k=(c=e.response)==null?void 0:c.data)==null?void 0:k.message)||"Erro ao atualizar participante",life:5e3})}).finally(()=>{y.value=!1})},C=()=>{x.push("/admin/participants")};return K(()=>{F()}),(r,e)=>{const d=J,c=W,k=L,v=G,D=R,P=O,B=A,I=z,$=j;return h.value?(n(),i("div",oe,[o("div",le,[o("div",ae,[s(d,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[13]||(e[13]=o("p",null,"Carregando participante...",-1))])])])):(n(),i("div",te,[o("div",se,[o("div",ie,[o("div",ne,[e[14]||(e[14]=o("div",{class:"font-semibold text-xl"},"Editar Participante",-1)),s(c,{icon:"pi pi-arrow-left",label:"Voltar",severity:"secondary",outlined:"",onClick:C})]),o("form",{onSubmit:Q(T,["prevent"])},[o("div",re,[e[31]||(e[31]=o("div",{class:"col-span-full"},[o("h3",{class:"text-lg font-medium mb-4"},"Informações Básicas")],-1)),o("div",de,[e[16]||(e[16]=o("label",{class:"block text-sm font-medium mb-2"},"Foto do Participante",-1)),o("div",ue,[f.value?(n(),i("div",me,[o("img",{src:f.value,alt:"Preview",class:"w-32 h-32 object-cover rounded-lg border"},null,8,pe),s(c,{icon:"pi pi-times",class:"absolute -top-2 -right-2 p-button-rounded p-button-danger p-button-sm",onClick:E})])):u("",!0),o("div",ce,[s(k,{mode:"basic",accept:"image/*",maxFileSize:2e6,auto:!1,chooseLabel:"Alterar Foto",onSelect:M,class:"w-full"}),e[15]||(e[15]=o("small",{class:"text-gray-500"},"Máximo 2MB. Formatos: JPG, PNG",-1))])])]),o("div",null,[e[17]||(e[17]=o("label",{for:"name",class:"block text-sm font-medium mb-2"},"Nome Completo *",-1)),s(v,{id:"name",modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.name=t),class:m([{"p-invalid":l.value.name},"w-full"]),placeholder:"Digite o nome completo"},null,8,["modelValue","class"]),l.value.name?(n(),i("small",ve,p(l.value.name[0]),1)):u("",!0)]),o("div",null,[e[18]||(e[18]=o("label",{for:"stage_name",class:"block text-sm font-medium mb-2"},"Nome Artístico",-1)),s(v,{id:"stage_name",modelValue:a.stage_name,"onUpdate:modelValue":e[1]||(e[1]=t=>a.stage_name=t),class:m([{"p-invalid":l.value.stage_name},"w-full"]),placeholder:"Nome artístico ou apelido"},null,8,["modelValue","class"]),l.value.stage_name?(n(),i("small",fe,p(l.value.stage_name[0]),1)):u("",!0)]),o("div",null,[e[19]||(e[19]=o("label",{for:"voting_code",class:"block text-sm font-medium mb-2"},"Código de Votação *",-1)),o("div",ge,[s(v,{id:"voting_code",modelValue:a.voting_code,"onUpdate:modelValue":e[2]||(e[2]=t=>a.voting_code=t),class:m([{"p-invalid":l.value.voting_code},"flex-1"]),placeholder:"Código único",maxlength:"4"},null,8,["modelValue","class"]),X(s(c,{icon:"pi pi-refresh",onClick:N,type:"button",outlined:""},null,512),[[$,"Gerar novo código",void 0,{top:!0}]])]),l.value.voting_code?(n(),i("small",be,p(l.value.voting_code[0]),1)):(n(),i("small",ke,"Código usado para votação SMS/WhatsApp"))]),o("div",null,[e[20]||(e[20]=o("label",{for:"age",class:"block text-sm font-medium mb-2"},"Idade",-1)),s(D,{id:"age",modelValue:a.age,"onUpdate:modelValue":e[3]||(e[3]=t=>a.age=t),class:m([{"p-invalid":l.value.age},"w-full"]),placeholder:"Idade",min:16,max:100},null,8,["modelValue","class"]),l.value.age?(n(),i("small",xe,p(l.value.age[0]),1)):u("",!0)]),o("div",null,[e[21]||(e[21]=o("label",{for:"gender",class:"block text-sm font-medium mb-2"},"Sexo",-1)),s(P,{id:"gender",modelValue:a.gender,"onUpdate:modelValue":e[4]||(e[4]=t=>a.gender=t),options:S,optionLabel:"label",optionValue:"value",placeholder:"Selecione o sexo",class:m([{"p-invalid":l.value.gender},"w-full"])},null,8,["modelValue","class"]),l.value.gender?(n(),i("small",ye,p(l.value.gender[0]),1)):u("",!0)]),o("div",null,[e[22]||(e[22]=o("label",{for:"city",class:"block text-sm font-medium mb-2"},"Cidade",-1)),s(v,{id:"city",modelValue:a.city,"onUpdate:modelValue":e[5]||(e[5]=t=>a.city=t),class:m([{"p-invalid":l.value.city},"w-full"]),placeholder:"Cidade de origem"},null,8,["modelValue","class"]),l.value.city?(n(),i("small",Ve,p(l.value.city[0]),1)):u("",!0)]),o("div",null,[e[23]||(e[23]=o("label",{for:"province",class:"block text-sm font-medium mb-2"},"Província",-1)),s(P,{id:"province",modelValue:a.province,"onUpdate:modelValue":e[6]||(e[6]=t=>a.province=t),options:U,placeholder:"Selecione a província",class:m([{"p-invalid":l.value.province},"w-full"])},null,8,["modelValue","class"]),l.value.province?(n(),i("small",_e,p(l.value.province[0]),1)):u("",!0)]),o("div",null,[e[24]||(e[24]=o("label",{for:"occupation",class:"block text-sm font-medium mb-2"},"Ocupação",-1)),s(v,{id:"occupation",modelValue:a.occupation,"onUpdate:modelValue":e[7]||(e[7]=t=>a.occupation=t),class:m([{"p-invalid":l.value.occupation},"w-full"]),placeholder:"Profissão ou ocupação"},null,8,["modelValue","class"]),l.value.occupation?(n(),i("small",he,p(l.value.occupation[0]),1)):u("",!0)]),o("div",null,[e[26]||(e[26]=o("label",{class:"block text-sm font-medium mb-2"},"Status",-1)),o("div",we,[s(B,{id:"active",modelValue:a.active,"onUpdate:modelValue":e[8]||(e[8]=t=>a.active=t),binary:!0},null,8,["modelValue"]),e[25]||(e[25]=o("label",{for:"active",class:"ml-2"},"Participante ativo",-1))])]),o("div",Ce,[e[27]||(e[27]=o("label",{for:"biography",class:"block text-sm font-medium mb-2"},"Biografia",-1)),s(I,{id:"biography",modelValue:a.biography,"onUpdate:modelValue":e[9]||(e[9]=t=>a.biography=t),class:m([{"p-invalid":l.value.biography},"w-full"]),placeholder:"Conte sobre o participante...",rows:"4"},null,8,["modelValue","class"]),l.value.biography?(n(),i("small",Pe,p(l.value.biography[0]),1)):u("",!0)]),e[32]||(e[32]=o("div",{class:"col-span-full"},[o("h3",{class:"text-lg font-medium mb-4"},"Redes Sociais")],-1)),o("div",null,[e[28]||(e[28]=o("label",{for:"instagram",class:"block text-sm font-medium mb-2"},"Instagram",-1)),s(v,{id:"instagram",modelValue:a.instagram,"onUpdate:modelValue":e[10]||(e[10]=t=>a.instagram=t),class:m([{"p-invalid":l.value.instagram},"w-full"]),placeholder:"@usuario"},null,8,["modelValue","class"]),l.value.instagram?(n(),i("small",Se,p(l.value.instagram[0]),1)):u("",!0)]),o("div",null,[e[29]||(e[29]=o("label",{for:"facebook",class:"block text-sm font-medium mb-2"},"Facebook",-1)),s(v,{id:"facebook",modelValue:a.facebook,"onUpdate:modelValue":e[11]||(e[11]=t=>a.facebook=t),class:m([{"p-invalid":l.value.facebook},"w-full"]),placeholder:"Nome de usuário"},null,8,["modelValue","class"]),l.value.facebook?(n(),i("small",Ue,p(l.value.facebook[0]),1)):u("",!0)]),o("div",null,[e[30]||(e[30]=o("label",{for:"tiktok",class:"block text-sm font-medium mb-2"},"TikTok",-1)),s(v,{id:"tiktok",modelValue:a.tiktok,"onUpdate:modelValue":e[12]||(e[12]=t=>a.tiktok=t),class:m([{"p-invalid":l.value.tiktok},"w-full"]),placeholder:"@usuario"},null,8,["modelValue","class"]),l.value.tiktok?(n(),i("small",Fe,p(l.value.tiktok[0]),1)):u("",!0)])]),o("div",Me,[s(c,{label:"Cancelar",severity:"secondary",outlined:"",onClick:C,type:"button"}),s(c,{label:"Atualizar Participante",type:"submit",loading:y.value,icon:"pi pi-save"},null,8,["loading"])])],32)])])]))}}},eo=Z(Ee,[["__scopeId","data-v-1b581f36"]]);export{eo as default};
