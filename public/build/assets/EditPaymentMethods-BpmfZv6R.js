import{s as R}from"./index-CZ0HvYoh.js";import{s as j}from"./index-LQiIxZP6.js";import{s as U}from"./index-BkvNc1Xl.js";import{s as A}from"./index-C0fELCZ3.js";import{x as I,r as s,y as L,o as W,c as b,b as a,d as o,w as h,z as l,A as O,s as Q,t as G,B as H,m as J,F as K,q as X,l as p,h as Y}from"./app-Bf6Mdg56.js";import{u as Z}from"./vee-validate-D8sAoENI.js";import"./moment-C5S46NFB.js";import{c as ee,a as ae}from"./index.esm-CQT6nZnd.js";import{d as se}from"./debounce-BMmXVQ06.js";import"./index-CU_juRZx.js";import"./index-0kBO3NFd.js";import"./index-DDFDSg2h.js";const te={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},oe={class:"w-full"},le={class:"flex flex-col gap-4 text-center"},re={key:1,class:"flex flex-col md:flex-row gap-12"},ie={class:"w-full"},ne={class:"card flex flex-col gap-4"},de={class:"w-full"},me={class:"flex flex-col gap-2"},ue={id:"name-help",class:"p-error"},Be={__name:"EditPaymentMethods",setup(ce){const r=X(),i=I();s(null);const f=s(!0),v=s(!1);let _=s(null);const k=s(""),m=s(null),V=s(1);s(15),s(0);const g=s(!1);s(null);const n=s(!1),N=ee({name:ae().required().trim().label("name")}),{defineField:y,handleSubmit:P,resetForm:pe,errors:C,setErrors:F}=Z({validationSchema:N}),[u]=y("name");y("capacity");const[E]=y("_method"),S=s();function w(){r&&r.back()}const B=()=>{g.value=!1},x=P(t=>{S.value!=null&&(t.image=S.value),n.value=!0,axios.post(`/api/paymentmethods/${r.currentRoute.value.params.id}`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{r.back(),i.add({severity:"success",summary:"Successo",detail:"Categoria criado com sucesso",life:3e3})}).catch(e=>{n.value=!1,i.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&F(e.response.data.errors)}).finally(()=>{n.value=!1})}),D=async(t=1)=>{axios.get(`/api/paymentmethods/${r.currentRoute.value.params.id}/edit`,{params:{query:k.value}}).then(e=>{m.value=e.data.paymentmethod,u.value=m.value.name,E.value="put",f.value=!1}).catch(e=>{f.value=!1,i.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),w()})},T=()=>{v.value=!0,axios.delete(`/api/paymentmethods/${_.value}`).then(()=>{m.value.data=m.value.data.filter(t=>t.id!==_.value),B(),i.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(t=>{i.add({severity:"error",summary:"Erro",detail:`${t}`,life:3e3}),v.value=!1}).finally(()=>{v.value=!1})},q=se(()=>{D(V.value)},300);return L(k,q),W(()=>{D()}),(t,e)=>{const $=A,c=U,z=j,M=R;return p(),b(K,null,[f.value?(p(),b("div",te,[a("div",oe,[a("div",le,[o($,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[3]||(e[3]=a("p",null,"Por Favor Aguarde...",-1))])])])):(p(),b("div",re,[a("div",ie,[a("div",ne,[a("div",de,[o(c,{label:"Voltar",class:"mr-2 mb-2",onClick:w},{default:h(()=>e[4]||(e[4]=[a("i",{class:"pi pi-angle-left"},null,-1),Y(" Voltar")])),_:1})]),e[6]||(e[6]=a("div",{class:"font-semibold text-xl"},"Metodos de Pagamento",-1)),e[7]||(e[7]=a("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),a("form",{onSubmit:e[1]||(e[1]=(...d)=>l(x)&&l(x)(...d))},[a("div",me,[e[5]||(e[5]=a("label",{for:"name"},"Nome",-1)),o(z,{modelValue:l(u),"onUpdate:modelValue":e[0]||(e[0]=d=>O(u)?u.value=d:null),id:"name",placeholder:"Nome",class:Q({"p-invalid":l(C).name}),type:"text"},null,8,["modelValue","class"]),a("small",ue,G(l(C).name),1)]),o(c,{label:"Submeter",class:"mr-2 mb-2",onClick:l(x),disabled:n.value},null,8,["onClick","disabled"]),n.value?(p(),H($,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):J("",!0)],32)])])])),o(M,{header:"Confirmação",visible:g.value,"onUpdate:visible":e[2]||(e[2]=d=>g.value=d),style:{width:"350px"},modal:!0},{footer:h(()=>[o(c,{label:"Não",icon:"pi pi-times",onClick:B,class:"p-button-text"}),o(c,{label:"Sim",icon:"pi pi-check",onClick:T,class:"p-button-text",autofocus:""})]),default:h(()=>[e[8]||(e[8]=a("div",{class:"flex align-items-center justify-content-center"},[a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),a("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{Be as default};
