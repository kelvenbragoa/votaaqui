import{s as W}from"./index-D4q2omWw.js";import{s as O}from"./index-QcDmmBo-.js";import{s as Q}from"./index-CnKwZFsY.js";import{s as G}from"./index-BrYXoc-D.js";import{x as H,r as l,y as J,o as K,c as C,b as a,d as o,w as V,z as t,A as S,s as w,t as B,B as X,m as Y,F as Z,q as ee,l as b,h as ae}from"./app-DS2baS_n.js";import{u as le}from"./vee-validate-CHeK3SD0.js";import"./moment-C5S46NFB.js";import{c as te,a as D}from"./index.esm-CQT6nZnd.js";import{d as se}from"./debounce-BMmXVQ06.js";import"./index-C6Z0hblE.js";import"./index-DUNuG4hG.js";import"./index-B9mXU8BC.js";const oe={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},ie={class:"w-full"},re={class:"flex flex-col gap-4 text-center"},ne={key:1,class:"flex flex-col md:flex-row gap-12"},me={class:"w-full"},de={class:"card flex flex-col gap-4"},ce={class:"w-full"},ue={class:"flex flex-col gap-2"},pe={id:"name-help",class:"p-error"},fe={class:"flex flex-col gap-2"},ve={id:"capacity-help",class:"p-error"},ye={class:"flex flex-col gap-2"},be={id:"monthly_limit-help",class:"p-error"},Fe={__name:"EditTables",setup(xe){const m=ee(),d=H();l(null);const x=l(!0),g=l(!1);let $=l(null);const N=l(""),r=l(null),L=l(1);l(15),l(0);const h=l(!1);l(null);const c=l(!1),P=te({name:D().required().trim().label("name"),capacity:D().required().trim().label("capacity"),monthly_limit:D().required().trim().label("Monthly Limit")}),{defineField:u,handleSubmit:U,resetForm:ge,errors:n,setErrors:z}=le({validationSchema:P}),[p]=u("name"),[f]=u("capacity"),[v]=u("monthly_limit"),[R]=u("_method"),q=l();function F(){m&&m.back()}const M=()=>{h.value=!1},_=U(i=>{q.value!=null&&(i.image=q.value),c.value=!0,axios.post(`/api/tables/${m.currentRoute.value.params.id}`,i,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{m.back(),d.add({severity:"success",summary:"Successo",detail:"Categoria criado com sucesso",life:3e3})}).catch(e=>{c.value=!1,d.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&z(e.response.data.errors)}).finally(()=>{c.value=!1})}),T=async(i=1)=>{axios.get(`/api/tables/${m.currentRoute.value.params.id}/edit`,{params:{query:N.value}}).then(e=>{r.value=e.data.table,p.value=r.value.name,f.value=r.value.capacity,v.value=r.value.monthly_limit,R.value="put",x.value=!1}).catch(e=>{x.value=!1,d.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),F()})},j=()=>{g.value=!0,axios.delete(`/api/tables/${$.value}`).then(()=>{r.value.data=r.value.data.filter(i=>i.id!==$.value),M(),d.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(i=>{d.add({severity:"error",summary:"Erro",detail:`${i}`,life:3e3}),g.value=!1}).finally(()=>{g.value=!1})},A=se(()=>{T(L.value)},300);return J(N,A),K(()=>{T()}),(i,e)=>{const E=G,y=Q,k=O,I=W;return b(),C(Z,null,[x.value?(b(),C("div",oe,[a("div",ie,[a("div",re,[o(E,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[5]||(e[5]=a("p",null,"Por Favor Aguarde...",-1))])])])):(b(),C("div",ne,[a("div",me,[a("div",de,[a("div",ce,[o(y,{label:"Voltar",class:"mr-2 mb-2",onClick:F},{default:V(()=>e[6]||(e[6]=[a("i",{class:"pi pi-angle-left"},null,-1),ae(" Voltar")])),_:1})]),e[10]||(e[10]=a("div",{class:"font-semibold text-xl"},"Mesa",-1)),e[11]||(e[11]=a("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),a("form",{onSubmit:e[3]||(e[3]=(...s)=>t(_)&&t(_)(...s))},[a("div",ue,[e[7]||(e[7]=a("label",{for:"name"},"Nome",-1)),o(k,{modelValue:t(p),"onUpdate:modelValue":e[0]||(e[0]=s=>S(p)?p.value=s:null),id:"name",placeholder:"Nome",class:w({"p-invalid":t(n).name}),type:"text"},null,8,["modelValue","class"]),a("small",pe,B(t(n).name),1)]),a("div",fe,[e[8]||(e[8]=a("label",{for:"capacity"},"Capacidade",-1)),o(k,{modelValue:t(f),"onUpdate:modelValue":e[1]||(e[1]=s=>S(f)?f.value=s:null),id:"capacity",placeholder:"Capacidade máxima",class:w({"p-invalid":t(n).capacity}),type:"number"},null,8,["modelValue","class"]),a("small",ve,B(t(n).capacity),1)]),a("div",ye,[e[9]||(e[9]=a("label",{for:"monthly_limit"},"Limite Mensal",-1)),o(k,{modelValue:t(v),"onUpdate:modelValue":e[2]||(e[2]=s=>S(v)?v.value=s:null),id:"monthly_limit",placeholder:"Limite Mensal",class:w({"p-invalid":t(n).monthly_limit}),type:"number"},null,8,["modelValue","class"]),a("small",be,B(t(n).monthly_limit),1)]),o(y,{label:"Submeter",class:"mr-2 mb-2",onClick:t(_),disabled:c.value},null,8,["onClick","disabled"]),c.value?(b(),X(E,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):Y("",!0)],32)])])])),o(I,{header:"Confirmação",visible:h.value,"onUpdate:visible":e[4]||(e[4]=s=>h.value=s),style:{width:"350px"},modal:!0},{footer:V(()=>[o(y,{label:"Não",icon:"pi pi-times",onClick:M,class:"p-button-text"}),o(y,{label:"Sim",icon:"pi pi-check",onClick:j,class:"p-button-text",autofocus:""})]),default:V(()=>[e[12]||(e[12]=a("div",{class:"flex align-items-center justify-content-center"},[a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),a("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{Fe as default};
