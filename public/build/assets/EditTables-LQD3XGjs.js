import{s as A}from"./index-CnszjjtJ.js";import{s as O}from"./index-ChNyJrCk.js";import{s as Q}from"./index-DzcF86oG.js";import{s as G}from"./index-o3qi-ec1.js";import{u as H,r as l,w as J,o as K,c as C,a,b as o,e as V,g as t,l as S,n as w,t as D,j as X,i as Y,F as Z,k as ee,f as b,d as ae}from"./app-DrVY5UIB.js";import{u as le}from"./vee-validate-DiISrGOR.js";import{d as te}from"./moment-CQ1ixRO1.js";import{c as se,a as $}from"./index.esm-DpER4CkV.js";import"./index-BnfWDIPH.js";import"./index-OUojj5W6.js";import"./index--EEhPIfl.js";import"./_commonjsHelpers-Cpj98o6Y.js";const oe={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},ie={class:"w-full"},re={class:"flex flex-col gap-4 text-center"},ne={key:1,class:"flex flex-col md:flex-row gap-12"},me={class:"w-full"},de={class:"card flex flex-col gap-4"},ue={class:"w-full"},ce={class:"flex flex-col gap-2"},pe={id:"name-help",class:"p-error"},fe={class:"flex flex-col gap-2"},ve={id:"capacity-help",class:"p-error"},ye={class:"flex flex-col gap-2"},be={id:"monthly_limit-help",class:"p-error"},Me={__name:"EditTables",setup(ge){const m=ee(),d=H();l(null);const g=l(!0),x=l(!1);let B=l(null);const N=l(""),r=l(null),L=l(1);l(15),l(0);const h=l(!1);l(null);const u=l(!1),P=se({name:$().required().trim().label("name"),capacity:$().required().trim().label("capacity"),monthly_limit:$().required().trim().label("Monthly Limit")}),{defineField:c,handleSubmit:U,resetForm:xe,errors:n,setErrors:j}=le({validationSchema:P}),[p]=c("name"),[f]=c("capacity"),[v]=c("monthly_limit"),[R]=c("_method"),F=l();function M(){m&&m.back()}const T=()=>{h.value=!1},_=U(i=>{F.value!=null&&(i.image=F.value),u.value=!0,axios.post(`/api/tables/${m.currentRoute.value.params.id}`,i,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{m.back(),d.add({severity:"success",summary:"Successo",detail:"Categoria criado com sucesso",life:3e3})}).catch(e=>{u.value=!1,d.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&j(e.response.data.errors)}).finally(()=>{u.value=!1})}),q=async(i=1)=>{axios.get(`/api/tables/${m.currentRoute.value.params.id}/edit`,{params:{query:N.value}}).then(e=>{r.value=e.data.table,p.value=r.value.name,f.value=r.value.capacity,v.value=r.value.monthly_limit,R.value="put",g.value=!1}).catch(e=>{g.value=!1,d.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),M()})},z=()=>{x.value=!0,axios.delete(`/api/tables/${B.value}`).then(()=>{r.value.data=r.value.data.filter(i=>i.id!==B.value),T(),d.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(i=>{d.add({severity:"error",summary:"Erro",detail:`${i}`,life:3e3}),x.value=!1}).finally(()=>{x.value=!1})},I=te(()=>{q(L.value)},300);return J(N,I),K(()=>{q()}),(i,e)=>{const E=G,y=Q,k=O,W=A;return b(),C(Z,null,[g.value?(b(),C("div",oe,[a("div",ie,[a("div",re,[o(E,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[5]||(e[5]=a("p",null,"Por Favor Aguarde...",-1))])])])):(b(),C("div",ne,[a("div",me,[a("div",de,[a("div",ue,[o(y,{label:"Voltar",class:"mr-2 mb-2",onClick:M},{default:V(()=>e[6]||(e[6]=[a("i",{class:"pi pi-angle-left"},null,-1),ae(" Voltar")])),_:1})]),e[10]||(e[10]=a("div",{class:"font-semibold text-xl"},"Mesa",-1)),e[11]||(e[11]=a("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),a("form",{onSubmit:e[3]||(e[3]=(...s)=>t(_)&&t(_)(...s))},[a("div",ce,[e[7]||(e[7]=a("label",{for:"name"},"Nome",-1)),o(k,{modelValue:t(p),"onUpdate:modelValue":e[0]||(e[0]=s=>S(p)?p.value=s:null),id:"name",placeholder:"Nome",class:w({"p-invalid":t(n).name}),type:"text"},null,8,["modelValue","class"]),a("small",pe,D(t(n).name),1)]),a("div",fe,[e[8]||(e[8]=a("label",{for:"capacity"},"Capacidade",-1)),o(k,{modelValue:t(f),"onUpdate:modelValue":e[1]||(e[1]=s=>S(f)?f.value=s:null),id:"capacity",placeholder:"Capacidade máxima",class:w({"p-invalid":t(n).capacity}),type:"number"},null,8,["modelValue","class"]),a("small",ve,D(t(n).capacity),1)]),a("div",ye,[e[9]||(e[9]=a("label",{for:"monthly_limit"},"Limite Mensal",-1)),o(k,{modelValue:t(v),"onUpdate:modelValue":e[2]||(e[2]=s=>S(v)?v.value=s:null),id:"monthly_limit",placeholder:"Limite Mensal",class:w({"p-invalid":t(n).monthly_limit}),type:"number"},null,8,["modelValue","class"]),a("small",be,D(t(n).monthly_limit),1)]),o(y,{label:"Submeter",class:"mr-2 mb-2",onClick:t(_),disabled:u.value},null,8,["onClick","disabled"]),u.value?(b(),X(E,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):Y("",!0)],32)])])])),o(W,{header:"Confirmação",visible:h.value,"onUpdate:visible":e[4]||(e[4]=s=>h.value=s),style:{width:"350px"},modal:!0},{footer:V(()=>[o(y,{label:"Não",icon:"pi pi-times",onClick:T,class:"p-button-text"}),o(y,{label:"Sim",icon:"pi pi-check",onClick:z,class:"p-button-text",autofocus:""})]),default:V(()=>[e[12]||(e[12]=a("div",{class:"flex align-items-center justify-content-center"},[a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),a("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{Me as default};
