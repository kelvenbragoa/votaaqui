import{s as we}from"./index-CnszjjtJ.js";import{s as ke,a as Pe,b as Te}from"./index-BTnVhyax.js";import{s as De,a as Ce}from"./index-ChtszOvl.js";import{s as Me}from"./index-CDqNT4St.js";import{s as je}from"./index-Ck0pw5nd.js";import{s as $e}from"./index-DzcF86oG.js";import{s as Re}from"./index-o3qi-ec1.js";import{u as Ye,r as o,w as Se,o as Ve,c as f,a as t,b as l,e as s,t as r,g,F as qe,f as p,d as i,h as de,i as Ie,j as Be,k as Ee}from"./app-DrVY5UIB.js";import"./index.esm-DpER4CkV.js";import{d as Ne,h as _}from"./moment-CQ1ixRO1.js";import"./index-BnfWDIPH.js";import"./index-OUojj5W6.js";import"./index-DHvi7lrb.js";import"./index-DuQbNip_.js";import"./index--EEhPIfl.js";import"./index-BCrV5xA7.js";import"./index-LzfBnFcQ.js";import"./index-CZNYUL1o.js";import"./index-BO4gTK7C.js";import"./index-ChNyJrCk.js";import"./index-BYCe9Ecl.js";import"./index-CTfp0x3z.js";import"./index-DytjaMpk.js";import"./index-BAE_mEon.js";import"./index-QlbquBzF.js";import"./index-3epIZWS7.js";import"./index-BovvML42.js";import"./index-CpYWlWMi.js";import"./index-pZUdUnUT.js";import"./_commonjsHelpers-Cpj98o6Y.js";const He={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},Fe={class:"w-full"},Qe={class:"flex flex-col gap-4 text-center"},Ue={key:1},Ae={class:"w-full"},Le={class:"grid grid-cols-12 gap-8 mb-3"},ze={class:"col-span-12 lg:col-span-6 xl:col-span-3"},Ge={class:"card mb-0"},Oe={class:"flex justify-between mb-4"},Ke={class:"col-span-12 lg:col-span-6 xl:col-span-3"},We={class:"card mb-0"},Je={class:"flex justify-between mb-4"},Xe={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Ze={class:"col-span-12 lg:col-span-6 xl:col-span-3"},et={class:"card mb-0"},tt={class:"flex justify-between mb-4"},at={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},st={class:"col-span-12 lg:col-span-6 xl:col-span-3"},lt={class:"card mb-0"},ot={class:"flex justify-between mb-4"},it={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},rt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},dt={class:"card mb-0"},nt={class:"flex justify-between mb-4"},ut={class:"flex justify-between mb-4"},mt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},ct={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},pt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},vt={class:"card mb-0"},ft={class:"flex justify-between mb-4"},bt={class:"flex justify-between mb-4"},yt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},gt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},_t={class:"col-span-12 lg:col-span-6 xl:col-span-3"},xt={class:"card mb-0"},ht={class:"flex justify-between mb-4"},wt={class:"flex justify-between mb-4"},kt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Pt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Tt=["onClick"],Dt=["onClick"],Ct=["src"],Mt={key:1},ia={__name:"IndexCashRegisterDashboard",setup(jt){const x=Ee(),m=Ye();o(null);const h=o(!0),w=o(!1),k=o(!1),P=o(!1),I=o([]),B=o([]),E=o([]),N=o(0),H=o(0),F=o(0),T=o(!1);let Q=o(null);const v=o(""),U=o(null),D=o(1),C=o(1),M=o(1),ne=o(1),u=o(100);o(0);const j=o(!1);o(null),o([]),o(0),o(0),o([]),o(!1),o(1);const $=o(!1),A=o(null);o(0);const L=o(0),z=o(0),G=o(0),O=o(0),K=o(0),W=o(0),J=o(0),X=o(0),Z=o(0),ee=o(0);o("Aberto"),o([]);const R=o(!1),Y=o(null),te=d=>{Y.value=d,R.value=!0},S=o(!1);function ae(){x&&x.back()}const se=()=>{j.value=!1};function ue(){const d=document.querySelector("iframe");d&&(d.contentWindow.focus(),d.contentWindow.print())}function me(){$.value=!0,x.back()}const le=async(d=1)=>{console.log("hello"),axios.get("/api/cashregisters/dashboard",{params:{query:v.value}}).then(e=>{L.value=e.data.cash_register,z.value=e.data.total_sales,G.value=e.data.total_orders,K.value=e.data.total_tables,X.value=e.data.total_quick_sell,O.value=e.data.average_ticket,W.value=e.data.total_quick_sell_amount,J.value=e.data.total_tables_amount,Z.value=e.data.total_payments,ee.value=e.data.total_payments_amount,h.value=!1}).catch(e=>{h.value=!1,m.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3}),ae()})},oe=async(d=1)=>{axios.get(`/api/cashregisters/paymentreport?page=${d}`,{params:{query:v.value}}).then(e=>{E.value=e.data,F.value=e.data.total,w.value=!1}).catch(e=>{w.value=!1,m.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3})})},ie=async(d=1)=>{axios.get(`/api/cashregisters/tablesellreport?page=${d}`,{params:{query:v.value}}).then(e=>{B.value=e.data,H.value=e.data.total,P.value=!1}).catch(e=>{P.value=!1,m.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3})})},re=async(d=1)=>{axios.get(`/api/cashregisters/quicksellreport?page=${d}`,{params:{query:v.value}}).then(e=>{I.value=e.data,N.value=e.data.total,k.value=!1}).catch(e=>{k.value=!1,m.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3})})},ce=()=>{T.value=!0,axios.delete(`/api/tables/${Q.value}`).then(()=>{U.value.data=U.value.data.filter(d=>d.id!==Q.value),se(),m.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(d=>{m.add({severity:"error",summary:"Erro",detail:`${d}`,life:3e3}),T.value=!1}).finally(()=>{T.value=!1})},pe=d=>{D.value=d.page+1,u.value=d.rows,re(D.value)},ve=d=>{C.value=d.page+1,u.value=d.rows,ie(C.value)},fe=d=>{M.value=d.page+1,u.value=d.rows,oe(M.value)},be=Ne(()=>{le(ne.value)},300);return Se(v,be),Ve(()=>{le(),oe(),re(),ie()}),(d,e)=>{const ye=Re,c=$e,V=Pe,ge=Te,n=je,b=Me,q=De,_e=Ce,xe=ke,y=we;return p(),f(qe,null,[h.value?(p(),f("div",He,[t("div",Fe,[t("div",Qe,[l(ye,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[5]||(e[5]=t("p",null,"Por Favor Aguarde...",-1))])])])):(p(),f("div",Ue,[t("div",Ae,[l(c,{label:"Voltar",class:"mr-2 mb-2",onClick:ae},{default:s(()=>e[6]||(e[6]=[t("i",{class:"pi pi-angle-left"},null,-1),i(" Voltar")])),_:1})]),t("div",Le,[t("div",ze,[t("div",Ge,[t("div",Oe,[t("div",null,[e[7]||(e[7]=t("span",{class:"block text-muted-color font-medium mb-4"},"Caixa",-1)),t("small",null,"Aberto ás: "+r(g(_)(L.value.created_at).format("DD-MM-YYYY H:mm")),1)]),e[8]||(e[8]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),t("div",Ke,[t("div",We,[t("div",Je,[t("div",null,[e[9]||(e[9]=t("span",{class:"block text-muted-color font-medium mb-4"},"Total de Vendas",-1)),t("div",Xe,r(z.value)+" MT",1)]),e[10]||(e[10]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),t("div",Ze,[t("div",et,[t("div",tt,[t("div",null,[e[11]||(e[11]=t("span",{class:"block text-muted-color font-medium mb-4"},"Pedidos",-1)),t("div",at,r(G.value),1)]),e[12]||(e[12]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),t("div",st,[t("div",lt,[t("div",ot,[t("div",null,[e[13]||(e[13]=t("span",{class:"block text-muted-color font-medium mb-4"},"Ticket Médio",-1)),t("div",it,r(O.value)+" MT",1)]),e[14]||(e[14]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),t("div",rt,[t("div",dt,[t("div",nt,[t("div",null,[e[15]||(e[15]=t("span",{class:"block text-muted-color font-medium mb-4"},"Total Mesas Abertas",-1)),t("div",ut,[t("span",mt,r(K.value),1),t("span",ct,r(J.value)+" MT",1)])]),e[16]||(e[16]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),t("div",pt,[t("div",vt,[t("div",ft,[t("div",null,[e[17]||(e[17]=t("span",{class:"block text-muted-color font-medium mb-4"},"Total Pedidos/Venda Rápido",-1)),t("div",bt,[t("span",yt,r(X.value),1),t("span",gt,r(W.value)+" MT",1)])]),e[18]||(e[18]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),t("div",_t,[t("div",xt,[t("div",ht,[t("div",null,[e[19]||(e[19]=t("span",{class:"block text-muted-color font-medium mb-4"},"Total Pagamentos",-1)),t("div",wt,[t("span",kt,r(Z.value),1),t("span",Pt,r(ee.value)+" MT",1)])]),e[20]||(e[20]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])])]),l(xe,{value:"0"},{default:s(()=>[l(ge,null,{default:s(()=>[l(V,{value:"0"},{default:s(()=>e[21]||(e[21]=[i("Vendas Rápidas")])),_:1}),l(V,{value:"1"},{default:s(()=>e[22]||(e[22]=[i("Vendas em Mesas")])),_:1}),l(V,{value:"2"},{default:s(()=>e[23]||(e[23]=[i("Pagamentos Efetuados")])),_:1})]),_:1}),l(_e,null,{default:s(()=>[l(q,{value:"0"},{default:s(()=>[l(b,{value:I.value.data,paginator:!0,rows:u.value,totalRecords:N.value,dataKey:"id",lazy:!0,rowHover:!0,loading:k.value,first:(D.value-1)*u.value,onPage:pe,showGridlines:""},{header:s(()=>e[24]||(e[24]=[])),empty:s(()=>e[25]||(e[25]=[i("Nenhuma registro encontrado. ")])),loading:s(()=>e[26]||(e[26]=[i(" Carregando, por favor espere. ")])),default:s(()=>[l(n,{header:"ID",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(" #"+r(a.id),1)]),_:1}),l(n,{header:"Pedido",style:{"min-width":"12rem"}},{body:s(({data:a})=>e[27]||(e[27]=[i(" Pedido Rápido ")])),_:1}),l(n,{header:"Garçom",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.user.name),1)]),_:1}),l(n,{header:"Estado",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.status.name),1)]),_:1}),l(n,{header:"Itens",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.itens.length),1)]),_:1}),l(n,{header:"Valor",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.total)+" MT ",1)]),_:1}),l(n,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:s(({data:a})=>[i(r(g(_)(a.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),l(n,{header:"Ações",style:{"min-width":"12rem"}},{body:s(({data:a})=>[t("a",{class:"m-3",href:"#",onClick:de(he=>te(a),["prevent"])},e[28]||(e[28]=[t("i",{class:"pi pi-eye"},null,-1)]),8,Tt)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1}),l(q,{value:"1"},{default:s(()=>[l(b,{value:B.value.data,paginator:!0,rows:u.value,totalRecords:H.value,dataKey:"id",lazy:!0,rowHover:!0,loading:P.value,first:(C.value-1)*u.value,onPage:ve,showGridlines:""},{header:s(()=>e[29]||(e[29]=[])),empty:s(()=>e[30]||(e[30]=[i("Nenhuma registro encontrado. ")])),loading:s(()=>e[31]||(e[31]=[i(" Carregando, por favor espere. ")])),default:s(()=>[l(n,{header:"ID",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(" #"+r(a.id),1)]),_:1}),l(n,{header:"Pedido",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.table.name),1)]),_:1}),l(n,{header:"Garçom",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.user.name),1)]),_:1}),l(n,{header:"Estado",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.status.name),1)]),_:1}),l(n,{header:"Itens",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.itens.length),1)]),_:1}),l(n,{header:"Valor",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.total)+" MT ",1)]),_:1}),l(n,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:s(({data:a})=>[i(r(g(_)(a.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),l(n,{header:"Ações",style:{"min-width":"12rem"}},{body:s(({data:a})=>[t("a",{class:"m-3",href:"#",onClick:de(he=>te(a),["prevent"])},e[32]||(e[32]=[t("i",{class:"pi pi-eye"},null,-1)]),8,Dt)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1}),l(q,{value:"2"},{default:s(()=>[l(b,{value:E.value.data,paginator:!0,rows:u.value,totalRecords:F.value,dataKey:"id",lazy:!0,rowHover:!0,loading:w.value,first:(M.value-1)*u.value,onPage:fe,showGridlines:""},{header:s(()=>e[33]||(e[33]=[])),empty:s(()=>e[34]||(e[34]=[i("Nenhuma registro encontrado. ")])),loading:s(()=>e[35]||(e[35]=[i(" Carregando, por favor espere. ")])),default:s(()=>[l(n,{header:"ID",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.id),1)]),_:1}),l(n,{header:"Venda",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(" #"+r(a.order_id),1)]),_:1}),l(n,{header:"Pedido",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.order.table_id==null?"Pedido Rápido":a.order.table.name),1)]),_:1}),l(n,{header:"Metodo de Pagamento",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.method.name),1)]),_:1}),l(n,{header:"Valor",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.amount)+" MT ",1)]),_:1}),l(n,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:s(({data:a})=>[i(r(g(_)(a.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1})]),_:1})]),_:1})])),l(y,{header:"Confirmação",visible:j.value,"onUpdate:visible":e[0]||(e[0]=a=>j.value=a),style:{width:"350px"},modal:!0},{footer:s(()=>[l(c,{label:"Não",icon:"pi pi-times",onClick:se,class:"p-button-text"}),l(c,{label:"Sim",icon:"pi pi-check",onClick:ce,class:"p-button-text",autofocus:""})]),default:s(()=>[e[36]||(e[36]=t("div",{class:"flex align-items-center justify-content-center"},[t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),t("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"]),l(y,{header:"Open File",visible:S.value,"onUpdate:visible":e[2]||(e[2]=a=>S.value=a),style:{width:"30vw"}},{default:s(()=>[e[37]||(e[37]=t("p",null,"Here you can manage your files or perform specific actions.",-1)),l(c,{label:"Close",onClick:e[1]||(e[1]=a=>S.value=!1)})]),_:1},8,["visible"]),l(y,{visible:$.value,"onUpdate:visible":e[3]||(e[3]=a=>$.value=a),header:"Recibo",modal:!0,style:{width:"600px"},closable:!1},{footer:s(()=>[l(c,{label:"Imprimir",icon:"pi pi-print",onClick:ue}),l(c,{label:"Fechar",icon:"pi pi-times",class:"p-button-text",onClick:me})]),default:s(()=>[A.value?(p(),f("iframe",{key:0,src:A.value,style:{width:"100%",height:"500px"},frameborder:"0"},null,8,Ct)):Ie("",!0)]),_:1},8,["visible"]),l(y,{visible:R.value,"onUpdate:visible":e[4]||(e[4]=a=>R.value=a),header:"Itens do Pedido #",modal:!0,style:{width:"50vw"}},{default:s(()=>[Y.value?(p(),Be(b,{key:0,value:Y.value.itens,responsiveLayout:"scroll"},{default:s(()=>[l(n,{header:"Produto",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.product.name),1)]),_:1}),l(n,{header:"Quantidade",style:{"min-width":"8rem"}},{body:s(({data:a})=>[i(r(a.quantity),1)]),_:1}),l(n,{header:"Preço Unitário",style:{"min-width":"8rem"}},{body:s(({data:a})=>[i(r(a.price)+" MT",1)]),_:1}),l(n,{header:"Total",style:{"min-width":"8rem"}},{body:s(({data:a})=>[i(r(a.total)+" MT",1)]),_:1})]),_:1},8,["value"])):(p(),f("p",Mt,"Nenhum item encontrado para este pedido."))]),_:1},8,["visible"])],64)}}};export{ia as default};
