import{T as K}from"./index-BI2JRN43.js";import{s as Q}from"./index-BiBBGeHC.js";import{s as W}from"./index-jKsBrLa6.js";import{s as J}from"./index-BI_DNezQ.js";import{s as X}from"./index-Dx6OK3KN.js";import{s as Z,a as ee}from"./index-C2xMbT0z.js";import{s as te}from"./index-gxu_UWez.js";import{s as oe}from"./index-DbDZMwuB.js";import{s as se}from"./index-C1NcMyXW.js";import{_ as ie,x as ae,r as n,z as le,o as re,c as p,b as s,d as o,w as a,F as ne,l as m,A as b,R as P,h as f,t as d,m as $,i as I,q as de}from"./app-DC1UR6pl.js";import{h as ce}from"./moment-C5S46NFB.js";import{d as ue}from"./debounce-BMmXVQ06.js";import"./index-Cos-MHlu.js";import"./index-CgS_6hon.js";import"./index-BTmt5xlq.js";import"./index-DnbLw_gw.js";import"./index-DDjobvEW.js";import"./index-CoLPaDhD.js";import"./index-3l02thgL.js";import"./index-BZarqDRr.js";import"./index-dgbEMIN5.js";import"./index-BEfI3TX9.js";import"./index-wrcFjjff.js";import"./index-fTroPdOo.js";import"./index-CBVEzNGC.js";import"./index-CL3fyaFK.js";import"./index-B1JUjOmJ.js";import"./index-VjtlqXGp.js";const pe={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},me={class:"w-full"},ve={class:"flex flex-col gap-4 text-center"},fe={key:1,class:"flex flex-col md:flex-row gap-12"},_e={class:"w-full"},ge={class:"card flex flex-col gap-4"},ye={class:"flex justify-between flex-wrap gap-2"},xe=["src","alt"],he={class:"font-medium"},be={key:0,class:"text-sm text-gray-500"},we={class:"font-mono bg-gray-100 px-2 py-1 rounded"},ke={key:0},De={class:"text-sm text-gray-500"},Ce={class:"text-sm text-gray-500"},Pe={class:"flex flex-col gap-1"},$e={key:0,class:"text-xs text-red-500"},Ie={class:"flex gap-2"},Se={__name:"IndexParticipants",setup(Te){const S=de(),v=ae();n(null);const _=n(!0),g=n(!1);let w=n(null);const y=n(""),u=n(null),x=n(1),k=n(15),T=n(0),h=n(!1);function E(){S&&S.back()}const z=()=>{h.value=!1},N=i=>{h.value=!0,w.value=i};function B(i){return i?"success":"danger"}function V(i){return i?"Ativo":"Inativo"}function F(i){return{M:"Masculino",F:"Feminino",Other:"Outro"}[i]||i}const D=async(i=1)=>{axios.get(`/api/web/participants?page=${i}`,{params:{query:y.value}}).then(t=>{u.value=t.data,T.value=t.data.total,_.value=!1}).catch(t=>{_.value=!1,v.add({severity:"error",summary:`${t}`,detail:"Erro ao carregar dados",life:3e3}),E()})},M=()=>{g.value=!0,axios.delete(`/api/web/participants/${w.value}`).then(()=>{u.value.data=u.value.data.filter(i=>i.id!==w.value),z(),v.add({severity:"success",summary:"Sucesso",detail:"Participante excluído com sucesso",life:3e3})}).catch(i=>{var t,r;v.add({severity:"error",summary:"Erro",detail:((r=(t=i.response)==null?void 0:t.data)==null?void 0:r.message)||"Erro ao excluir",life:3e3}),g.value=!1}).finally(()=>{g.value=!1})},R=i=>{axios.post(`/api/web/participants/${i.id}/toggle-status`).then(t=>{const r=u.value.data.findIndex(l=>l.id===i.id);r!==-1&&(u.value.data[r].active=t.data.data.active),v.add({severity:"success",summary:"Sucesso",detail:t.data.message,life:3e3})}).catch(t=>{var r,l;v.add({severity:"error",summary:"Erro",detail:((l=(r=t.response)==null?void 0:r.data)==null?void 0:l.message)||"Erro ao alterar status",life:3e3})})},j=i=>{x.value=i.page+1,k.value=i.rows,D(x.value)},q=ue(()=>{D(x.value)},300);return le(y,q),re(()=>{D()}),(i,t)=>{const r=se,l=oe,A=Z,L=te,Y=ee,c=X,H=J,U=W,G=Q,C=K;return m(),p(ne,null,[_.value?(m(),p("div",pe,[s("div",me,[s("div",ve,[o(r,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),t[2]||(t[2]=s("p",null,"Por Favor Aguarde...",-1))])])])):(m(),p("div",fe,[s("div",_e,[s("div",ge,[t[7]||(t[7]=s("div",{class:"font-semibold text-xl"},"Participantes",-1)),o(U,{value:u.value.data,paginator:!0,rows:k.value,totalRecords:T.value,dataKey:"id",lazy:!0,rowHover:!0,loading:_.value,first:(x.value-1)*k.value,onPage:j,showGridlines:"",responsiveLayout:"scroll"},{header:a(()=>[s("div",ye,[o(b(P),{to:"/admin/participants/create"},{default:a(()=>[o(l,{label:"Novo Participante",class:"mr-2 mb-2"},{default:a(()=>t[3]||(t[3]=[s("i",{class:"pi pi-plus mr-2"},null,-1),f(" Novo Registro ")])),_:1})]),_:1}),o(Y,null,{default:a(()=>[o(A,null,{default:a(()=>t[4]||(t[4]=[s("i",{class:"pi pi-search"},null,-1)])),_:1}),o(L,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),placeholder:"Pesquisar participantes..."},null,8,["modelValue"])]),_:1})])]),empty:a(()=>t[5]||(t[5]=[f("Nenhum participante encontrado.")])),loading:a(()=>t[6]||(t[6]=[f("Carregando, por favor espere.")])),default:a(()=>[o(c,{header:"ID",style:{"min-width":"5rem"}},{body:a(({data:e})=>[f(d(e.id),1)]),_:1}),o(c,{header:"Foto",style:{"min-width":"8rem"}},{body:a(({data:e})=>[s("img",{src:e.photo_url||"/votaaqui/assets/img/events/gate1.jpg",alt:e.name,class:"w-10 h-10 rounded-full object-cover"},null,8,xe)]),_:1}),o(c,{header:"Nome",style:{"min-width":"12rem"}},{body:a(({data:e})=>[s("div",null,[s("div",he,d(e.name),1),e.stage_name?(m(),p("div",be,' "'+d(e.stage_name)+'" ',1)):$("",!0)])]),_:1}),o(c,{header:"Código",style:{"min-width":"8rem"}},{body:a(({data:e})=>[s("span",we,d(e.voting_code),1)]),_:1}),o(c,{header:"Idade/Sexo",style:{"min-width":"10rem"}},{body:a(({data:e})=>[s("div",null,[e.age?(m(),p("div",ke,d(e.age)+" anos",1)):$("",!0),s("div",De,d(F(e.gender)),1)])]),_:1}),o(c,{header:"Localização",style:{"min-width":"12rem"}},{body:a(({data:e})=>[s("div",null,[s("div",null,d(e.city),1),s("div",Ce,d(e.province),1)])]),_:1}),o(c,{header:"Status",style:{"min-width":"8rem"}},{body:a(({data:e})=>[s("div",Pe,[o(H,{value:V(e.active),severity:B(e.active)},null,8,["value","severity"]),e.eliminated_episode?(m(),p("div",$e," Eliminado EP"+d(e.eliminated_episode.episode_number),1)):$("",!0)])]),_:1}),o(c,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:a(({data:e})=>[f(d(b(ce)(e.created_at).format("DD/MM/YYYY HH:mm")),1)]),_:1}),o(c,{header:"Ações",style:{"min-width":"12rem"}},{body:a(({data:e})=>[s("div",Ie,[o(b(P),{to:"/admin/participants/"+e.id},{default:a(()=>[I(o(l,{icon:"pi pi-eye",size:"small",severity:"info",outlined:""},null,512),[[C,"Visualizar",void 0,{top:!0}]])]),_:2},1032,["to"]),o(b(P),{to:"/admin/participants/"+e.id+"/edit"},{default:a(()=>[I(o(l,{icon:"pi pi-file-edit",size:"small",severity:"warning",outlined:""},null,512),[[C,"Editar",void 0,{top:!0}]])]),_:2},1032,["to"]),o(l,{icon:e.active?"pi pi-eye-slash":"pi pi-eye",size:"small",severity:e.active?"warning":"success",outlined:"",onClick:O=>R(e),"v-tooltip":e.active?"Desativar":"Ativar"},null,8,["icon","severity","onClick","v-tooltip"]),I(o(l,{icon:"pi pi-trash",size:"small",severity:"danger",outlined:"",onClick:O=>N(e.id)},null,8,["onClick"]),[[C,"Excluir",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])])])])),o(G,{header:"Confirmação",visible:h.value,"onUpdate:visible":t[1]||(t[1]=e=>h.value=e),style:{width:"350px"},modal:!0},{footer:a(()=>[o(l,{label:"Não",icon:"pi pi-times",onClick:z,class:"p-button-text"}),o(l,{label:"Sim",icon:"pi pi-check",onClick:M,class:"p-button-text",autofocus:"",loading:g.value},null,8,["loading"])]),default:a(()=>[t[8]||(t[8]=s("div",{class:"flex align-items-center justify-content-center"},[s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),s("span",null,"Tem certeza que deseja excluir este participante?")],-1))]),_:1},8,["visible"])],64)}}},at=ie(Se,[["__scopeId","data-v-ee411bdc"]]);export{at as default};
