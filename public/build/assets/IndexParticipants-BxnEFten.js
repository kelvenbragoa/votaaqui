import{T as K}from"./index-FVAK9Ojr.js";import{s as Q}from"./index-DNDA8ZK3.js";import{s as W}from"./index-CdlkC6XN.js";import{s as J}from"./index-D4BDpfsY.js";import{s as X}from"./index-D_nb-Crx.js";import{s as Z,a as ee}from"./index-CuvYlW7Q.js";import{s as te}from"./index-COQfjwrB.js";import{s as oe}from"./index-DNRZcg5a.js";import{s as se}from"./index-CSFnfhp6.js";import{_ as ae,x as ie,r as n,y as le,o as re,c as p,b as s,d as o,w as i,F as ne,l as m,z as w,R as P,h as f,t as d,m as $,i as I,q as de}from"./app-DuMqQ7Hz.js";import{h as ce}from"./moment-C5S46NFB.js";import{d as ue}from"./debounce-BMmXVQ06.js";import"./index-CfGU8b1Y.js";import"./index-C0fUMy5p.js";import"./index-BBEtc1xv.js";import"./index-Ca51vNO5.js";import"./index-C_lgJNxW.js";import"./index-BfcTpilq.js";import"./index-SFnkIGlv.js";import"./index-rDSFDnia.js";import"./index-RfcOmiDN.js";import"./index-DrRGfUjU.js";import"./index-Ct0xruiZ.js";import"./index-CLZToa9q.js";import"./index-BgovzKEG.js";import"./index-BwE0YRCW.js";import"./index-BAQ1h8Ej.js";import"./index-CB6yOJJj.js";const pe={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},me={class:"w-full"},ve={class:"flex flex-col gap-4 text-center"},fe={key:1,class:"flex flex-col md:flex-row gap-12"},_e={class:"w-full"},ge={class:"card flex flex-col gap-4"},ye={class:"flex justify-between flex-wrap gap-2"},xe=["src","alt"],he={class:"font-medium"},we={key:0,class:"text-sm text-gray-500"},be={class:"font-mono bg-gray-100 px-2 py-1 rounded"},ke={key:0},De={class:"text-sm text-gray-500"},Ce={class:"text-sm text-gray-500"},Pe={class:"flex flex-col gap-1"},$e={key:0,class:"text-xs text-red-500"},Ie={class:"flex gap-2"},Se={__name:"IndexParticipants",setup(Te){const S=de(),v=ie();n(null);const _=n(!0),g=n(!1);let b=n(null);const y=n(""),u=n(null),x=n(1),k=n(15),T=n(0),h=n(!1);function E(){S&&S.back()}const z=()=>{h.value=!1},N=a=>{h.value=!0,b.value=a};function B(a){return a?"success":"danger"}function V(a){return a?"Ativo":"Inativo"}function F(a){return{M:"Masculino",F:"Feminino",Other:"Outro"}[a]||a}const D=async(a=1)=>{axios.get(`/api/web/participants?page=${a}`,{params:{query:y.value}}).then(t=>{u.value=t.data,T.value=t.data.total,_.value=!1}).catch(t=>{_.value=!1,v.add({severity:"error",summary:`${t}`,detail:"Erro ao carregar dados",life:3e3}),E()})},M=()=>{g.value=!0,axios.delete(`/api/web/participants/${b.value}`).then(()=>{u.value.data=u.value.data.filter(a=>a.id!==b.value),z(),v.add({severity:"success",summary:"Sucesso",detail:"Participante excluído com sucesso",life:3e3})}).catch(a=>{var t,r;v.add({severity:"error",summary:"Erro",detail:((r=(t=a.response)==null?void 0:t.data)==null?void 0:r.message)||"Erro ao excluir",life:3e3}),g.value=!1}).finally(()=>{g.value=!1})},R=a=>{axios.post(`/api/web/participants/${a.id}/toggle-status`).then(t=>{const r=u.value.data.findIndex(l=>l.id===a.id);r!==-1&&(u.value.data[r].active=t.data.data.active),v.add({severity:"success",summary:"Sucesso",detail:t.data.message,life:3e3})}).catch(t=>{var r,l;v.add({severity:"error",summary:"Erro",detail:((l=(r=t.response)==null?void 0:r.data)==null?void 0:l.message)||"Erro ao alterar status",life:3e3})})},j=a=>{x.value=a.page+1,k.value=a.rows,D(x.value)},q=ue(()=>{D(x.value)},300);return le(y,q),re(()=>{D()}),(a,t)=>{const r=se,l=oe,A=Z,L=te,Y=ee,c=X,H=J,U=W,G=Q,C=K;return m(),p(ne,null,[_.value?(m(),p("div",pe,[s("div",me,[s("div",ve,[o(r,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),t[2]||(t[2]=s("p",null,"Por Favor Aguarde...",-1))])])])):(m(),p("div",fe,[s("div",_e,[s("div",ge,[t[7]||(t[7]=s("div",{class:"font-semibold text-xl"},"Participantes",-1)),o(U,{value:u.value.data,paginator:!0,rows:k.value,totalRecords:T.value,dataKey:"id",lazy:!0,rowHover:!0,loading:_.value,first:(x.value-1)*k.value,onPage:j,showGridlines:"",responsiveLayout:"scroll"},{header:i(()=>[s("div",ye,[o(w(P),{to:"/admin/participants/create"},{default:i(()=>[o(l,{label:"Novo Participante",class:"mr-2 mb-2"},{default:i(()=>t[3]||(t[3]=[s("i",{class:"pi pi-plus mr-2"},null,-1),f(" Novo Registro ")])),_:1})]),_:1}),o(Y,null,{default:i(()=>[o(A,null,{default:i(()=>t[4]||(t[4]=[s("i",{class:"pi pi-search"},null,-1)])),_:1}),o(L,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),placeholder:"Pesquisar participantes..."},null,8,["modelValue"])]),_:1})])]),empty:i(()=>t[5]||(t[5]=[f("Nenhum participante encontrado.")])),loading:i(()=>t[6]||(t[6]=[f("Carregando, por favor espere.")])),default:i(()=>[o(c,{header:"ID",style:{"min-width":"5rem"}},{body:i(({data:e})=>[f(d(e.id),1)]),_:1}),o(c,{header:"Foto",style:{"min-width":"8rem"}},{body:i(({data:e})=>[s("img",{src:e.photo_url||"/votaaqui/assets/img/events/speaker-4.webp",alt:e.name,class:"w-10 h-10 rounded-full object-cover"},null,8,xe)]),_:1}),o(c,{header:"Nome",style:{"min-width":"12rem"}},{body:i(({data:e})=>[s("div",null,[s("div",he,d(e.name),1),e.stage_name?(m(),p("div",we,' "'+d(e.stage_name)+'" ',1)):$("",!0)])]),_:1}),o(c,{header:"Código",style:{"min-width":"8rem"}},{body:i(({data:e})=>[s("span",be,d(e.voting_code),1)]),_:1}),o(c,{header:"Idade/Sexo",style:{"min-width":"10rem"}},{body:i(({data:e})=>[s("div",null,[e.age?(m(),p("div",ke,d(e.age)+" anos",1)):$("",!0),s("div",De,d(F(e.gender)),1)])]),_:1}),o(c,{header:"Localização",style:{"min-width":"12rem"}},{body:i(({data:e})=>[s("div",null,[s("div",null,d(e.city),1),s("div",Ce,d(e.province),1)])]),_:1}),o(c,{header:"Status",style:{"min-width":"8rem"}},{body:i(({data:e})=>[s("div",Pe,[o(H,{value:V(e.active),severity:B(e.active)},null,8,["value","severity"]),e.eliminated_episode?(m(),p("div",$e," Eliminado EP"+d(e.eliminated_episode.episode_number),1)):$("",!0)])]),_:1}),o(c,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:i(({data:e})=>[f(d(w(ce)(e.created_at).format("DD/MM/YYYY HH:mm")),1)]),_:1}),o(c,{header:"Ações",style:{"min-width":"12rem"}},{body:i(({data:e})=>[s("div",Ie,[o(w(P),{to:"/admin/participants/"+e.id},{default:i(()=>[I(o(l,{icon:"pi pi-eye",size:"small",severity:"info",outlined:""},null,512),[[C,"Visualizar",void 0,{top:!0}]])]),_:2},1032,["to"]),o(w(P),{to:"/admin/participants/"+e.id+"/edit"},{default:i(()=>[I(o(l,{icon:"pi pi-file-edit",size:"small",severity:"warning",outlined:""},null,512),[[C,"Editar",void 0,{top:!0}]])]),_:2},1032,["to"]),o(l,{icon:e.active?"pi pi-eye-slash":"pi pi-eye",size:"small",severity:e.active?"warning":"success",outlined:"",onClick:O=>R(e),"v-tooltip":e.active?"Desativar":"Ativar"},null,8,["icon","severity","onClick","v-tooltip"]),I(o(l,{icon:"pi pi-trash",size:"small",severity:"danger",outlined:"",onClick:O=>N(e.id)},null,8,["onClick"]),[[C,"Excluir",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])])])])),o(G,{header:"Confirmação",visible:h.value,"onUpdate:visible":t[1]||(t[1]=e=>h.value=e),style:{width:"350px"},modal:!0},{footer:i(()=>[o(l,{label:"Não",icon:"pi pi-times",onClick:z,class:"p-button-text"}),o(l,{label:"Sim",icon:"pi pi-check",onClick:M,class:"p-button-text",autofocus:"",loading:g.value},null,8,["loading"])]),default:i(()=>[t[8]||(t[8]=s("div",{class:"flex align-items-center justify-content-center"},[s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),s("span",null,"Tem certeza que deseja excluir este participante?")],-1))]),_:1},8,["visible"])],64)}}},it=ae(Se,[["__scopeId","data-v-cd6008ae"]]);export{it as default};
