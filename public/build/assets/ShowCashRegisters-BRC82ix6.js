import{s as we}from"./index-B12H3bT2.js";import{s as ke,a as Te,b as De}from"./index-Cu-jF-K9.js";import{s as Pe,a as Me}from"./index-NC_XWSS0.js";import{s as Ce}from"./index-24jAc4I0.js";import{s as $e}from"./index-B3_g3pMh.js";import{s as Re}from"./index-BdVJXtgR.js";import{s as Ye}from"./index-Z6ehlZzN.js";import{x as je,r as o,y as Se,o as Ve,c as y,b as t,d as l,w as s,t as r,z as g,h as i,F as qe,l as f,e as ne,m as Be,B as Ee,q as He}from"./app-B8O1oCuU.js";import"./index.esm-CQT6nZnd.js";import{h as x}from"./moment-C5S46NFB.js";import{d as Ie}from"./debounce-BMmXVQ06.js";import"./index-BzEFSWDQ.js";import"./index-DMXq-XN_.js";import"./index-311MbFo2.js";import"./index-Bx0oxzqV.js";import"./index-hQ97aokG.js";import"./index-DV2v8N9W.js";import"./index-CTH6Yim5.js";import"./index-B9nFa2Qn.js";import"./index-D30t01VP.js";import"./index-RMhrKOfx.js";import"./index-BM4ojN0J.js";import"./index-BwT38ftM.js";import"./index-Bb3ejPmB.js";import"./index-BJT6iZqf.js";import"./index-BkqKv2Q0.js";import"./index-05wL0Ocg.js";import"./index-BEC1ScWF.js";import"./index-C9M4N-a_.js";import"./index-DHkcSOh6.js";const Ne={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},Fe={class:"w-full"},Qe={class:"flex flex-col gap-4 text-center"},Ue={key:1},ze={class:"w-full"},Ae={class:"grid grid-cols-12 gap-8 mb-3"},Le={class:"col-span-12 lg:col-span-6 xl:col-span-3"},Ge={class:"card mb-0"},Oe={class:"flex justify-between mb-4"},Ke={class:"col-span-12 lg:col-span-6 xl:col-span-3"},We={class:"card mb-0"},Je={class:"flex justify-between mb-4"},Xe={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Ze={class:"col-span-12 lg:col-span-6 xl:col-span-3"},et={class:"card mb-0"},tt={class:"flex justify-between mb-4"},at={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},st={class:"col-span-12 lg:col-span-6 xl:col-span-3"},lt={class:"card mb-0"},ot={class:"flex justify-between mb-4"},it={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},rt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},nt={class:"card mb-0"},dt={class:"flex justify-between mb-4"},ut={class:"flex justify-between mb-4"},mt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},ct={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},pt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},vt={class:"card mb-0"},ft={class:"flex justify-between mb-4"},bt={class:"flex justify-between mb-4"},yt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},gt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},xt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},_t={class:"card mb-0"},ht={class:"flex justify-between mb-4"},wt={class:"flex justify-between mb-4"},kt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Tt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Dt=["onClick"],Pt=["onClick"],Mt=["src"],Ct={key:1},ia={__name:"ShowCashRegisters",setup($t){const m=He(),p=je();o(null);const w=o(!0),k=o(!1),T=o(!1),D=o(!1),E=o([]),H=o([]),I=o([]),N=o(0),F=o(0),Q=o(0),P=o(!1);let U=o(null);const b=o(""),z=o(null),M=o(1),C=o(1),$=o(1),de=o(1),u=o(100);o(0);const R=o(!1);o(null),o([]),o(0),o(0),o([]),o(!1),o(1);const Y=o(!1),A=o(null);o(0);const c=o(0),L=o(0),G=o(0),O=o(0),K=o(0),W=o(0),J=o(0),X=o(0),Z=o(0),ee=o(0);o("Aberto"),o([]);const j=o(!1),S=o(null),te=n=>{S.value=n,j.value=!0},V=o(!1);function ae(){m&&m.back()}const se=()=>{R.value=!1};function ue(){const n=document.querySelector("iframe");n&&(n.contentWindow.focus(),n.contentWindow.print())}function me(){Y.value=!0,m.back()}const le=async(n=1)=>{axios.get(`/api/cashregister/${m.currentRoute.value.params.id}`,{params:{query:b.value}}).then(e=>{c.value=e.data.cash_register,L.value=e.data.total_sales,G.value=e.data.total_orders,K.value=e.data.total_tables,X.value=e.data.total_quick_sell,O.value=e.data.average_ticket,W.value=e.data.total_quick_sell_amount,J.value=e.data.total_tables_amount,Z.value=e.data.total_payments,ee.value=e.data.total_payments_amount,w.value=!1}).catch(e=>{w.value=!1,p.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3}),ae()})},oe=async(n=1)=>{axios.get(`/api/cashregisters/paymentreport?page=${n}&user=${m.currentRoute.value.params.id}`,{params:{query:b.value}}).then(e=>{I.value=e.data,Q.value=e.data.total,k.value=!1}).catch(e=>{k.value=!1,p.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3})})},ie=async(n=1)=>{axios.get(`/api/cashregisters/tablesellreport?page=${n}&user=${m.currentRoute.value.params.id}`,{params:{query:b.value}}).then(e=>{H.value=e.data,F.value=e.data.total,D.value=!1}).catch(e=>{D.value=!1,p.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3})})},re=async(n=1)=>{axios.get(`/api/cashregisters/quicksellreport?page=${n}&user=${m.currentRoute.value.params.id}`,{params:{query:b.value}}).then(e=>{E.value=e.data,N.value=e.data.total,T.value=!1}).catch(e=>{T.value=!1,p.add({severity:"error",summary:"Erro",detail:`${e.response.data.message}`,life:3e3})})},ce=()=>{P.value=!0,axios.delete(`/api/tables/${U.value}`).then(()=>{z.value.data=z.value.data.filter(n=>n.id!==U.value),se(),p.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(n=>{p.add({severity:"error",summary:"Erro",detail:`${n}`,life:3e3}),P.value=!1}).finally(()=>{P.value=!1})},pe=n=>{M.value=n.page+1,u.value=n.rows,re(M.value)},ve=n=>{C.value=n.page+1,u.value=n.rows,ie(C.value)},fe=n=>{$.value=n.page+1,u.value=n.rows,oe($.value)},be=Ie(()=>{le(de.value)},300);return Se(b,be),Ve(()=>{le(),oe(),re(),ie()}),(n,e)=>{const ye=Ye,v=Re,q=Te,ge=De,d=$e,_=Ce,B=Pe,xe=Me,_e=ke,h=we;return f(),y(qe,null,[w.value?(f(),y("div",Ne,[t("div",Fe,[t("div",Qe,[l(ye,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[5]||(e[5]=t("p",null,"Por Favor Aguarde...",-1))])])])):(f(),y("div",Ue,[t("div",ze,[l(v,{label:"Voltar",class:"mr-2 mb-2",onClick:ae},{default:s(()=>e[6]||(e[6]=[t("i",{class:"pi pi-angle-left"},null,-1),i(" Voltar")])),_:1})]),t("div",Ae,[t("div",Le,[t("div",Ge,[t("div",Oe,[t("div",null,[e[7]||(e[7]=t("span",{class:"block text-muted-color font-medium mb-4"},"Caixa",-1)),t("small",null,"Aberto ás: "+r(g(x)(c.value.created_at).format("DD-MM-YYYY H:mm")),1),e[8]||(e[8]=i()),e[9]||(e[9]=t("br",null,null,-1)),t("small",null,"Fechado ás: "+r(c.value.closed_at?g(x)(c.value.closed_at).format("DD-MM-YYYY H:mm"):"-"),1),e[10]||(e[10]=i()),e[11]||(e[11]=t("br",null,null,-1)),t("small",null,"Valor Declarado: "+r(c.value.closing_balance)+" MT",1),e[12]||(e[12]=i()),e[13]||(e[13]=t("br",null,null,-1)),t("small",null,"Valor Sistema: "+r(c.value.automatic_closing_balance)+" MT",1),e[14]||(e[14]=i()),e[15]||(e[15]=t("br",null,null,-1)),t("small",null,"Diferenca: "+r(c.value.difference)+" MT",1)])])])]),t("div",Ke,[t("div",We,[t("div",Je,[t("div",null,[e[16]||(e[16]=t("span",{class:"block text-muted-color font-medium mb-4"},"Total de Vendas",-1)),t("div",Xe,r(L.value)+" MT",1)]),e[17]||(e[17]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),t("div",Ze,[t("div",et,[t("div",tt,[t("div",null,[e[18]||(e[18]=t("span",{class:"block text-muted-color font-medium mb-4"},"Pedidos",-1)),t("div",at,r(G.value),1)]),e[19]||(e[19]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),t("div",st,[t("div",lt,[t("div",ot,[t("div",null,[e[20]||(e[20]=t("span",{class:"block text-muted-color font-medium mb-4"},"Ticket Médio",-1)),t("div",it,r(O.value)+" MT",1)]),e[21]||(e[21]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),t("div",rt,[t("div",nt,[t("div",dt,[t("div",null,[e[22]||(e[22]=t("span",{class:"block text-muted-color font-medium mb-4"},"Total Mesas Abertas",-1)),t("div",ut,[t("span",mt,r(K.value),1),t("span",ct,r(J.value)+" MT",1)])]),e[23]||(e[23]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),t("div",pt,[t("div",vt,[t("div",ft,[t("div",null,[e[24]||(e[24]=t("span",{class:"block text-muted-color font-medium mb-4"},"Total Pedidos/Venda Rápido",-1)),t("div",bt,[t("span",yt,r(X.value),1),t("span",gt,r(W.value)+" MT",1)])]),e[25]||(e[25]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])]),t("div",xt,[t("div",_t,[t("div",ht,[t("div",null,[e[27]||(e[27]=t("span",{class:"block text-muted-color font-medium mb-4"},"Total Pagamentos",-1)),t("div",wt,[t("span",kt,r(Z.value),1),e[26]||(e[26]=i("- - ")),t("span",Tt,r(ee.value)+" MT",1)])]),e[28]||(e[28]=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1))])])])]),l(_e,{value:"0"},{default:s(()=>[l(ge,null,{default:s(()=>[l(q,{value:"0"},{default:s(()=>e[29]||(e[29]=[i("Vendas Rápidas")])),_:1}),l(q,{value:"1"},{default:s(()=>e[30]||(e[30]=[i("Vendas em Mesas")])),_:1}),l(q,{value:"2"},{default:s(()=>e[31]||(e[31]=[i("Pagamentos Efetuados")])),_:1})]),_:1}),l(xe,null,{default:s(()=>[l(B,{value:"0"},{default:s(()=>[l(_,{value:E.value.data,paginator:!0,rows:u.value,totalRecords:N.value,dataKey:"id",lazy:!0,rowHover:!0,loading:T.value,first:(M.value-1)*u.value,onPage:pe,showGridlines:""},{header:s(()=>e[32]||(e[32]=[])),empty:s(()=>e[33]||(e[33]=[i("Nenhuma registro encontrado. ")])),loading:s(()=>e[34]||(e[34]=[i(" Carregando, por favor espere. ")])),default:s(()=>[l(d,{header:"ID",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(" #"+r(a.id),1)]),_:1}),l(d,{header:"Pedido",style:{"min-width":"12rem"}},{body:s(({data:a})=>e[35]||(e[35]=[i(" Pedido Rápido ")])),_:1}),l(d,{header:"Garçom",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.user.name),1)]),_:1}),l(d,{header:"Estado",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.status.name),1)]),_:1}),l(d,{header:"Itens",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.itens.length),1)]),_:1}),l(d,{header:"Valor",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.total)+" MT ",1)]),_:1}),l(d,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:s(({data:a})=>[i(r(g(x)(a.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),l(d,{header:"Ações",style:{"min-width":"12rem"}},{body:s(({data:a})=>[t("a",{class:"m-3",href:"#",onClick:ne(he=>te(a),["prevent"])},e[36]||(e[36]=[t("i",{class:"pi pi-eye"},null,-1)]),8,Dt)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1}),l(B,{value:"1"},{default:s(()=>[l(_,{value:H.value.data,paginator:!0,rows:u.value,totalRecords:F.value,dataKey:"id",lazy:!0,rowHover:!0,loading:D.value,first:(C.value-1)*u.value,onPage:ve,showGridlines:""},{header:s(()=>e[37]||(e[37]=[])),empty:s(()=>e[38]||(e[38]=[i("Nenhuma registro encontrado. ")])),loading:s(()=>e[39]||(e[39]=[i(" Carregando, por favor espere. ")])),default:s(()=>[l(d,{header:"ID",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(" #"+r(a.id),1)]),_:1}),l(d,{header:"Pedido",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.table.name),1)]),_:1}),l(d,{header:"Garçom",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.user.name),1)]),_:1}),l(d,{header:"Estado",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.status.name),1)]),_:1}),l(d,{header:"Itens",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.itens.length),1)]),_:1}),l(d,{header:"Valor",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.total)+" MT ",1)]),_:1}),l(d,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:s(({data:a})=>[i(r(g(x)(a.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),l(d,{header:"Ações",style:{"min-width":"12rem"}},{body:s(({data:a})=>[t("a",{class:"m-3",href:"#",onClick:ne(he=>te(a),["prevent"])},e[40]||(e[40]=[t("i",{class:"pi pi-eye"},null,-1)]),8,Pt)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1}),l(B,{value:"2"},{default:s(()=>[l(_,{value:I.value.data,paginator:!0,rows:u.value,totalRecords:Q.value,dataKey:"id",lazy:!0,rowHover:!0,loading:k.value,first:($.value-1)*u.value,onPage:fe,showGridlines:""},{header:s(()=>e[41]||(e[41]=[])),empty:s(()=>e[42]||(e[42]=[i("Nenhuma registro encontrado. ")])),loading:s(()=>e[43]||(e[43]=[i(" Carregando, por favor espere. ")])),default:s(()=>[l(d,{header:"ID",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.id),1)]),_:1}),l(d,{header:"Venda",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(" #"+r(a.order_id),1)]),_:1}),l(d,{header:"Pedido",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.order.table_id==null?"Pedido Rápido":a.order.table.name),1)]),_:1}),l(d,{header:"Metodo de Pagamento",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.method.name),1)]),_:1}),l(d,{header:"Valor",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.amount)+" MT ",1)]),_:1}),l(d,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:s(({data:a})=>[i(r(g(x)(a.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1})]),_:1})]),_:1})])),l(h,{header:"Confirmação",visible:R.value,"onUpdate:visible":e[0]||(e[0]=a=>R.value=a),style:{width:"350px"},modal:!0},{footer:s(()=>[l(v,{label:"Não",icon:"pi pi-times",onClick:se,class:"p-button-text"}),l(v,{label:"Sim",icon:"pi pi-check",onClick:ce,class:"p-button-text",autofocus:""})]),default:s(()=>[e[44]||(e[44]=t("div",{class:"flex align-items-center justify-content-center"},[t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),t("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"]),l(h,{header:"Open File",visible:V.value,"onUpdate:visible":e[2]||(e[2]=a=>V.value=a),style:{width:"30vw"}},{default:s(()=>[e[45]||(e[45]=t("p",null,"Here you can manage your files or perform specific actions.",-1)),l(v,{label:"Close",onClick:e[1]||(e[1]=a=>V.value=!1)})]),_:1},8,["visible"]),l(h,{visible:Y.value,"onUpdate:visible":e[3]||(e[3]=a=>Y.value=a),header:"Recibo",modal:!0,style:{width:"600px"},closable:!1},{footer:s(()=>[l(v,{label:"Imprimir",icon:"pi pi-print",onClick:ue}),l(v,{label:"Fechar",icon:"pi pi-times",class:"p-button-text",onClick:me})]),default:s(()=>[A.value?(f(),y("iframe",{key:0,src:A.value,style:{width:"100%",height:"500px"},frameborder:"0"},null,8,Mt)):Be("",!0)]),_:1},8,["visible"]),l(h,{visible:j.value,"onUpdate:visible":e[4]||(e[4]=a=>j.value=a),header:"Itens do Pedido #",modal:!0,style:{width:"50vw"}},{default:s(()=>[S.value?(f(),Ee(_,{key:0,value:S.value.itens,responsiveLayout:"scroll"},{default:s(()=>[l(d,{header:"Produto",style:{"min-width":"12rem"}},{body:s(({data:a})=>[i(r(a.product.name),1)]),_:1}),l(d,{header:"Quantidade",style:{"min-width":"8rem"}},{body:s(({data:a})=>[i(r(a.quantity),1)]),_:1}),l(d,{header:"Preço Unitário",style:{"min-width":"8rem"}},{body:s(({data:a})=>[i(r(a.price)+" MT",1)]),_:1}),l(d,{header:"Total",style:{"min-width":"8rem"}},{body:s(({data:a})=>[i(r(a.total)+" MT",1)]),_:1})]),_:1},8,["value"])):(f(),y("p",Ct,"Nenhum item encontrado para este pedido."))]),_:1},8,["visible"])],64)}}};export{ia as default};
