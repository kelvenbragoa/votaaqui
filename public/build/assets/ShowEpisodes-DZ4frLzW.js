import{s as z}from"./index-DNDA8ZK3.js";import{s as L}from"./index-CJcCUMsT.js";import{s as J}from"./index-B3elP_jc.js";import{s as M}from"./index-uCsGFjGb.js";import{a as I}from"./index-BBEtc1xv.js";import{s as G}from"./index-D4BDpfsY.js";import{s as U}from"./index-CSFnfhp6.js";import{s as W}from"./index-DNRZcg5a.js";import{_ as q,x as H,r as m,o as K,c as a,b as s,B as h,m as d,d as r,t as n,h as u,w as v,F as w,f as E,j,l,aM as O,u as Q}from"./app-DuMqQ7Hz.js";import"./index-CfGU8b1Y.js";import"./index-C0fUMy5p.js";const X={class:"grid"},Y={class:"col-12"},Z={class:"card"},ss={class:"flex justify-content-between align-items-center mb-4"},ts={class:"flex gap-2"},es={key:0,class:"text-center p-4"},os={key:1},is={class:"grid mb-4"},ls={class:"col-12"},as={class:"surface-card p-4 border-round shadow-2"},ns={class:"flex justify-content-between align-items-start mb-3"},rs={class:"text-primary m-0 mb-2"},ds={class:"m-0 mb-2"},cs={class:"text-right"},us={class:"text-sm text-500 mt-2"},vs={class:"grid"},ps={class:"col-12 md:col-6"},ms={class:"ml-4 mb-3"},_s={key:0,class:"col-12 md:col-6"},fs={class:"ml-4 mb-1"},bs={class:"ml-4 mb-3"},gs={key:1,class:"col-12"},hs={class:"ml-4 mb-3"},xs={key:2,class:"col-12"},ys={class:"ml-4 mb-0"},ws={key:0,class:"grid mb-4"},ks={class:"col-12"},$s={class:"surface-card p-4 border-round shadow-2"},Vs={class:"grid"},Es={class:"col-12 md:col-6"},js={class:"text-center p-3 border-round surface-100"},Ds={class:"m-0 text-primary"},Cs={class:"col-12 md:col-6"},Ss={class:"text-center p-3 border-round surface-100"},Ps={class:"m-0 text-primary"},Bs={key:0,class:"mt-3"},As={key:1,class:"mt-3"},Fs={key:2,class:"mt-3"},Rs={class:"grid mb-4"},Ts={class:"col-12"},Ns={class:"surface-card p-4 border-round shadow-2"},zs={class:"flex justify-content-between align-items-center mb-3"},Ls={class:"text-primary m-0"},Js={key:0,class:"text-center p-4 text-600"},Ms={key:1,class:"grid"},Is={class:"surface-100 p-3 border-round"},Gs={class:"flex align-items-center"},Us={class:"flex-1"},Ws={class:"m-0 mb-1"},qs={class:"m-0 text-600 text-sm"},Hs={key:1,class:"grid"},Ks={class:"col-12"},Os={class:"surface-card p-4 border-round shadow-2"},Qs={class:"flex justify-content-between align-items-center mb-3"},Xs={class:"grid"},Ys={class:"col-12 md:col-4"},Zs={class:"text-center p-3 border-round surface-100"},st={class:"m-0 text-900"},tt={class:"col-12 md:col-4"},et={class:"text-center p-3 border-round surface-100"},ot={class:"m-0 text-900"},it={class:"col-12 md:col-4"},lt={class:"text-center p-3 border-round surface-100"},at={class:"m-0 text-900"},nt={key:0,class:"mt-4"},rt={class:"flex justify-content-center"},dt={key:2,class:"text-center p-4"},ct={key:0},ut={class:"grid"},vt={class:"surface-100 p-3 border-round mb-3"},pt={class:"flex justify-content-between align-items-center"},mt={class:"flex align-items-center"},_t={class:"m-0 mb-1"},ft={class:"flex gap-2"},bt={class:"text-right"},gt={class:"m-0 text-primary"},ht={class:"mt-2"},xt={class:"w-full surface-300 border-round overflow-hidden",style:{height:"8px"}},yt={__name:"ShowEpisodes",setup(wt){const k=Q(),D=H(),_=m(!0),e=m(null),f=m([]),b=m(!1),x=m(null),$=async()=>{_.value=!0;try{const o=await j.get(`/api/web/episodes/${k.params.id}`);o.data.success&&(e.value=o.data.data,f.value=e.value.participants||[],e.value.status==="finished"&&e.value.voting_open&&await C())}catch{D.add({severity:"error",summary:"Erro",detail:"Erro ao carregar episódio",life:3e3})}finally{_.value=!1}},C=async()=>{try{const o=await j.get(`/api/web/episodes/${k.params.id}/results`);o.data.success&&(x.value=o.data.data)}catch(o){console.error("Erro ao carregar resultados:",o)}},S=o=>new Date(o).toLocaleDateString("pt-BR"),y=o=>new Date(o).toLocaleString("pt-BR"),P=o=>({scheduled:"Agendado",live:"Ao Vivo",finished:"Finalizado"})[o]||o,B=o=>({scheduled:"info",live:"success",finished:"secondary"})[o]||"info",A=o=>({elimination:"Eliminação",finale:"Final",special:"Especial",audition:"Audição"})[o]||o;return K(()=>{$()}),(o,t)=>{const c=W,F=U,p=G,R=I,g=M,V=J,T=L,N=z;return l(),a(w,null,[s("div",X,[s("div",Y,[s("div",Z,[s("div",ss,[t[6]||(t[6]=s("h5",{class:"m-0"},"Detalhes do Episódio",-1)),s("div",ts,[e.value&&e.value.status!=="finished"?(l(),h(c,{key:0,label:"Editar",icon:"pi pi-pencil",class:"p-button-outlined",onClick:t[0]||(t[0]=i=>o.$router.push(`/admin/episodes/${e.value.id}/edit`))})):d("",!0),r(c,{label:"Voltar",icon:"pi pi-arrow-left",class:"p-button-outlined",onClick:t[1]||(t[1]=i=>o.$router.push("/admin/episodes"))})])]),_.value?(l(),a("div",es,[r(F),t[7]||(t[7]=s("p",null,"Carregando episódio...",-1))])):e.value?(l(),a("div",os,[s("div",is,[s("div",ls,[s("div",as,[s("div",ns,[s("div",null,[s("h6",rs,"Episódio #"+n(e.value.episode_number),1),s("h4",ds,n(e.value.title),1),r(p,{value:P(e.value.status),severity:B(e.value.status)},null,8,["value","severity"])]),s("div",cs,[r(R,{value:A(e.value.episode_type),class:"mr-2"},null,8,["value"]),s("div",us," Criado em "+n(S(e.value.created_at)),1)])]),s("div",vs,[s("div",ps,[t[8]||(t[8]=s("div",{class:"flex align-items-center mb-2"},[s("i",{class:"pi pi-calendar text-primary mr-2"}),s("strong",null,"Data de Transmissão:")],-1)),s("p",ms,n(y(e.value.air_date)),1)]),e.value.voting_open?(l(),a("div",_s,[t[11]||(t[11]=s("div",{class:"flex align-items-center mb-2"},[s("i",{class:"pi pi-clock text-primary mr-2"}),s("strong",null,"Período de Votação:")],-1)),s("p",fs,[t[9]||(t[9]=s("strong",null,"Início:",-1)),u(" "+n(y(e.value.voting_start)),1)]),s("p",bs,[t[10]||(t[10]=s("strong",null,"Fim:",-1)),u(" "+n(y(e.value.voting_end)),1)])])):d("",!0),e.value.description?(l(),a("div",gs,[t[12]||(t[12]=s("div",{class:"flex align-items-center mb-2"},[s("i",{class:"pi pi-align-left text-primary mr-2"}),s("strong",null,"Descrição:")],-1)),s("p",hs,n(e.value.description),1)])):d("",!0),e.value.notes?(l(),a("div",xs,[t[13]||(t[13]=s("div",{class:"flex align-items-center mb-2"},[s("i",{class:"pi pi-bookmark text-primary mr-2"}),s("strong",null,"Notas:")],-1)),s("p",ys,n(e.value.notes),1)])):d("",!0)])])])]),e.value.voting_open?(l(),a("div",ws,[s("div",ks,[s("div",$s,[t[21]||(t[21]=s("h6",{class:"text-primary mb-3"},"Configurações de Votação",-1)),s("div",Vs,[s("div",Es,[s("div",js,[t[14]||(t[14]=s("i",{class:"pi pi-users text-4xl text-primary mb-2"},null,-1)),s("h3",Ds,n(e.value.jury_weight)+"%",1),t[15]||(t[15]=s("p",{class:"m-0 text-600"},"Peso do Júri",-1))])]),s("div",Cs,[s("div",Ss,[t[16]||(t[16]=s("i",{class:"pi pi-heart text-4xl text-primary mb-2"},null,-1)),s("h3",Ps,n(e.value.public_weight)+"%",1),t[17]||(t[17]=s("p",{class:"m-0 text-600"},"Peso Público",-1))])])]),e.value.voting_active?(l(),a("div",Bs,[r(g,{severity:"success",class:"w-full"},{default:v(()=>t[18]||(t[18]=[s("i",{class:"pi pi-check-circle"},null,-1),u(" Votação está ativa neste momento ")])),_:1})])):e.value.voting_ended?(l(),a("div",As,[r(g,{severity:"info",class:"w-full"},{default:v(()=>t[19]||(t[19]=[s("i",{class:"pi pi-info-circle"},null,-1),u(" Período de votação encerrado ")])),_:1})])):(l(),a("div",Fs,[r(g,{severity:"warn",class:"w-full"},{default:v(()=>t[20]||(t[20]=[s("i",{class:"pi pi-clock"},null,-1),u(" Votação ainda não iniciada ")])),_:1})]))])])])):d("",!0),s("div",Rs,[s("div",Ts,[s("div",Ns,[s("div",zs,[s("h6",Ls,"Participantes ("+n(f.value.length)+")",1),e.value.status!=="finished"?(l(),h(c,{key:0,label:"Gerenciar Participantes",icon:"pi pi-users",class:"p-button-outlined p-button-sm",onClick:t[2]||(t[2]=i=>o.$router.push(`/admin/episodes/${e.value.id}/edit`))})):d("",!0)]),f.value.length===0?(l(),a("div",Js,t[22]||(t[22]=[s("i",{class:"pi pi-users text-4xl mb-3"},null,-1),s("p",null,"Nenhum participante vinculado a este episódio",-1)]))):(l(),a("div",Ms,[(l(!0),a(w,null,E(f.value,i=>(l(),a("div",{key:i.id,class:"col-12 md:col-6 lg:col-4"},[s("div",Is,[s("div",Gs,[r(V,{image:i.photo_url,label:i.name.charAt(0),size:"large",shape:"circle",class:"mr-3"},null,8,["image","label"]),s("div",Us,[s("h6",Ws,n(i.name),1),s("p",qs,n(i.age)+" anos",1),i.pivot&&i.pivot.eliminated_at?(l(),h(p,{key:0,value:"Eliminado",severity:"danger",class:"mt-1"})):i.active?(l(),h(p,{key:1,value:"Ativo",severity:"success",class:"mt-1"})):d("",!0)])])])]))),128))]))])])]),e.value.voting_open&&(e.value.public_votes_count>0||e.value.judge_votes_count>0)?(l(),a("div",Hs,[s("div",Ks,[s("div",Os,[s("div",Qs,[t[23]||(t[23]=s("h6",{class:"text-primary m-0"},"Estatísticas de Votação",-1)),r(c,{label:"Atualizar",icon:"pi pi-refresh",class:"p-button-outlined p-button-sm",onClick:$,loading:_.value},null,8,["loading"])]),s("div",Xs,[s("div",Ys,[s("div",Zs,[t[24]||(t[24]=s("i",{class:"pi pi-heart-fill text-4xl text-red-500 mb-2"},null,-1)),s("h3",st,n(e.value.public_votes_count||0),1),t[25]||(t[25]=s("p",{class:"m-0 text-600"},"Votos Público",-1))])]),s("div",tt,[s("div",et,[t[26]||(t[26]=s("i",{class:"pi pi-star-fill text-4xl text-yellow-500 mb-2"},null,-1)),s("h3",ot,n(e.value.judge_votes_count||0),1),t[27]||(t[27]=s("p",{class:"m-0 text-600"},"Votos Júri",-1))])]),s("div",it,[s("div",lt,[t[28]||(t[28]=s("i",{class:"pi pi-chart-bar text-4xl text-green-500 mb-2"},null,-1)),s("h3",at,n((e.value.public_votes_count||0)+(e.value.judge_votes_count||0)),1),t[29]||(t[29]=s("p",{class:"m-0 text-600"},"Total de Votos",-1))])])]),e.value.status==="finished"?(l(),a("div",nt,[r(T),s("div",rt,[r(c,{label:"Ver Resultados Detalhados",icon:"pi pi-chart-pie",class:"p-button-success",onClick:t[3]||(t[3]=i=>b.value=!0)})])])):d("",!0)])])])):d("",!0)])):(l(),a("div",dt,[r(g,{severity:"error",class:"w-full"},{default:v(()=>t[30]||(t[30]=[u(" Episódio não encontrado ")])),_:1})]))])])]),r(N,{visible:b.value,"onUpdate:visible":t[5]||(t[5]=i=>b.value=i),style:{width:"90vw",maxWidth:"800px"},header:"Resultados da Votação",modal:!0,class:"p-fluid"},{footer:v(()=>[r(c,{label:"Fechar",icon:"pi pi-times",onClick:t[4]||(t[4]=i=>b.value=!1),class:"p-button-outlined"})]),default:v(()=>[x.value?(l(),a("div",ct,[s("div",ut,[(l(!0),a(w,null,E(x.value,i=>(l(),a("div",{class:"col-12",key:i.participant_id},[s("div",vt,[s("div",pt,[s("div",mt,[r(V,{image:i.participant_photo,label:i.participant_name.charAt(0),size:"large",shape:"circle",class:"mr-3"},null,8,["image","label"]),s("div",null,[s("h6",_t,n(i.participant_name),1),s("div",ft,[r(p,{value:"Público",severity:"info"}),s("span",null,n(i.public_votes)+" votos",1),r(p,{value:"Júri",severity:"warning"}),s("span",null,n(i.judge_votes)+" votos",1)])])]),s("div",bt,[s("h4",gt,n(i.total_score.toFixed(2))+"%",1),t[31]||(t[31]=s("p",{class:"m-0 text-600 text-sm"},"Score Final",-1))])]),s("div",ht,[s("div",xt,[s("div",{class:"bg-primary h-full border-round transition-all transition-duration-300",style:O({width:i.total_score+"%"})},null,4)])])])]))),128))])])):d("",!0)]),_:1},8,["visible"])],64)}}},Ft=q(yt,[["__scopeId","data-v-3016490f"]]);export{Ft as default};
