import{s as O,a as Q}from"./index-BO4gTK7C.js";import{s as W}from"./index-ChNyJrCk.js";import{s as Z}from"./index-CnszjjtJ.js";import{s as J}from"./index-CDqNT4St.js";import{s as X}from"./index-Ck0pw5nd.js";import{s as ee}from"./index-Bob9nuhE.js";import{s as te}from"./index-BAOFFhWA.js";import{s as ae}from"./index-DzcF86oG.js";import{s as oe}from"./index-o3qi-ec1.js";import{u as le,r as d,w as se,o as re,c as S,a as o,b as a,e as l,d as s,t as r,g,F as ie,f as V,R as ne,k as de}from"./app-DrVY5UIB.js";import{d as ue,h as P}from"./moment-CQ1ixRO1.js";import"./index-BnfWDIPH.js";import"./index-OUojj5W6.js";import"./index--EEhPIfl.js";import"./index-BCrV5xA7.js";import"./index-LzfBnFcQ.js";import"./index-CZNYUL1o.js";import"./index-BYCe9Ecl.js";import"./index-CTfp0x3z.js";import"./index-DytjaMpk.js";import"./index-BAE_mEon.js";import"./index-DuQbNip_.js";import"./index-QlbquBzF.js";import"./index-3epIZWS7.js";import"./index-BovvML42.js";import"./index-CpYWlWMi.js";import"./index-pZUdUnUT.js";const me={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},pe={class:"w-full"},ce={class:"flex flex-col gap-4 text-center"},fe={key:1,class:"flex flex-col md:flex-row gap-12"},ve={class:"w-full"},ye={class:"card flex flex-col gap-4"},ge={class:"w-full"},be={class:"card"},we={class:"flex justify-between"},Oe={__name:"ShowTables",setup(he){const b=de(),w=le();d(null);const m=d(!0),h=d(!1);let $=d(null);const y=d(""),u=d(null),R=d(null),p=d(1),c=d(15),x=d(0),_=d(!1),C=getComputedStyle(document.documentElement),H=C.getPropertyValue("--surface-border"),Y=C.getPropertyValue("--text-color-primary"),U=C.getPropertyValue("--p-button-primary-background"),k=d({labels:[],datasets:[{label:"Consumo Mensal",backgroundColor:U,data:[]}]}),j={maintainAspectRatio:!1,aspectRatio:.8,scales:{x:{stacked:!0,ticks:{color:Y.trim()},grid:{color:"transparent",borderColor:"transparent"}},y:{stacked:!0,ticks:{color:Y.trim()},grid:{color:H.trim(),borderColor:"transparent",drawTicks:!1}}}};function T(){b&&b.back()}const D=()=>{_.value=!1};function B(i){switch(i){case 1:return"success";case 2:return"danger";case 3:return"warn";case 4:return"danger";case 5:return"info";case 6:return"info"}}const M=async(i=1)=>{axios.get(`/api/tables/${b.currentRoute.value.params.id}`,{params:{query:y.value}}).then(e=>{u.value=e.data.table,R.value=e.data.logs,x.value=e.data.logs.total,k.value.labels=e.data.chart.map(f=>f.month_name),k.value.datasets[0].data=e.data.chart.map(f=>f.total),m.value=!1}).catch(e=>{m.value=!1,w.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),T()})},N=()=>{h.value=!0,axios.delete(`/api/tables/${$.value}`).then(()=>{u.value.data=u.value.data.filter(i=>i.id!==$.value),D(),w.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(i=>{w.add({severity:"error",summary:"Erro",detail:`${i}`,life:3e3}),h.value=!1}).finally(()=>{h.value=!1})},E=i=>{p.value=i.page+1,c.value=i.rows,M(p.value)},z=ue(()=>{M(p.value)},300);return se(y,z),re(()=>{M()}),(i,e)=>{const f=oe,v=ae,I=te,F=ee,n=X,L=J,A=Z,q=O,G=W,K=Q;return V(),S(ie,null,[m.value?(V(),S("div",me,[o("div",pe,[o("div",ce,[a(f,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[3]||(e[3]=o("p",null,"Por Favor Aguarde...",-1))])])])):(V(),S("div",fe,[o("div",ve,[o("div",ye,[o("div",ge,[a(v,{label:"Voltar",class:"mr-2 mb-2",onClick:T},{default:l(()=>e[4]||(e[4]=[o("i",{class:"pi pi-angle-left"},null,-1),s(" Voltar")])),_:1})]),e[13]||(e[13]=o("div",{class:"font-semibold text-xl"},"Mesa",-1)),o("p",null,[e[5]||(e[5]=o("strong",null,"Mesa:",-1)),s(" "+r(u.value.name),1)]),o("p",null,[e[6]||(e[6]=o("strong",null,"Capacidade:",-1)),s(" "+r(u.value.capacity),1)]),o("p",null,[e[7]||(e[7]=o("strong",null,"Limite Mensal:",-1)),s(" "+r(u.value.monthly_limit)+" MT ",1)]),o("p",null,[e[8]||(e[8]=o("strong",null,"Estado:",-1)),a(I,{value:u.value.status.name,severity:B(u.value.status_id)},null,8,["value","severity"])]),o("p",null,[e[9]||(e[9]=o("strong",null,"Data:",-1)),s(" "+r(g(P)(u.value.created_at).format("DD-MM-YYYY H:mm")),1)]),e[14]||(e[14]=o("hr",null,null,-1)),o("div",be,[e[10]||(e[10]=o("div",{class:"font-semibold text-xl mb-4"},"Consumo Mensal",-1)),a(F,{type:"bar",data:k.value,options:j,class:"h-80"},null,8,["data"])]),e[15]||(e[15]=o("hr",null,null,-1)),a(L,{value:R.value.data,paginator:!0,rows:c.value,totalRecords:x.value,dataKey:"id",lazy:!0,rowHover:!0,loading:m.value,first:(p.value-1)*c.value,onPage:E,showGridlines:""},{empty:l(()=>e[11]||(e[11]=[s("Nenhuma registro encontrado. ")])),loading:l(()=>e[12]||(e[12]=[s(" Carregando, por favor espere. ")])),default:l(()=>[a(n,{header:"ID",style:{"min-width":"12rem"}},{body:l(({data:t})=>[s(r(t.id),1)]),_:1}),a(n,{header:"Limite Anterior",style:{"min-width":"12rem"}},{body:l(({data:t})=>[s(r(t.old_limit),1)]),_:1}),a(n,{header:"Limite Atual",style:{"min-width":"12rem"}},{body:l(({data:t})=>[s(r(t.new_limit),1)]),_:1}),a(n,{header:"Usuario",style:{"min-width":"12rem"}},{body:l(({data:t})=>[s(r(t.user.name),1)]),_:1}),a(n,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:l(({data:t})=>[s(r(g(P)(t.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])])])])),a(A,{header:"Confirmação",visible:_.value,"onUpdate:visible":e[0]||(e[0]=t=>_.value=t),style:{width:"350px"},modal:!0},{footer:l(()=>[a(v,{label:"Não",icon:"pi pi-times",onClick:D,class:"p-button-text"}),a(v,{label:"Sim",icon:"pi pi-check",onClick:N,class:"p-button-text",autofocus:""})]),default:l(()=>[e[16]||(e[16]=o("div",{class:"flex align-items-center justify-content-center"},[o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),o("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"]),a(A,{header:"Vendas",visible:i.displayConfirmationSales,"onUpdate:visible":e[2]||(e[2]=t=>i.displayConfirmationSales=t),style:{width:"350px"},modal:!0},{footer:l(()=>[a(v,{label:"Não",icon:"pi pi-times",onClick:D,class:"p-button-text"}),a(v,{label:"Sim",icon:"pi pi-check",onClick:N,class:"p-button-text",autofocus:""})]),default:l(()=>[a(L,{value:u.value.data,paginator:!0,rows:c.value,totalRecords:x.value,dataKey:"id",lazy:!0,rowHover:!0,loading:m.value,first:(p.value-1)*c.value,onPage:E,showGridlines:""},{header:l(()=>[o("div",we,[a(K,null,{default:l(()=>[a(q,null,{default:l(()=>e[17]||(e[17]=[o("i",{class:"pi pi-search"},null,-1)])),_:1}),a(G,{modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=t=>y.value=t),placeholder:"Pesquisa"},null,8,["modelValue"])]),_:1})])]),empty:l(()=>e[18]||(e[18]=[s("Nenhuma registro encontrado. ")])),loading:l(()=>e[19]||(e[19]=[s(" Carregando, por favor espere. ")])),default:l(()=>[a(n,{header:"ID",style:{"min-width":"12rem"}},{body:l(({data:t})=>[s(r(t.id),1)]),_:1}),a(n,{header:"Valor",style:{"min-width":"12rem"}},{body:l(({data:t})=>[s(" MZN "+r(t.total),1)]),_:1}),a(n,{header:"Mesa",style:{"min-width":"12rem"}},{body:l(({data:t})=>[s(r(t.table?t.table.name:"Venda Rápida"),1)]),_:1}),a(n,{header:"Estado da Encomenda",style:{"min-width":"12rem"}},{body:l(({data:t})=>[a(I,{value:t.status.name,severity:B(t.order_status_id)},null,8,["value","severity"])]),_:1}),a(n,{header:"Efetuada por",style:{"min-width":"12rem"}},{body:l(({data:t})=>[s(r(t.user.name),1)]),_:1}),a(n,{header:"Data",dataType:"date",style:{"min-width":"10rem"}},{body:l(({data:t})=>[s(r(g(P)(t.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),a(n,{header:"Ações",style:{"min-width":"12rem"}},{body:l(({data:t})=>[a(g(ne),{class:"m-3",to:"/admin/orders/"+t.id},{default:l(()=>e[20]||(e[20]=[o("i",{class:"pi pi-eye"},null,-1)])),_:2},1032,["to"])]),_:1})]),_:1},8,["value","rows","totalRecords","loading","first"])]),_:1},8,["visible"])],64)}}};export{Oe as default};
