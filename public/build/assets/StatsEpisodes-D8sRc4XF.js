import{s as G}from"./index-5NlH-buo.js";import{s as Q}from"./index-BWkqIMYe.js";import{s as W}from"./index-NLyvc_C9.js";import{s as X}from"./index-BM5Ksusm.js";import{s as Y}from"./index-BALpCQHV.js";import{s as tt}from"./index-CHCJEpqU.js";import{s as st}from"./index-f0uYfb0h.js";import{s as et}from"./index-cnl34PeR.js";import{s as ot}from"./index-D3aWgD_j.js";import{s as at}from"./index-J2AfLYEW.js";import{s as it}from"./index-D3dibykF.js";import{_ as lt,x as rt,r as c,y as C,o as nt,c as d,b as t,d as i,t as a,C as dt,m,F as ct,f as ut,w as u,j as pt,l as n,h as v,s as $,a2 as mt,u as vt}from"./app-DIymDWP7.js";import"./index-BmOqLsRc.js";import"./index-Cl3NaGVK.js";import"./index-CxgXACXu.js";import"./index-Dg9DzAxn.js";import"./index-DAjVCkKq.js";import"./index-JAn7prKR.js";import"./index-X2KG-qqn.js";import"./index-I1XBC8jC.js";import"./index-DZVlAiCh.js";import"./index-BkkEA2dX.js";import"./index-B8St55bI.js";import"./index-Av_1auWd.js";import"./index-_VrzUoxO.js";import"./index-Bsf1u9FP.js";import"./index-WBaCH7zm.js";import"./index-fVX7yaxY.js";const _t={class:"grid"},gt={class:"col-12"},bt={class:"card"},ht={class:"flex justify-content-between align-items-center mb-4"},ft={class:"flex gap-2"},xt={key:0,class:"text-center p-4"},yt={key:1},Ft={class:"grid mb-4"},wt={class:"col-12"},Ct={class:"surface-card p-4 border-round shadow-2"},Vt={class:"flex justify-content-between align-items-center mb-3"},jt={class:"text-primary m-0 mb-2"},kt={class:"m-0 mb-2"},At={class:"flex gap-2 align-items-center"},Dt={class:"text-right"},St={class:"text-sm text-500"},$t={key:0,class:"text-sm text-500 mt-1"},Bt={class:"grid mb-4"},Et={class:"col-12 md:col-3"},Tt={class:"surface-card p-3 border-round text-center"},Mt={class:"m-0 text-900"},Nt={class:"col-12 md:col-3"},Pt={class:"surface-card p-3 border-round text-center"},Lt={class:"m-0 text-900"},Rt={class:"col-12 md:col-3"},zt={class:"surface-card p-3 border-round text-center"},Jt={class:"m-0 text-900"},It={class:"col-12 md:col-3"},Ot={class:"surface-card p-3 border-round text-center"},Ht={class:"m-0 text-900"},qt={key:0,class:"grid mb-4"},Kt={class:"col-12"},Ut={class:"surface-card p-4 border-round shadow-2"},Zt={class:"grid"},Gt={class:"col-12 md:col-6"},Qt={class:"text-center p-3 border-round surface-100"},Wt={class:"m-0 text-primary"},Xt={class:"col-12 md:col-6"},Yt={class:"text-center p-3 border-round surface-100"},ts={class:"m-0 text-primary"},ss={key:1,class:"grid mb-4"},es={class:"col-12"},os={class:"surface-card p-4 border-round shadow-2"},as={class:"grid"},is={class:"surface-100 p-3 border-round mb-3"},ls={class:"flex justify-content-between align-items-center"},rs={class:"flex align-items-center"},ns={class:"flex align-items-center justify-content-center bg-primary text-white border-round mr-3",style:{width:"30px",height:"30px","font-weight":"bold"}},ds={class:"m-0 mb-1"},cs={class:"flex gap-3 text-sm"},us={class:"text-right"},ps={class:"m-0 text-primary"},ms={class:"mt-3"},vs={class:"flex justify-content-between text-sm mb-1"},_s={class:"w-full surface-300 border-round overflow-hidden",style:{height:"8px"}},gs={key:2,class:"grid mb-4"},bs={class:"col-12"},hs={class:"surface-card p-4 border-round shadow-2"},fs={key:3,class:"grid mb-4"},xs={class:"col-12"},ys={class:"surface-card p-4 border-round shadow-2"},Fs={class:"flex justify-content-between"},ws={class:"p-input-icon-left"},Cs={class:"flex align-items-center"},Vs={class:"flex align-items-center"},js={class:"flex align-items-center"},ks={class:"flex align-items-center"},As={class:"font-bold"},Ds={class:"flex align-items-center justify-content-center"},Ss={key:4,class:"grid"},$s={class:"col-12 md:col-6"},Bs={class:"surface-card p-4 border-round shadow-2"},Es={class:"col-12 md:col-6"},Ts={class:"surface-card p-4 border-round shadow-2"},Ms={key:2,class:"text-center p-4"},Ns={__name:"StatsEpisodes",setup(Ps){const B={CONTAINS:"contains"},E=vt(),T=rt(),g=c(!0),l=c(null),b=c({}),r=c([]),p=c([]),f=c([]),y=c({global:{value:null,matchMode:B.CONTAINS}}),V=c({plugins:{legend:{position:"bottom"}},responsive:!0,maintainAspectRatio:!1}),M=c({plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}),N=C(()=>!r.value||r.value.length===0?{}:{labels:r.value.map(e=>e.participant_name),datasets:[{data:r.value.map(e=>e.public_votes),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FF6384","#C9CBCF"]}]}),P=C(()=>!r.value||r.value.length===0?{}:{labels:r.value.map(e=>e.participant_name),datasets:[{data:r.value.map(e=>e.judge_average),backgroundColor:["#FFD700","#FFA500","#FF8C00","#FF7F50","#FF6347","#FF4500","#DC143C","#B22222"]}]}),L=C(()=>!p.value||p.value.length===0?{}:{labels:p.value.map(e=>`${e.hour}:00`),datasets:[{label:"Votos por Hora",data:p.value.map(e=>e.votes),borderColor:"#42A5F5",backgroundColor:"rgba(66, 165, 245, 0.1)",tension:.4,fill:!0}]}),j=async()=>{g.value=!0;try{const e=await pt.get(`/api/web/episodes/${E.params.id}/stats`);if(e.data.success){const s=e.data.data;l.value=s.episode,b.value=s.statistics,r.value=s.voting_results||[],p.value=s.voting_timeline||[],f.value=r.value.map((h,F)=>({...h,position:F+1}))}}catch{T.add({severity:"error",summary:"Erro",detail:"Erro ao carregar estatísticas",life:3e3})}finally{g.value=!1}},R=()=>{y.value.global.value=null},z=e=>new Date(e).toLocaleDateString("pt-BR"),k=e=>new Date(e).toLocaleString("pt-BR"),J=e=>({scheduled:"Agendado",live:"Ao Vivo",finished:"Finalizado"})[e]||e,I=e=>({scheduled:"info",live:"success",finished:"secondary"})[e]||"info",O=e=>({elimination:"Eliminação",finale:"Final",special:"Especial",audition:"Audição"})[e]||e,H=e=>e===1?"bg-yellow-500":e===2?"bg-gray-400":e===3?"bg-orange-600":"bg-primary";return nt(()=>{j()}),(e,s)=>{const h=it,F=at,A=ot,D=et,S=st,w=tt,q=Y,_=X,K=W,U=Q,Z=G;return n(),d("div",_t,[t("div",gt,[t("div",bt,[t("div",ht,[s[3]||(s[3]=t("h5",{class:"m-0"},"Estatísticas do Episódio",-1)),t("div",ft,[i(h,{label:"Atualizar Dados",icon:"pi pi-refresh",class:"p-button-outlined",onClick:j,loading:g.value},null,8,["loading"]),i(h,{label:"Voltar",icon:"pi pi-arrow-left",class:"p-button-outlined",onClick:s[0]||(s[0]=o=>e.$router.push("/admin/episodes"))})])]),g.value?(n(),d("div",xt,[i(F),s[4]||(s[4]=t("p",null,"Carregando estatísticas...",-1))])):l.value?(n(),d("div",yt,[t("div",Ft,[t("div",wt,[t("div",Ct,[t("div",Vt,[t("div",null,[t("h6",jt,"Episódio #"+a(l.value.episode_number),1),t("h4",kt,a(l.value.title),1),t("div",At,[i(A,{value:J(l.value.status),severity:I(l.value.status)},null,8,["value","severity"]),i(D,{value:O(l.value.episode_type),class:"mr-2"},null,8,["value"]),l.value.voting_open?(n(),dt(A,{key:0,value:"Votação Ativa",severity:"success"})):m("",!0)])]),t("div",Dt,[t("div",St," Transmitido em "+a(z(l.value.air_date)),1),l.value.voting_open?(n(),d("div",$t," Votação: "+a(k(l.value.voting_start))+" - "+a(k(l.value.voting_end)),1)):m("",!0)])])])])]),t("div",Bt,[t("div",Et,[t("div",Tt,[s[5]||(s[5]=t("i",{class:"pi pi-users text-4xl text-blue-500 mb-2"},null,-1)),t("h3",Mt,a(b.value.total_participants||0),1),s[6]||(s[6]=t("p",{class:"m-0 text-600"},"Participantes",-1))])]),t("div",Nt,[t("div",Pt,[s[7]||(s[7]=t("i",{class:"pi pi-heart-fill text-4xl text-red-500 mb-2"},null,-1)),t("h3",Lt,a(b.value.total_public_votes||0),1),s[8]||(s[8]=t("p",{class:"m-0 text-600"},"Votos Público",-1))])]),t("div",Rt,[t("div",zt,[s[9]||(s[9]=t("i",{class:"pi pi-star-fill text-4xl text-yellow-500 mb-2"},null,-1)),t("h3",Jt,a(b.value.total_judge_votes||0),1),s[10]||(s[10]=t("p",{class:"m-0 text-600"},"Votos Júri",-1))])]),t("div",It,[t("div",Ot,[s[11]||(s[11]=t("i",{class:"pi pi-eye text-4xl text-green-500 mb-2"},null,-1)),t("h3",Ht,a(b.value.unique_voters||0),1),s[12]||(s[12]=t("p",{class:"m-0 text-600"},"Espectadores Únicos",-1))])])]),l.value.voting_open?(n(),d("div",qt,[t("div",Kt,[t("div",Ut,[s[17]||(s[17]=t("h6",{class:"text-primary mb-3"},"Configurações de Votação",-1)),t("div",Zt,[t("div",Gt,[t("div",Qt,[s[13]||(s[13]=t("i",{class:"pi pi-users text-3xl text-primary mb-2"},null,-1)),t("h3",Wt,a(l.value.jury_weight)+"%",1),s[14]||(s[14]=t("p",{class:"m-0 text-600"},"Peso do Júri",-1))])]),t("div",Xt,[t("div",Yt,[s[15]||(s[15]=t("i",{class:"pi pi-heart text-3xl text-primary mb-2"},null,-1)),t("h3",ts,a(l.value.public_weight)+"%",1),s[16]||(s[16]=t("p",{class:"m-0 text-600"},"Peso Público",-1))])])])])])])):m("",!0),r.value&&r.value.length>0?(n(),d("div",ss,[t("div",es,[t("div",os,[s[23]||(s[23]=t("h6",{class:"text-primary mb-3"},"Resultados da Votação",-1)),t("div",as,[(n(!0),d(ct,null,ut(r.value,(o,x)=>(n(),d("div",{key:o.participant_id,class:"col-12"},[t("div",is,[t("div",ls,[t("div",rs,[t("div",ns,a(x+1),1),i(S,{image:o.participant_photo,label:o.participant_name.charAt(0),size:"large",shape:"circle",class:"mr-3"},null,8,["image","label"]),t("div",null,[t("h6",ds,a(o.participant_name),1),t("div",cs,[t("span",null,[s[18]||(s[18]=t("i",{class:"pi pi-heart text-red-500 mr-1"},null,-1)),v(" "+a(o.public_votes)+" votos público ",1)]),t("span",null,[s[19]||(s[19]=t("i",{class:"pi pi-star text-yellow-500 mr-1"},null,-1)),v(" "+a(o.judge_votes)+" votos júri ",1)]),t("span",null,[s[20]||(s[20]=t("i",{class:"pi pi-chart-bar text-blue-500 mr-1"},null,-1)),v(" Média: "+a(o.judge_average.toFixed(2)),1)])])])]),t("div",us,[t("h4",ps,a(o.total_score.toFixed(2))+"%",1),s[21]||(s[21]=t("p",{class:"m-0 text-600 text-sm"},"Score Final",-1))])]),t("div",ms,[t("div",vs,[s[22]||(s[22]=t("span",null,"Progresso de Votação",-1)),t("span",null,a(o.total_score.toFixed(1))+"%",1)]),t("div",_s,[t("div",{class:$(["h-full border-round transition-all transition-duration-300",x===0?"bg-green-500":x===1?"bg-yellow-500":x===2?"bg-orange-500":"bg-primary"]),style:mt({width:Math.min(o.total_score,100)+"%"})},null,6)])])])]))),128))])])])])):m("",!0),p.value&&p.value.length>0?(n(),d("div",gs,[t("div",bs,[t("div",hs,[s[24]||(s[24]=t("h6",{class:"text-primary mb-3"},"Timeline de Votação (Últimas 24h)",-1)),i(w,{type:"line",data:L.value,options:M.value},null,8,["data","options"])])])])):m("",!0),f.value&&f.value.length>0?(n(),d("div",fs,[t("div",xs,[t("div",ys,[s[28]||(s[28]=t("h6",{class:"text-primary mb-3"},"Análise Detalhada por Participante",-1)),i(U,{value:f.value,paginator:!0,rows:10,dataKey:"participant_id",rowHover:!0,filterDisplay:"menu",loading:g.value,globalFilterFields:["participant_name"],responsiveLayout:"scroll"},{header:u(()=>[t("div",Fs,[i(h,{type:"button",icon:"pi pi-filter-slash",label:"Limpar",class:"p-button-outlined",onClick:s[1]||(s[1]=o=>R())}),t("span",ws,[s[25]||(s[25]=t("i",{class:"pi pi-search"},null,-1)),i(q,{modelValue:y.value.global.value,"onUpdate:modelValue":s[2]||(s[2]=o=>y.value.global.value=o),placeholder:"Buscar participante..."},null,8,["modelValue"])])])]),default:u(()=>[i(_,{field:"participant_name",header:"Participante",sortable:!0},{body:u(o=>[t("div",Cs,[i(S,{image:o.data.participant_photo,label:o.data.participant_name.charAt(0),size:"normal",shape:"circle",class:"mr-2"},null,8,["image","label"]),v(" "+a(o.data.participant_name),1)])]),_:1}),i(_,{field:"public_votes",header:"Votos Público",sortable:!0},{body:u(o=>[t("div",Vs,[s[26]||(s[26]=t("i",{class:"pi pi-heart text-red-500 mr-2"},null,-1)),v(" "+a(o.data.public_votes),1)])]),_:1}),i(_,{field:"judge_votes",header:"Votos Júri",sortable:!0},{body:u(o=>[t("div",js,[s[27]||(s[27]=t("i",{class:"pi pi-star text-yellow-500 mr-2"},null,-1)),v(" "+a(o.data.judge_votes),1)])]),_:1}),i(_,{field:"judge_average",header:"Média Júri",sortable:!0},{body:u(o=>[i(D,{value:o.data.judge_average.toFixed(2),severity:o.data.judge_average>=8?"success":o.data.judge_average>=6?"warning":"danger"},null,8,["value","severity"])]),_:1}),i(_,{field:"total_score",header:"Score Final",sortable:!0},{body:u(o=>[t("div",ks,[i(K,{value:Math.min(o.data.total_score,100),class:"mr-2 flex-1",style:{height:"0.5rem"}},null,8,["value"]),t("span",As,a(o.data.total_score.toFixed(1))+"%",1)])]),_:1}),i(_,{header:"Posição",sortable:!1},{body:u(o=>[t("div",Ds,[t("div",{class:$(["flex align-items-center justify-content-center text-white border-round font-bold",H(o.index+1)]),style:{width:"30px",height:"30px"}},a(o.index+1),3)])]),_:1})]),_:1},8,["value","loading"])])])])):m("",!0),r.value&&r.value.length>0?(n(),d("div",Ss,[t("div",$s,[t("div",Bs,[s[29]||(s[29]=t("h6",{class:"text-primary mb-3"},"Distribuição Votos Público",-1)),i(w,{type:"doughnut",data:N.value,options:V.value},null,8,["data","options"])])]),t("div",Es,[t("div",Ts,[s[30]||(s[30]=t("h6",{class:"text-primary mb-3"},"Distribuição Votos Júri",-1)),i(w,{type:"doughnut",data:P.value,options:V.value},null,8,["data","options"])])])])):m("",!0)])):(n(),d("div",Ms,[i(Z,{severity:"error",class:"w-full"},{default:u(()=>s[31]||(s[31]=[v(" Episódio não encontrado ou erro ao carregar estatísticas ")])),_:1})]))])])])}}},pe=lt(Ns,[["__scopeId","data-v-b99a0270"]]);export{pe as default};
